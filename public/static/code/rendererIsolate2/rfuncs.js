(function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e():"function"===typeof define&&define.amd?define([],e):"object"===typeof exports?exports["VoxApp"]=e():t["VoxApp"]=e()})("undefined"!==typeof self?self:this,(function(){return function(t){var e={};function s(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,s),a.l=!0,a.exports}return s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(i,a,function(e){return t[e]}.bind(null,a));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s="fae3")}({"030e":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class i{static Initialize(t,e){let s=this;1==t?(s.OES_standard_derivatives=e.getExtension("OES_standard_derivatives"),s.OES_standard_derivatives,s.EXT_shader_texture_lod=e.getExtension("EXT_shader_texture_lod"),s.EXT_shader_texture_lod,s.WEBGL_draw_buffers=e.getExtension("WEBGL_draw_buffers"),s.WEBGL_draw_buffers,s.OES_vertex_array_object=e.getExtension("OES_vertex_array_object"),s.OES_vertex_array_object,s.ANGLE_instanced_arrays=e.getExtension("ANGLE_instanced_arrays"),s.ANGLE_instanced_arrays,s.EXT_color_buffer_float=e.getExtension("EXT_color_buffer_float"),s.EXT_color_buffer_float,s.EXT_color_buffer_half_float=e.getExtension("EXT_color_buffer_half_float"),s.EXT_color_buffer_half_float,s.OES_texture_half_float=e.getExtension("OES_texture_half_float"),s.OES_texture_half_float,s.OES_texture_half_float_linear=e.getExtension("OES_texture_half_float_linear"),s.OES_texture_half_float_linear,s.OES_texture_float=e.getExtension("OES_texture_float"),s.OES_texture_float,s.OES_element_index_uint=e.getExtension("OES_element_index_uint"),s.OES_element_index_uint,s.EXT_blend_minmax=e.getExtension("EXT_blend_minmax"),s.EXT_blend_minmax):(s.EXT_shader_texture_lod=e.getExtension("EXT_shader_texture_lod"),s.EXT_shader_texture_lod,s.EXT_color_buffer_half_float=e.getExtension("EXT_color_buffer_half_float"),s.EXT_color_buffer_half_float,s.OES_texture_half_float_linear=e.getExtension("OES_texture_half_float_linear"),s.OES_texture_half_float_linear,s.EXT_color_buffer_float=e.getExtension("EXT_color_buffer_float"),s.EXT_color_buffer_float),s.OES_texture_float_linear=e.getExtension("OES_texture_float_linear"),s.OES_texture_float_linear,s.WEBGL_depth_texture=e.getExtension("WEBGL_depth_texture"),s.WEBGL_depth_texture,s.WEBGL_debug_renderer_info=e.getExtension("WEBGL_debug_renderer_info"),s.WEBGL_debug_renderer_info}}i.OES_standard_derivatives=null,i.EXT_shader_texture_lod=null,i.WEBGL_draw_buffers=null,i.OES_vertex_array_object=null,i.ANGLE_instanced_arrays=null,i.EXT_color_buffer_float=null,i.EXT_color_buffer_half_float=null,i.OES_texture_float_linear=null,i.OES_texture_half_float_linear=null,i.OES_texture_half_float=null,i.OES_texture_float=null,i.OES_element_index_uint=null,i.EXT_blend_minmax=null,i.WEBGL_depth_texture=null,i.WEBGL_debug_renderer_info=null,e.default=i},"0851":function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=s("8d98"),r=i(s("6e01")),l=i(s("da6a"));class _{constructor(t,e,s=!1){this.m_uid=-1,this.m_attachCount=0,this.m_renderProxy=null,this.m_slot=null,this.m_miplevel=-1,this.m_texWidth=128,this.m_texHeight=128,this.m_texBufW=128,this.m_texBufH=128,this.m_texTarget=a.TextureTarget.TEXTURE_2D,this.m_sampler=-1,this.m_haveRData=!1,this.m_type=a.TextureProxyType.Default,this.m_generateMipmap=!0,this.name="TextureProxy",this.internalFormat=a.TextureFormat.RGBA,this.srcFormat=a.TextureFormat.RGBA,this.dataType=a.TextureDataType.UNSIGNED_BYTE,this.wrap_s=a.TextureConst.WRAP_CLAMP_TO_EDGE,this.wrap_t=a.TextureConst.WRAP_CLAMP_TO_EDGE,this.wrap_r=a.TextureConst.WRAP_CLAMP_TO_EDGE,this.mipmapEnabled=!1,this.flipY=!1,this.premultiplyAlpha=!1,this.unpackAlignment=4,this.minFilter=a.TextureConst.LINEAR_MIPMAP_LINEAR,this.magFilter=a.TextureConst.LINEAR,this.version=0,this.m_slot=l.default.GetInstance(),this.m_uid=this.m_slot.getFreeUid(),t<1&&(t=128),e<1&&(e=128),s?(this.m_texWidth=r.default.CalcNearestCeilPow2(t),this.m_texHeight=r.default.CalcNearestCeilPow2(e)):(this.m_texWidth=t,this.m_texHeight=e),this.m_slot.__$$addTexture(this)}__$$use(t){t.bindToGpu(this.getResUid())}__$setRenderProxy(t){null!=this.m_slot||(this.m_slot=l.default.GetInstance(),this.m_uid=this.m_slot.getFreeUid(),this.m_slot.__$$addTexture(this)),this.m_renderProxy=t}__$attachThis(){-1==this.m_attachCount&&(this.m_slot.removeFreeUid(this.getUid()),this.m_attachCount=0),++this.m_attachCount}__$detachThis(){this.m_attachCount>0&&(--this.m_attachCount,this.m_attachCount<1&&(this.m_attachCount=-1,this.m_slot.addFreeUid(this.getUid())))}getAttachCount(){return this.m_attachCount}isDirect(){return!0}getType(){return this.m_type}getResUid(){return this.m_uid}getUid(){return this.m_uid}setWrap(t){this.wrap_s=this.wrap_t=this.wrap_r=t}isGpuEnabled(){return null!=this.m_renderProxy&&this.m_renderProxy.Texture.hasResUid(this.getResUid())}getSampler(){return this.m_sampler}getTargetType(){return this.m_texTarget}getBufWidth(){return this.m_texBufW}getBufHeight(){return this.m_texBufH}getWidth(){return this.m_texWidth}getHeight(){return this.m_texHeight}isDataEnough(){return this.m_haveRData}__$buildParam(t){this.m_texBufW=this.m_texWidth,this.m_texBufH=this.m_texHeight,t.texParameteri(this.m_sampler,t.TEXTURE_WRAP_S,a.TextureConst.GetConst(t,this.wrap_s)),t.texParameteri(this.m_sampler,t.TEXTURE_WRAP_T,a.TextureConst.GetConst(t,this.wrap_t)),t.texParameteri(this.m_sampler,t.TEXTURE_MIN_FILTER,a.TextureConst.GetConst(t,this.minFilter)),t.texParameteri(this.m_sampler,t.TEXTURE_MAG_FILTER,a.TextureConst.GetConst(t,this.magFilter)),this.m_texTarget==a.TextureTarget.TEXTURE_3D&&(t.texParameteri(this.m_sampler,t.TEXTURE_WRAP_R,a.TextureConst.GetConst(t,this.wrap_r)),t.texParameteri(t.TEXTURE_3D,t.TEXTURE_BASE_LEVEL,0),t.texParameteri(t.TEXTURE_3D,t.TEXTURE_MAX_LEVEL,Math.log2(this.m_texWidth))),this.mipmapEnabled&&this.m_generateMipmap&&t.generateMipmap(this.m_sampler)}generateMipmap(t){if(this.mipmapEnabled&&this.m_generateMipmap){let e=t.getRC();t.bindToGpu(this.getResUid()),this.__$buildParam(e)}}uploadData(t){}__$updateToGpu(t){}updateDataToGpu(t=null,e=!0){null!=t&&(this.m_renderProxy=t),null!=this.m_renderProxy&&this.m_renderProxy.MaterialUpdater.updateTextureData(this,e)}createTexBuf(t){return!t.hasResUid(this.getResUid())&&(this.m_sampler=a.TextureTarget.GetValue(t.getRC(),this.m_texTarget),t.createResByParams3(this.getResUid(),this.getWidth(),this.getHeight(),this.m_sampler),!0)}__$$upload(t){if(this.m_haveRData&&null!=this.m_slot){let e=this.createTexBuf(t);e&&(this.__$updateToGpuBegin(t),this.uploadData(t),this.__$buildParam(t.getRC()),this.m_generateMipmap=!0)}}dataUploadToGpu(t,e,s,i=!1){this.version=0;let r=a.TextureFormat.ToGL(t,this.internalFormat),l=a.TextureFormat.ToGL(t,this.srcFormat),_=a.TextureDataType.ToGL(t,this.dataType),n=e;if(null==s)(n.status>-1||i)&&n.updateToGpu(t,this.m_sampler,r,l,_,i);else{let e=s;for(let s=0,a=e.length;s<a;++s)n=e[s],null!=n&&(n.status>-1||i)&&n.updateToGpu(t,this.m_sampler,r,l,_,i);this.m_generateMipmap=!1}}__$updateToGpuBegin(t){let e=t.getRC();t.bindToGpu(this.getResUid()),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,this.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,this.unpackAlignment)}__$updateToGpuEnd(t){}isDestroyed(){return this.m_attachCount<-1}__$destroy(){this.getAttachCount()<1&&(this.m_attachCount=-2,this.m_haveRData=!1,this.m_texWidth=1,this.m_texHeight=1,this.m_renderProxy=null)}__$$removeFromSlot(){null!=this.m_slot&&-2==this.getAttachCount()&&(this.m_slot=null,this.m_renderProxy=null,this.m_uid=-1)}toString(){return"[TextureProxy(name:"+this.name+",uid="+this.getUid()+",width="+this.getWidth()+",height="+this.getHeight()+")]"}}e.TextureProxy=_,e.default=_},"0929":function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s("6e01")),r=i(s("2139")),l=i(s("9156"));class _{constructor(){this.m_uid=0,this.m_fs32=new Float32Array(16),this.m_invMatEnabled=!1,this.m_rotFlag=!1,this.updatedStatus=_.UPDATE_POSITION,this.updateStatus=_.UPDATE_TRANSFORM,this.m_omat=null,this.m_localMat=null,this.m_parentMat=null,this.m_toParentMat=null,this.m_toParentMatFlag=!0,this.m_invOmat=null,this.m_uid=_.s_uid++}getUid(){return this.m_uid}getX(){return this.m_fs32[12]}getY(){return this.m_fs32[13]}getZ(){return this.m_fs32[14]}setX(t){this.updateStatus|=1,this.updatedStatus|=1,this.m_fs32[12]=t}setY(t){this.updateStatus|=1,this.updatedStatus|=1,this.m_fs32[13]=t}setZ(t){this.updateStatus|=1,this.updatedStatus|=1,this.m_fs32[14]=t}setXYZ(t,e,s){this.m_fs32[12]=t,this.m_fs32[13]=e,this.m_fs32[14]=s,this.updateStatus|=1,this.updatedStatus|=1}offsetPosition(t){this.m_fs32[12]+=t.x,this.m_fs32[13]+=t.y,this.m_fs32[14]+=t.z,this.updateStatus|=1,this.updatedStatus|=1}setPosition(t){this.m_fs32[12]=t.x,this.m_fs32[13]=t.y,this.m_fs32[14]=t.z,this.updateStatus|=1,this.updatedStatus|=1}getPosition(t){t.x=this.m_fs32[12],t.y=this.m_fs32[13],t.z=this.m_fs32[14]}copyPositionFrom(t){null!=t&&(this.m_fs32[12]=t.m_fs32[12],this.m_fs32[13]=t.m_fs32[13],this.m_fs32[14]=t.m_fs32[14],this.updateStatus|=_.UPDATE_POSITION,this.updatedStatus|=_.UPDATE_POSITION)}getRotationX(){return this.m_fs32[1]}getRotationY(){return this.m_fs32[6]}getRotationZ(){return this.m_fs32[9]}setRotationX(t){this.m_fs32[1]=t,this.m_rotFlag=!0,this.updateStatus|=_.UPDATE_ROTATION,this.updatedStatus|=_.UPDATE_ROTATION}setRotationY(t){this.m_fs32[6]=t,this.m_rotFlag=!0,this.updateStatus|=_.UPDATE_ROTATION,this.updatedStatus|=_.UPDATE_ROTATION}setRotationZ(t){this.m_fs32[9]=t,this.m_rotFlag=!0,this.updateStatus|=_.UPDATE_ROTATION,this.updatedStatus|=_.UPDATE_ROTATION}setRotationXYZ(t,e,s){this.m_fs32[1]=t,this.m_fs32[6]=e,this.m_fs32[9]=s,this.updateStatus|=_.UPDATE_ROTATION,this.updatedStatus|=_.UPDATE_ROTATION,this.m_rotFlag=!0}getScaleX(){return this.m_fs32[0]}getScaleY(){return this.m_fs32[5]}getScaleZ(){return this.m_fs32[10]}setScaleX(t){this.m_fs32[0]=t,this.updateStatus|=_.UPDATE_SCALE,this.updatedStatus|=_.UPDATE_SCALE}setScaleY(t){this.m_fs32[5]=t,this.updateStatus|=_.UPDATE_SCALE,this.updatedStatus|=_.UPDATE_SCALE}setScaleZ(t){this.m_fs32[10]=t,this.updateStatus|=_.UPDATE_SCALE,this.updatedStatus|=_.UPDATE_SCALE}setScaleXYZ(t,e,s){this.m_fs32[0]=t,this.m_fs32[5]=e,this.m_fs32[10]=s,this.updateStatus|=_.UPDATE_SCALE,this.updatedStatus|=_.UPDATE_SCALE}setScale(t){this.m_fs32[0]=t,this.m_fs32[5]=t,this.m_fs32[10]=t,this.updateStatus|=_.UPDATE_SCALE,this.updatedStatus|=_.UPDATE_SCALE}getRotationXYZ(t){t.x=this.m_fs32[1],t.y=this.m_fs32[6],t.z=this.m_fs32[9]}getScaleXYZ(t){t.x=this.m_fs32[0],t.y=this.m_fs32[5],t.z=this.m_fs32[10]}localToGlobal(t){this.getMatrix().transformVectorSelf(t)}globalToLocal(t){this.getInvMatrix().transformVectorSelf(t)}getInvMatrix(){return null!=this.m_invOmat?this.m_invMatEnabled&&(this.m_invOmat.copyFrom(this.m_omat),this.m_invOmat.invert()):(this.m_invOmat=r.default.GetMatrix(),this.m_invOmat.copyFrom(this.m_omat),this.m_invOmat.invert()),this.m_invMatEnabled=!1,this.m_invOmat}getLocalMatrix(){return this.updateStatus>0&&this.update(),this.m_localMat}getMatrix(){return this.updateStatus>0&&this.update(),this.m_omat}getToParentMatrix(){return null!=this.m_toParentMat?this.m_toParentMat:this.m_omat}setParentMatrix(t){this.m_parentMat=t,this.m_invMatEnabled=!0,null!=this.m_parentMat&&(this.m_localMat==this.m_omat?(this.updateStatus=_.UPDATE_TRANSFORM,this.updatedStatus=this.updateStatus,this.m_localMat=r.default.GetMatrix()):(this.updateStatus|=_.UPDATE_PARENT_MAT,this.updatedStatus=this.updateStatus))}updateMatrixData(t){null!=t&&(this.updateStatus=_.UPDATE_NONE,this.m_invMatEnabled=!0,this.m_omat.copyFrom(t))}__$setMatrix(t){null!=t&&(this.updateStatus=_.UPDATE_NONE,this.m_invMatEnabled=!0,this.m_localMat==this.m_omat&&(this.m_localMat=t),null!=this.m_omat&&(l.default.RemoveTransUniform(this.m_omat),r.default.RetrieveMatrix(this.m_omat)),this.m_omat=t)}destroy(){null!=this.m_invOmat&&r.default.RetrieveMatrix(this.m_invOmat),null!=this.m_localMat&&(this.m_omat==this.m_localMat&&l.default.RemoveTransUniform(this.m_omat),r.default.RetrieveMatrix(this.m_localMat)),null!=this.m_omat&&this.m_omat!=this.m_localMat&&(l.default.RemoveTransUniform(this.m_omat),r.default.RetrieveMatrix(this.m_omat)),this.m_invOmat=null,this.m_localMat=null,this.m_omat=null,this.m_parentMat=null,this.updateStatus=_.UPDATE_TRANSFORM}copyFrom(t){this.m_fs32.set(t.m_fs32,0),this.updatedStatus|=1,this.updateStatus|=_.UPDATE_TRANSFORM,this.m_rotFlag=t.m_rotFlag}update(){this.updateStatus>0&&(this.m_invMatEnabled=!0,this.updateStatus=this.updateStatus|this.updatedStatus,(this.updateStatus&_.UPDATE_TRANSFORM)>0&&(this.m_localMat.getLocalFS32().set(this.m_fs32,0),this.m_rotFlag&&this.m_localMat.setRotationEulerAngle(this.m_fs32[1]*a.default.MATH_PI_OVER_180,this.m_fs32[6]*a.default.MATH_PI_OVER_180,this.m_fs32[9]*a.default.MATH_PI_OVER_180),null!=this.m_parentMat&&(this.updateStatus=this.updateStatus|_.UPDATE_PARENT_MAT)),this.m_omat!=this.m_localMat&&this.m_omat.copyFrom(this.m_localMat),(this.updateStatus&_.UPDATE_PARENT_MAT)==_.UPDATE_PARENT_MAT&&(null!=this.m_toParentMat||(this.m_toParentMat=r.default.GetMatrix()),this.m_toParentMat.copyFrom(this.m_omat),this.m_toParentMatFlag=!0,this.m_omat.append(this.m_parentMat)),this.updateStatus=_.UPDATE_NONE)}getMatrixFS32(){return this.getMatrix().getLocalFS32()}toString(){return"[ROTransform(uid = "+this.m_uid+")]"}static GetFreeId(){return _.m_freeIdList.length>0?_.m_freeIdList.pop():-1}static Create(t=null){let e=null,s=_.GetFreeId();return s>=0?(e=_.m_unitList[s],_.m_unitFlagList[s]=_.S_FLAG_BUSY):(e=new _,_.m_unitList.push(e),_.m_unitFlagList.push(_.S_FLAG_BUSY),_.m_unitListLen++),e.m_omat=null==t?r.default.GetMatrix():t,e.m_localMat=e.m_omat,e.m_fs32.set(_.s_initData,0),e}static Restore(t){if(null!=t&&_.m_unitFlagList[t.getUid()]==_.S_FLAG_BUSY){let e=t.getUid();_.m_freeIdList.push(e),_.m_unitFlagList[e]=_.S_FLAG_FREE,t.destroy()}}}_.s_uid=0,_.s_initData=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),_.UPDATE_NONE=0,_.UPDATE_POSITION=1,_.UPDATE_ROTATION=2,_.UPDATE_SCALE=4,_.UPDATE_TRANSFORM=7,_.UPDATE_PARENT_MAT=8,_.S_FLAG_BUSY=1,_.S_FLAG_FREE=0,_.m_unitFlagList=[],_.m_unitListLen=0,_.m_unitList=[],_.m_freeIdList=[],e.default=_},"0fc4":function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s("9666")),r=i(s("faa5"));class l{constructor(){this.m_shduns="",this.m_shdData=null,this.__$troMid=-1,this.__$uniform=null,this.m_texList=null,this.m_texListLen=0,this.m_texDataEnabled=!1,this.m_attachCount=0}getShdUniqueName(){return this.m_shduns}initializeByUniqueName(t){if(null==this.getShaderData()){let e=a.default.FindData(t);null!=e&&(this.m_shdData=e)}return null!=this.getShaderData()}initialize(t,e,s,i=!0){if(null==this.getShaderData()){r.default.UseShaderBuffer(null);let l=a.default.FindData(t);null==l&&(l=a.default.CreateShdData(t,e,s,i,r.default.GetPreCompileInfo())),this.m_shduns=t,this.m_shdData=l}}getCodeBuf(){return null!=l.s_codeBuffer||(l.s_codeBuffer=new r.default),l.s_codeBuffer}hasShaderData(){if(null!=this.m_shdData){if(!this.m_shdData.haveTexture())return!0;if(this.texDataEnabled())return!0}return!1}initializeByCodeBuf(t=!1){if(null==this.m_shdData){let e=this.getCodeBuf();if(null!=e){null==l.s_codeBuffer&&(l.s_codeBuffer=new r.default),r.default.UseShaderBuffer(e),l.s_codeBuffer.initialize(t);let s=l.s_codeBuffer.getUniqueShaderName();this.m_shduns=s,this.__$initShd(this.m_shduns);let i=a.default.FindData(s);if(null==i){l.s_codeBuffer.buildShader();let t=l.s_codeBuffer.getFragShaderCode(),_=l.s_codeBuffer.getVtxShaderCode();i=a.default.CreateShdData(s,_,t,e.adaptationShaderVersion,r.default.GetPreCompileInfo())}r.default.UseShaderBuffer(null),this.m_shdData=i}}}__$initShd(t){}getShaderData(){return this.m_shdData}setTextureList(t){if(this.m_texList!=t){this.m_texDataEnabled=!1,this.m_texListLen=null!=t?t.length:0;let e=0;if(null!=this.m_texList)for(;e<this.m_texList.length;++e)this.m_texList[e].__$detachThis();if(this.m_texDataEnabled=!0,this.m_texList=t,null!=this.m_texList){let t=31;for(e=0;e<this.m_texList.length;++e)t=131*t+this.m_texList[e].getUid(),this.m_texList[e].__$attachThis(),this.m_texList[e].isDataEnough()||(this.m_texDataEnabled=!1);this.__$troMid=t}}}setTextureAt(t,e){if(t>=0&&null!=e){let s=this.m_texList,i=s.length;if(null!=s&&s[t]!=e&&t<i&&i>0){s=s.slice(0),s[t].__$detachThis(),s[t]=e,this.m_texDataEnabled=e.isDataEnough(),e.__$attachThis();let a=31;for(let t=0;t<i;++t)a=131*a+s[t].getUid();this.__$troMid=a,this.m_texList=s}}}getTextureList(){return this.m_texList}getTextureAt(t){return this.m_texList[t]}getTextureTotal(){return this.m_texListLen}getShdTexTotal(){return null!=this.m_shdData?this.m_shdData.getTexTotal():0}texDataEnabled(){if(null!=this.m_texList){if(this.m_texDataEnabled)return!0;let t=!0,e=this.m_texList;for(let s=0;s<this.m_texListLen;++s)if(!e[s].isDataEnough()){t=!1;break}return this.m_texDataEnabled=t,t}return null!=this.m_shdData&&this.m_shdData.getTexTotal(),!1}createSharedUniforms(){return null}createSharedUniformsData(){return null}createSelfUniformData(){return null}updateSelfData(t){}hasTexture(){return this.m_shdData.haveTexture()}getBufSortFormat(){return null!=this.m_shdData?this.m_shdData.getLayoutBit():0}__$attachThis(){++this.m_attachCount}__$detachThis(){--this.m_attachCount,this.m_attachCount<1&&(this.m_attachCount=0)}getAttachCount(){return this.m_attachCount}destroy(){if(this.getAttachCount()<1){if(null!=this.m_texList)for(let t=0;t<this.m_texList.length;++t)this.m_texList[t].__$detachThis();this.m_shdData=null,this.m_texList=null,this.m_texDataEnabled=!1,this.__$troMid=0,null!=this.__$uniform&&(this.__$uniform.destroy(),this.__$uniform=null)}}toString(){return"[MaterialBase()]"}}l.s_codeBuffer=null,e.default=l},"11e6":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class i{static AddContainerFlag(t){return 2147483648|t}static RemoveContainerFlag(t){return-2147483649&t}static AddSpaceUid(t,e){return-1048576&t|e}static RemoveSpaceUid(t){return-1048576&t}static GetSpaceUid(t){return 1048575&t}static AddRendererUid(t,e){return-133169153&t|e<<20}static RemoveRendererUid(t){return 133169152|t}static GetRendererUid(t){return(133169152&t)>>20}static AddSortEnabled(t){return 1073741824|t}static RemoveSortEnabled(t){return-1073741825&t}static TestSortEnabled(t){return 1073741824==(1073741824&t)}static AddRendererLoad(t){return 805306368|t}static RemoveRendererLoad(t){return-805306369&t}static TestSpaceContains(t){return(1048575&t)>0}static TestSpaceEnabled(t){return(1048575&t)<1}static TestSpaceEnabled2(t){return(1048575&t)<1&&2147483648!=(2147483648&t)}static TestContainerEnabled(t){return 133169152==(133169152&t)&&2147483648!=(2147483648&t)}static TestRendererEnabled(t){return 133169152==(938475520&t)&&2147483648!=(2147483648&t)}}i.DEFAULT=133169152,i.CONTAINER_FLAG=2147483648,i.CONTAINER_NOT_FLAG=-2147483649,i.SPACE_FLAT=1048575,i.SPACE_NOT_FLAT=-1048576,i.RENDERER_UID_FLAT=133169152,i.RENDERER_UID_NOT_FLAT=-133169153,i.SORT_FLAT=1073741824,i.SORT_NOT_FLAT=-1073741825,i.RENDERER_LOAD_FLAT=805306368,i.RENDERER_LOAD_NOT_FLAT=-805306369,i.RENDERER_ADN_LOAD_FLAT=938475520,e.default=i},1710:function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s("8e17")),r=i(s("a996"));class l extends r.default{constructor(){super(),this.phase=0,this.type=0,this.target=null,this.lpos=new a.default,this.wpos=new a.default,this.raytv=new a.default(1,0,0),this.raypv=new a.default(0,0,0),this.mouseX=0,this.mouseY=0,this.mouseViewX=0,this.mouseViewY=0,this.posArray=null,this.wheelDeltaY=0}static GetMouseEvtTypeValueBase(){return 5001}static GetMouseEvtTypeValuesTotal(){return 17}getClassType(){return l.EventClassType}toString(){return"[MouseEvent]"}}l.EventClassType=1002,l.MOUSE_DOWN=5001,l.MOUSE_UP=5002,l.MOUSE_RIGHT_UP=5003,l.MOUSE_RIGHT_DOWN=5004,l.MOUSE_MOVE=5005,l.MOUSE_WHEEL=5006,l.MOUSE_OVER=5007,l.MOUSE_OUT=5008,l.MOUSE_CLICK=5009,l.MOUSE_RIGHT_CLICK=5010,l.MOUSE_DOUBLE_CLICK=5011,l.MOUSE_CANCEL=5012,l.MOUSE_MULTI_DOWN=5013,l.MOUSE_MULTI_UP=5014,l.MOUSE_MULTI_MOVE=5015,l.MOUSE_BG_DOWN=5016,l.MOUSE_BG_UP=5017,e.default=l},"18c7":function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s("6e01")),r=i(s("8e17")),l=i(s("abdb"));class _{constructor(t=null,e=0){this.m_uid=-1,this.m_index=0,this.m_fs32=null,this.m_localFS32=null,this.m_index=e,null!=t?(this.m_uid=_.s_uid++,this.m_fs32=t,this.m_localFS32=this.m_fs32.subarray(e,e+16)):(this.m_uid=_.s_isolatedUid++,this.m_fs32=new Float32Array(16),this.m_fs32.set(_.s_InitData,0),this.m_localFS32=this.m_fs32)}setData(t){16==t.length&&this.m_localFS32.set(t)}getCapacity(){return 16}GetMaxUid(){return _.s_uid}getUid(){return this.m_uid}getLocalFS32(){return this.m_localFS32}getFS32(){return this.m_fs32}getFSIndex(){return this.m_index}identity(){this.m_localFS32.set(_.s_InitData,0)}determinant(){return(this.m_localFS32[0]*this.m_localFS32[5]-this.m_localFS32[4]*this.m_localFS32[1])*(this.m_localFS32[10]*this.m_localFS32[15]-this.m_localFS32[14]*this.m_localFS32[11])-(this.m_localFS32[0]*this.m_localFS32[9]-this.m_localFS32[8]*this.m_localFS32[1])*(this.m_localFS32[6]*this.m_localFS32[15]-this.m_localFS32[14]*this.m_localFS32[7])+(this.m_localFS32[0]*this.m_localFS32[13]-this.m_localFS32[12]*this.m_localFS32[1])*(this.m_localFS32[6]*this.m_localFS32[11]-this.m_localFS32[10]*this.m_localFS32[7])+(this.m_localFS32[4]*this.m_localFS32[9]-this.m_localFS32[8]*this.m_localFS32[5])*(this.m_localFS32[2]*this.m_localFS32[15]-this.m_localFS32[14]*this.m_localFS32[3])-(this.m_localFS32[4]*this.m_localFS32[13]-this.m_localFS32[12]*this.m_localFS32[5])*(this.m_localFS32[2]*this.m_localFS32[11]-this.m_localFS32[10]*this.m_localFS32[3])+(this.m_localFS32[8]*this.m_localFS32[13]-this.m_localFS32[12]*this.m_localFS32[9])*(this.m_localFS32[2]*this.m_localFS32[7]-this.m_localFS32[6]*this.m_localFS32[3])}append(t){let e=t.getLocalFS32(),s=this.m_localFS32,i=s[0],a=s[4],r=s[8],l=s[12],_=s[1],n=s[5],h=s[9],u=s[13],o=s[2],m=s[6],d=s[10],c=s[14],f=s[3],p=s[7],S=s[11],A=s[15],T=e[0],E=e[4],M=e[8],g=e[12],x=e[1],v=e[5],y=e[9],b=e[13],F=e[2],R=e[6],D=e[10],L=e[14],N=e[3],B=e[7],O=e[11],C=e[15];s[0]=i*T+_*E+o*M+f*g,s[1]=i*x+_*v+o*y+f*b,s[2]=i*F+_*R+o*D+f*L,s[3]=i*N+_*B+o*O+f*C,s[4]=a*T+n*E+m*M+p*g,s[5]=a*x+n*v+m*y+p*b,s[6]=a*F+n*R+m*D+p*L,s[7]=a*N+n*B+m*O+p*C,s[8]=r*T+h*E+d*M+S*g,s[9]=r*x+h*v+d*y+S*b,s[10]=r*F+h*R+d*D+S*L,s[11]=r*N+h*B+d*O+S*C,s[12]=l*T+u*E+c*M+A*g,s[13]=l*x+u*v+c*y+A*b,s[14]=l*F+u*R+c*D+A*L,s[15]=l*N+u*B+c*O+A*C}append3x3(t){let e=t.getLocalFS32(),s=this.m_localFS32,i=s[0],a=s[4],r=s[8],l=s[1],_=s[5],n=s[9],h=s[2],u=s[6],o=s[10],m=e[0],d=e[4],c=e[8],f=e[1],p=e[5],S=e[9],A=e[2],T=e[6],E=e[10];s[0]=i*m+l*d+h*c,s[1]=i*f+l*p+h*S,s[2]=i*A+l*T+h*E,s[4]=a*m+_*d+u*c,s[5]=a*f+_*p+u*S,s[6]=a*A+_*T+u*E,s[8]=r*m+n*d+o*c,s[9]=r*f+n*p+o*S,s[10]=r*A+n*T+o*E}appendRotationPivot(t,e,s=null){null==s&&(s=r.default.Z_AXIS),_.s_tMat4.identity(),_.s_tMat4.getAxisRotation(e.x,e.y,e.z,t),_.s_tMat4.appendTranslationXYZ(s.x,s.y,s.z),this.append(_.s_tMat4)}appendRotation(t,e){_.s_tMat4.identity(),_.s_tMat4.getAxisRotation(e.x,e.y,e.z,t),this.append(_.s_tMat4)}appendRotationX(t){_.s_tMat4.rotationX(t),this.append3x3(_.s_tMat4)}appendRotationY(t){_.s_tMat4.rotationY(t),this.append3x3(_.s_tMat4)}appendRotationZ(t){_.s_tMat4.rotationZ(t),this.append3x3(_.s_tMat4)}appendRotationEulerAngle(t,e,s){_.s_tMat4.rotationY(e),this.append3x3(_.s_tMat4),_.s_tMat4.rotationX(t),this.append3x3(_.s_tMat4),_.s_tMat4.rotationZ(s),this.append3x3(_.s_tMat4)}setScaleXYZ(t,e,s){let i=this.m_localFS32;i[0]=t,i[5]=e,i[10]=s}setRotationEulerAngle(t,e,s){let i=this.m_localFS32,a=Math.cos(t),r=Math.sin(t),l=Math.cos(e),_=Math.sin(e),n=Math.cos(s),h=Math.sin(s),u=n*_,o=h*_,m=l*i[0],d=r*i[5],c=a*i[5],f=a*i[10],p=r*i[10];i[1]=h*m,i[2]=-_*i[0],i[0]=n*m,i[4]=u*d-h*c,i[8]=u*f+h*p,i[5]=o*d+n*c,i[9]=o*f-n*p,i[6]=l*d,i[10]=l*f}setRotationEulerAngle2(t,e,s,i,a,r){let l=this.m_localFS32,_=a*i,n=r*i,h=s*l[0],u=e*l[5],o=t*l[5],m=t*l[10],d=e*l[10];l[1]=r*h,l[2]=-i*l[0],l[0]=a*h,l[4]=_*u-r*o,l[8]=_*m+r*d,l[5]=n*u+a*o,l[9]=n*m-a*d,l[6]=s*u,l[10]=s*m}setTranslationXYZ(t,e,s){this.m_localFS32[12]=t,this.m_localFS32[13]=e,this.m_localFS32[14]=s}setTranslation(t){this.m_localFS32[12]=t.x,this.m_localFS32[13]=t.y,this.m_localFS32[14]=t.z}appendScaleXYZ(t,e,s){let i=this.m_localFS32;i[0]*=t,i[1]*=t,i[2]*=t,i[3]*=t,i[4]*=e,i[5]*=e,i[6]*=e,i[7]*=e,i[8]*=s,i[9]*=s,i[10]*=s,i[11]*=s}appendScaleXY(t,e){this.m_localFS32[0]*=t,this.m_localFS32[1]*=t,this.m_localFS32[2]*=t,this.m_localFS32[3]*=t,this.m_localFS32[4]*=e,this.m_localFS32[5]*=e,this.m_localFS32[6]*=e,this.m_localFS32[7]*=e}appendTranslationXYZ(t,e,s){this.m_localFS32[12]+=t,this.m_localFS32[13]+=e,this.m_localFS32[14]+=s}appendTranslation(t){this.m_localFS32[12]+=t.x,this.m_localFS32[13]+=t.y,this.m_localFS32[14]+=t.z}copyColumnFrom(t,e){switch(t){case 0:this.m_localFS32[0]=e.x,this.m_localFS32[1]=e.y,this.m_localFS32[2]=e.z,this.m_localFS32[3]=e.w;break;case 1:this.m_localFS32[4]=e.x,this.m_localFS32[5]=e.y,this.m_localFS32[6]=e.z,this.m_localFS32[7]=e.w;break;case 2:this.m_localFS32[8]=e.x,this.m_localFS32[9]=e.y,this.m_localFS32[10]=e.z,this.m_localFS32[11]=e.w;break;case 3:this.m_localFS32[12]=e.x,this.m_localFS32[13]=e.y,this.m_localFS32[14]=e.z,this.m_localFS32[15]=e.w;break;default:break}}copyColumnTo(t,e){t<<=2,e.x=this.m_localFS32[t],e.y=this.m_localFS32[1+t],e.z=this.m_localFS32[2+t],e.w=this.m_localFS32[3+t]}setF32ArrAndIndex(t,e=0){null!=t&&e>=0&&(this.m_fs32=t,this.m_index=e,this.m_localFS32=this.m_fs32.subarray(e,e+16))}setF32ArrIndex(t=0){t>=0&&(this.m_index=t,this.m_localFS32=this.m_fs32.subarray(t,t+16))}setF32Arr(t){null!=t&&(this.m_fs32=t)}copyFromF32Arr(t,e=0){let s=0;for(let i=e+16;e<i;e++)this.m_localFS32[s]=t[e],++s}copyToF32Arr(t,e=0){t.set(this.m_localFS32,e)}copyFrom(t){this.m_localFS32.set(t.m_localFS32,0)}copyTo(t){t.m_localFS32.set(this.m_localFS32,0)}copyRawDataFrom(t,e=16,s=0,i=!1){i&&this.transpose(),e-=s;let a=0;while(a<e)this.m_fs32[this.m_index+a]=t[a+s],++a;i&&this.transpose()}copyRawDataTo(t,e=16,s=0,i=!1){i&&this.transpose();let a=0;while(a<e)t[a+s]=this.m_fs32[this.m_index+a],++a;i&&this.transpose()}copyRowFrom(t,e){switch(t){case 0:this.m_localFS32[0]=e.x,this.m_localFS32[4]=e.y,this.m_localFS32[8]=e.z,this.m_localFS32[12]=e.w;break;case 1:this.m_localFS32[1]=e.x,this.m_localFS32[5]=e.y,this.m_localFS32[9]=e.z,this.m_localFS32[13]=e.w;break;case 2:this.m_localFS32[2]=e.x,this.m_localFS32[6]=e.y,this.m_localFS32[10]=e.z,this.m_localFS32[14]=e.w;break;case 3:this.m_localFS32[3]=e.x,this.m_localFS32[7]=e.y,this.m_localFS32[11]=e.z,this.m_localFS32[15]=e.w;break;default:break}}copyRowTo(t,e){e.x=this.m_localFS32[t],e.y=this.m_localFS32[4+t],e.z=this.m_localFS32[8+t],e.w=this.m_localFS32[12+t]}decompose(t){let e=[],s=_.s_tMat4,i=s.getFS32();s.copyFrom(this);let n=new r.default(i[12],i[13],i[14]),h=new r.default;h.x=Math.sqrt(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]),h.y=Math.sqrt(i[4]*i[4]+i[5]*i[5]+i[6]*i[6]),h.z=Math.sqrt(i[8]*i[8]+i[9]*i[9]+i[10]*i[10]),i[0]*(i[5]*i[10]-i[6]*i[9])-i[1]*(i[4]*i[10]-i[6]*i[8])+i[2]*(i[4]*i[9]-i[5]*i[8])<0&&(h.z=-h.z),i[0]/=h.x,i[1]/=h.x,i[2]/=h.x,i[4]/=h.y,i[5]/=h.y,i[6]/=h.y,i[8]/=h.z,i[9]/=h.z,i[10]/=h.z;let u=new r.default;switch(t){case l.default.AXIS_ANGLE:{u.w=a.default.SafeACos((i[0]+i[5]+i[10]-1)/2);let t=Math.sqrt((i[6]-i[9])*(i[6]-i[9])+(i[8]-i[2])*(i[8]-i[2])+(i[1]-i[4])*(i[1]-i[4]));t>a.default.MATH_MIN_POSITIVE?(u.x=(i[6]-i[9])/t,u.y=(i[8]-i[2])/t,u.z=(i[1]-i[4])/t):u.x=u.y=u.z=0}break;case l.default.QUATERNION:{let t=i[0]+i[5]+i[10];t>0?(u.w=Math.sqrt(1+t)/2,u.x=(i[6]-i[9])/(4*u.w),u.y=(i[8]-i[2])/(4*u.w),u.z=(i[1]-i[4])/(4*u.w)):i[0]>i[5]&&i[0]>i[10]?(u.x=Math.sqrt(1+i[0]-i[5]-i[10])/2,u.w=(i[6]-i[9])/(4*u.x),u.y=(i[1]+i[4])/(4*u.x),u.z=(i[8]+i[2])/(4*u.x)):i[5]>i[10]?(u.y=Math.sqrt(1+i[5]-i[0]-i[10])/2,u.x=(i[1]+i[4])/(4*u.y),u.w=(i[8]-i[2])/(4*u.y),u.z=(i[6]+i[9])/(4*u.y)):(u.z=Math.sqrt(1+i[10]-i[0]-i[5])/2,u.x=(i[8]+i[2])/(4*u.z),u.y=(i[6]+i[9])/(4*u.z),u.w=(i[1]-i[4])/(4*u.z))}break;case l.default.EULER_ANGLES:u.y=Math.asin(-i[2]),1!=i[2]&&-1!=i[2]?(u.x=Math.atan2(i[6],i[10]),u.z=Math.atan2(i[1],i[0])):(u.z=0,u.x=Math.atan2(i[4],i[5]));break;default:break}return e.push(n),e.push(u),e.push(h),s=null,e}invert(){let t=this.determinant(),e=Math.abs(t)>a.default.MATH_MIN_POSITIVE;if(e){let e=this.m_localFS32;t=1/t;let s=e[0],i=e[4],a=e[8],r=e[12],l=e[1],_=e[5],n=e[9],h=e[13],u=e[2],o=e[6],m=e[10],d=e[14],c=e[3],f=e[7],p=e[11],S=e[15];e[0]=t*(_*(m*S-d*p)-n*(o*S-d*f)+h*(o*p-m*f)),e[1]=-t*(l*(m*S-d*p)-n*(u*S-d*c)+h*(u*p-m*c)),e[2]=t*(l*(o*S-d*f)-_*(u*S-d*c)+h*(u*f-o*c)),e[3]=-t*(l*(o*p-m*f)-_*(u*p-m*c)+n*(u*f-o*c)),e[4]=-t*(i*(m*S-d*p)-a*(o*S-d*f)+r*(o*p-m*f)),e[5]=t*(s*(m*S-d*p)-a*(u*S-d*c)+r*(u*p-m*c)),e[6]=-t*(s*(o*S-d*f)-i*(u*S-d*c)+r*(u*f-o*c)),e[7]=t*(s*(o*p-m*f)-i*(u*p-m*c)+a*(u*f-o*c)),e[8]=t*(i*(n*S-h*p)-a*(_*S-h*f)+r*(_*p-n*f)),e[9]=-t*(s*(n*S-h*p)-a*(l*S-h*c)+r*(l*p-n*c)),e[10]=t*(s*(_*S-h*f)-i*(l*S-h*c)+r*(l*f-_*c)),e[11]=-t*(s*(_*p-n*f)-i*(l*p-n*c)+a*(l*f-_*c)),e[12]=-t*(i*(n*d-h*m)-a*(_*d-h*o)+r*(_*m-n*o)),e[13]=t*(s*(n*d-h*m)-a*(l*d-h*u)+r*(l*m-n*u)),e[14]=-t*(s*(_*d-h*o)-i*(l*d-h*u)+r*(l*o-_*u)),e[15]=t*(s*(_*m-n*o)-i*(l*m-n*u)+a*(l*o-_*u))}return e}pointAt(t,e,s){null!=e&&void 0!=e||(e=new r.default(0,0,-1)),null!=s&&void 0!=s||(s=new r.default(0,-1,0));let i=e.subtract(t),l=new r.default(s.x,s.y,s.z);i.normalize(),l.normalize();let _=new r.default(i.x,i.y,i.z);_.scaleBy(l.dot(i)),l.subtractBy(_),l.getLength()>a.default.MATH_MIN_POSITIVE?l.normalize():0!=i.x?l.setTo(-i.y,i.x,0):l.setTo(1,0,0);let n=l.crossProduct(i);n.normalize();let h=this.m_localFS32;h[0]=n.x,h[4]=n.y,h[8]=n.z,h[12]=0,h[1]=l.x,h[5]=l.y,h[9]=l.z,h[13]=0,h[2]=i.x,h[6]=i.y,h[10]=i.z,h[14]=0,h[3]=t.x,h[7]=t.y,h[11]=t.z,h[15]=1}prepend(t){let e=t.getLocalFS32(),s=this.m_localFS32,i=e[0],a=e[4],r=e[8],l=e[12],_=e[1],n=e[5],h=e[9],u=e[13],o=e[2],m=e[6],d=e[10],c=e[14],f=e[3],p=e[7],S=e[11],A=e[15],T=s[0],E=s[4],M=s[8],g=s[12],x=s[1],v=s[5],y=s[9],b=s[13],F=s[2],R=s[6],D=s[10],L=s[14],N=s[3],B=s[7],O=s[11],C=s[15];s[0]=i*T+_*E+o*M+f*g,s[1]=i*x+_*v+o*y+f*b,s[2]=i*F+_*R+o*D+f*L,s[3]=i*N+_*B+o*O+f*C,s[4]=a*T+n*E+m*M+p*g,s[5]=a*x+n*v+m*y+p*b,s[6]=a*F+n*R+m*D+p*L,s[7]=a*N+n*B+m*O+p*C,s[8]=r*T+h*E+d*M+S*g,s[9]=r*x+h*v+d*y+S*b,s[10]=r*F+h*R+d*D+S*L,s[11]=r*N+h*B+d*O+S*C,s[12]=l*T+u*E+c*M+A*g,s[13]=l*x+u*v+c*y+A*b,s[14]=l*F+u*R+c*D+A*L,s[15]=l*N+u*B+c*O+A*C}prepend3x3(t){let e=t.getLocalFS32(),s=this.m_localFS32,i=e[0],a=e[4],r=e[8],l=e[1],_=e[5],n=e[9],h=e[2],u=e[6],o=e[10],m=s[0],d=s[4],c=s[8],f=s[1],p=s[5],S=s[9],A=s[2],T=s[6],E=s[10];s[0]=i*m+l*d+h*c,s[1]=i*f+l*p+h*S,s[2]=i*A+l*T+h*E,s[4]=a*m+_*d+u*c,s[5]=a*f+_*p+u*S,s[6]=a*A+_*T+u*E,s[8]=r*m+n*d+o*c,s[9]=r*f+n*p+o*S,s[10]=r*A+n*T+o*E}prependRotationPivot(t,e,s){_.s_tMat4.identity(),_.s_tMat4.getAxisRotation(e.x,e.y,e.z,t),_.s_tMat4.appendTranslationXYZ(s.x,s.y,s.z),this.prepend(_.s_tMat4)}prependRotation(t,e){_.s_tMat4.identity(),_.s_tMat4.getAxisRotation(e.x,e.y,e.z,t),this.prepend(_.s_tMat4)}prependRotationX(t){_.s_tMat4.rotationX(t),this.prepend3x3(_.s_tMat4)}prependRotationY(t){_.s_tMat4.rotationY(t),this.prepend3x3(_.s_tMat4)}prependRotationZ(t){_.s_tMat4.rotationZ(t),this.prepend3x3(_.s_tMat4)}prependRotationEulerAngle(t,e,s){_.s_tMat4.rotationY(e),this.prepend3x3(_.s_tMat4),_.s_tMat4.rotationX(t),this.prepend3x3(_.s_tMat4),_.s_tMat4.rotationZ(s),this.prepend3x3(_.s_tMat4)}prependScale(t,e,s){let i=this.m_localFS32;i[0]*=t,i[1]*=e,i[2]*=s,i[4]*=t,i[5]*=e,i[6]*=s,i[8]*=t,i[9]*=e,i[10]*=s,i[12]*=t,i[13]*=e,i[14]*=s}prependScaleXY(t,e){this.m_localFS32[0]*=t,this.m_localFS32[1]*=e,this.m_localFS32[4]*=t,this.m_localFS32[5]*=e,this.m_localFS32[8]*=t,this.m_localFS32[9]*=e,this.m_localFS32[12]*=t,this.m_localFS32[13]*=e}prependTranslationXYZ(t,e,s){_.s_tMat4.identity(),this.prepend(_.s_tMat4)}prependTranslation(t){_.s_tMat4.identity(),this.prepend(_.s_tMat4)}recompose(t,e){if(t.length<3||0==t[2].x||0==t[2].y||0==t[2].z)return!1;this.identity();let s=_.s_tMat4.getFS32();s[0]=s[1]=s[2]=t[2].x,s[4]=s[5]=s[6]=t[2].y,s[8]=s[9]=s[10]=t[2].z;let i=this.m_localFS32;switch(e){case l.default.EULER_ANGLES:{let e=Math.cos(t[1].x),a=Math.cos(t[1].y),r=Math.cos(t[1].z),l=Math.sin(t[1].x),_=Math.sin(t[1].y),n=Math.sin(t[1].z);i[0]=a*r*s[0],i[1]=a*n*s[1],i[2]=-_*s[2],i[3]=0,i[4]=(l*_*r-e*n)*s[4],i[5]=(l*_*n+e*r)*s[5],i[6]=l*a*s[6],i[7]=0,i[8]=(e*_*r+l*n)*s[8],i[9]=(e*_*n-l*r)*s[9],i[10]=e*a*s[10],i[11]=0,i[12]=t[0].x,i[13]=t[0].y,i[14]=t[0].z,i[15]=1}break;default:{let a=t[1].x,r=t[1].y,_=t[1].z,n=t[1].w;if(e==l.default.AXIS_ANGLE){let t=.5*n;a*=Math.sin(t),r*=Math.sin(t),_*=Math.sin(t),n=Math.cos(t)}i[0]=(1-2*r*r-2*_*_)*s[0],i[1]=(2*a*r+2*n*_)*s[1],i[2]=(2*a*_-2*n*r)*s[2],i[3]=0,i[4]=(2*a*r-2*n*_)*s[4],i[5]=(1-2*a*a-2*_*_)*s[5],i[6]=(2*r*_+2*n*a)*s[6],i[7]=0,i[8]=(2*a*_+2*n*r)*s[8],i[9]=(2*r*_-2*n*a)*s[9],i[10]=(1-2*a*a-2*r*r)*s[10],i[11]=0,i[12]=t[0].x,i[13]=t[0].y,i[14]=t[0].z,i[15]=1}break}return 0==t[2].x&&(this.m_localFS32[0]=0),0==t[2].y&&(this.m_localFS32[5]=0),0==t[2].z&&(this.m_localFS32[10]=0),s=null,!0}deltaTransformVector(t){let e=t.x,s=t.y,i=t.z;return new r.default(e*this.m_localFS32[0]+s*this.m_localFS32[4]+i*this.m_localFS32[8],e*this.m_localFS32[1]+s*this.m_localFS32[5]+i*this.m_localFS32[9],e*this.m_localFS32[2]+s*this.m_localFS32[6]+i*this.m_localFS32[10],0)}deltaTransformVectorSelf(t){let e=this.m_localFS32,s=t.x,i=t.y,a=t.z;t.x=s*e[0]+i*e[4]+a*e[8],t.y=s*e[1]+i*e[5]+a*e[9],t.z=s*e[2]+i*e[6]+a*e[10]}deltaTransformOutVector(t,e){let s=this.m_localFS32;e.x=t.x*s[0]+t.y*s[4]+t.z*s[8],e.y=t.x*s[1]+t.y*s[5]+t.z*s[9],e.z=t.x*s[2]+t.y*s[6]+t.z*s[10]}transformVector(t){let e=this.m_localFS32,s=t.x,i=t.y,a=t.z;return new r.default(s*e[0]+i*e[4]+a*e[8]+e[12],s*e[1]+i*e[5]+a*e[9]+e[13],s*e[2]+i*e[6]+a*e[10]+e[14],s*e[3]+i*e[7]+a*e[11]+e[15])}transformOutVector(t,e){let s=t.x,i=t.y,a=t.z,r=this.m_localFS32;e.setTo(s*r[0]+i*r[4]+a*r[8]+r[12],s*r[1]+i*r[5]+a*r[9]+r[13],s*r[2]+i*r[6]+a*r[10]+r[14],s*r[3]+i*r[7]+a*r[11]+r[15])}transformOutVector3(t,e){let s=this.m_localFS32;e.x=t.x*s[0]+t.y*s[4]+t.z*s[8]+s[12],e.y=t.x*s[1]+t.y*s[5]+t.z*s[9]+s[13],e.z=t.x*s[2]+t.y*s[6]+t.z*s[10]+s[14]}transformVector3Self(t){let e=t.x,s=t.y,i=t.z,a=this.m_localFS32;t.x=e*a[0]+s*a[4]+i*a[8]+a[12],t.y=e*a[1]+s*a[5]+i*a[9]+a[13],t.z=e*a[2]+s*a[6]+i*a[10]+a[14]}transformVectorSelf(t){let e=t.x,s=t.y,i=t.z,a=this.m_localFS32;t.setTo(e*a[0]+s*a[4]+i*a[8]+a[12],e*a[1]+s*a[5]+i*a[9]+a[13],e*a[2]+s*a[6]+i*a[10]+a[14],e*a[3]+s*a[7]+i*a[11]+a[15])}transformVectors(t,e,s){let i,a,r,l=0,_=this.m_localFS32;e-=3;while(l<=e)i=t[l],a=t[l+1],r=t[l+2],s[l]=i*_[0]+a*_[4]+r*_[8]+_[12],s[l+1]=i*_[1]+a*_[5]+r*_[9]+_[13],s[l+2]=i*_[2]+a*_[6]+r*_[10]+_[14],l+=3}transformVectorsSelf(t,e){let s,i,a,r=0,l=this.m_localFS32;e-=3;while(r<=e)s=t[r],i=t[r+1],a=t[r+2],t[r]=s*l[0]+i*l[4]+a*l[8]+l[12],t[r+1]=s*l[1]+i*l[5]+a*l[9]+l[13],t[r+2]=s*l[2]+i*l[6]+a*l[10]+l[14],r+=3}transformVectorsRangeSelf(t,e,s){let i,a,r,l=e,_=this.m_localFS32;s-=3;while(l<=s)i=t[l],a=t[l+1],r=t[l+2],t[l]=i*_[0]+a*_[4]+r*_[8]+_[12],t[l+1]=i*_[1]+a*_[5]+r*_[9]+_[13],t[l+2]=i*_[2]+a*_[6]+r*_[10]+_[14],l+=3}transpose(){_.s_tMat4.copyFrom(this);let t=_.s_tMat4.getFS32(),e=this.m_localFS32;e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11]}interpolateTo(t,e){let s=t.getFS32(),i=t.getFSIndex(),a=0,r=this.m_index;while(a<16)this.m_fs32[r]+=(s[i+a]-this.m_fs32[r])*e,++r,++a}getAxisRotation(t,e,s,i){i=-i;let a=this.m_localFS32,r=Math.sin(i),l=Math.cos(i),_=1-l;a[0]=l+t*t*_,a[5]=l+e*e*_,a[10]=l+s*s*_;let n=t*e*_,h=s*r;a[4]=n+h,a[1]=n-h,n=t*s*_,h=e*r,a[8]=n-h,a[2]=n+h,n=e*s*_,h=t*r,a[9]=n+h,a[6]=n-h}rotationX(t){let e=Math.sin(t),s=Math.cos(t);this.m_localFS32[0]=1,this.m_localFS32[1]=0,this.m_localFS32[2]=0,this.m_localFS32[4]=0,this.m_localFS32[5]=s,this.m_localFS32[6]=e,this.m_localFS32[8]=0,this.m_localFS32[9]=-e,this.m_localFS32[10]=s}rotationY(t){let e=Math.sin(t),s=Math.cos(t);this.m_localFS32[0]=s,this.m_localFS32[1]=0,this.m_localFS32[2]=-e,this.m_localFS32[4]=0,this.m_localFS32[5]=1,this.m_localFS32[6]=0,this.m_localFS32[8]=e,this.m_localFS32[9]=0,this.m_localFS32[10]=s}rotationZ(t){let e=Math.sin(t),s=Math.cos(t);this.m_localFS32[0]=s,this.m_localFS32[1]=e,this.m_localFS32[2]=0,this.m_localFS32[4]=-e,this.m_localFS32[5]=s,this.m_localFS32[6]=0,this.m_localFS32[8]=0,this.m_localFS32[9]=0,this.m_localFS32[10]=1}toString(){let t="\n"+this.m_localFS32[0]+","+this.m_localFS32[1]+","+this.m_localFS32[2]+","+this.m_localFS32[3]+"\n";return t+=this.m_localFS32[4]+","+this.m_localFS32[5]+","+this.m_localFS32[6]+","+this.m_localFS32[7]+"\n",t+=this.m_localFS32[8]+","+this.m_localFS32[9]+","+this.m_localFS32[10]+","+this.m_localFS32[11]+"\n",t+=this.m_localFS32[12]+","+this.m_localFS32[13]+","+this.m_localFS32[14]+","+this.m_localFS32[15]+"\n",t}transformPerspV4Self(t){t.w=t.z,t.x*=this.m_localFS32[0],t.y*=this.m_localFS32[5],t.z*=this.m_localFS32[10],t.z+=this.m_localFS32[14],t.w*=this.m_localFS32[11],t.w+=this.m_localFS32[15]}perspectiveRH(t,e,s,i){let a=Math.tan(.5*t);this.identity(),this.m_localFS32[0]=1/(e*a),this.m_localFS32[5]=1/a,this.m_localFS32[10]=-(i+s)/(i-s),this.m_localFS32[11]=-1,this.m_localFS32[14]=-2*i*s/(i-s)}perspectiveRH2(t,e,s,i,a){let r=e/Math.tan(.5*t),l=r/e,_=r/s,n=-a/(a-i),h=-i*n;this.identity(),this.m_localFS32[0]=l,this.m_localFS32[5]=_,this.m_localFS32[10]=n,this.m_localFS32[11]=-1,this.m_localFS32[14]=h}orthoRH(t,e,s,i,a,r){this.identity(),this.m_localFS32[0]=2/(i-s),this.m_localFS32[5]=2/(e-t),this.m_localFS32[10]=-2/(r-a),this.m_localFS32[12]=-(i+s)/(i-s),this.m_localFS32[13]=-(e+t)/(e-t),this.m_localFS32[14]=-(r+a)/(r-a),this.m_localFS32[15]=1}perspectiveLH(t,e,s,i){let a=Math.tan(.5*t);this.identity(),this.m_localFS32[0]=1/(e*a),this.m_localFS32[5]=1/a,this.m_localFS32[10]=(i+s)/(i-s),this.m_localFS32[11]=1,this.m_localFS32[14]=2*i*s/(i-s)}orthoLH(t,e,s,i,a,r){this.identity(),this.m_localFS32[0]=2/(i-s),this.m_localFS32[5]=2/(e-t),this.m_localFS32[10]=2/(r-a),this.m_localFS32[12]=-(i+s)/(i-s),this.m_localFS32[13]=-(e+t)/(e-t),this.m_localFS32[14]=-(r+a)/(r-a),this.m_localFS32[15]=1}lookAtRH(t,e,s){this.identity();let i=e.subtract(t);i.normalize();let a=i.crossProduct(s);a.normalize();let r=a.crossProduct(i);a.w=-a.dot(t),r.w=-r.dot(t),i.w=i.dot(t),i.negate(),this.copyRowFrom(0,a),this.copyRowFrom(1,r),this.copyRowFrom(2,i)}lookAtLH(t,e,s){this.identity();let i=e.subtract(t);i.normalize();let a=i.crossProduct(s);a.normalize();let r=a.crossProduct(i);a.w=-a.dot(t),r.w=-r.dot(t),i.w=-i.dot(t),this.copyRowFrom(0,a),this.copyRowFrom(1,r),this.copyRowFrom(2,i)}destroy(){this.m_localFS32=null,this.m_fs32=null,this.m_index=-1}}_.s_InitData=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),_.s_uid=0,_.s_isolatedUid=327679,_.s_tMat4=new _,e.default=_},"1eb2":function(t,e,s){"use strict";if("undefined"!==typeof window){var i=window.document.currentScript,a=s("8875");i=a(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:a});var r=i&&i.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);r&&(s.p=r[1])}},2139:function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s("18c7"));class r{static GetMatTotal(){return r.s_mtotal}static GetFS32Arr(){return r.s_mfs32Arr}static SetFS32Arr(t){r.s_mfs32Arr=t;let e=r.s_mtotal,s=r.s_matList;for(let i=0;i<e;++i)s[i].setF32Arr(t)}static GetFreeId(){return r.m_freeIdList.length>0?r.m_freeIdList.pop():-1}static Allocate(t){if(t<1024&&(t=1024),r.s_mtotal<1){r.s_mtotal=t,r.s_mfs32Arr=new Float32Array(16*t);let e=0,s=new a.default(r.s_mfs32Arr,16*e),i=s.getUid();for(r.s_baseUid=i,r.s_maxUid=i+t;e<i;++e)r.s_matList.push(null),r.s_matFlagList.push(r.S_FLAG_FREE);for(r.s_matList.push(s),r.s_matFlagList.push(r.S_FLAG_FREE),r.m_freeIdList.push(s.getUid()),e=1;e<t;++e)s=new a.default(r.s_mfs32Arr,16*e),r.s_matList.push(s),r.s_matFlagList.push(r.S_FLAG_FREE),r.m_freeIdList.push(s.getUid())}}static GetMatrix(){let t=null,e=r.GetFreeId()-r.s_baseUid;return e>=0?(t=r.s_matList[e],t.identity(),r.s_matFlagList[e]=r.S_FLAG_BUSY):t=new a.default,t}static RetrieveMatrix(t){if(null!=t){let e=t.getUid();e>=r.s_baseUid&&e<r.s_maxUid&&r.s_matFlagList[e-r.s_baseUid]==r.S_FLAG_BUSY&&(r.m_freeIdList.push(e),r.s_matFlagList[e-r.s_baseUid]=r.S_FLAG_FREE)}}}r.S_FLAG_BUSY=1,r.S_FLAG_FREE=0,r.s_matList=[],r.s_matFlagList=[],r.m_freeIdList=[],r.s_mfs32Arr=null,r.s_baseUid=0,r.s_maxUid=0,r.s_mtotal=0,e.default=r},"250c":function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s("3b73")),r=i(s("81ce")),l=i(s("f208"));class _{constructor(){this.m_versionDeclare="#version 300 es\n",this.m_preciousCode="\nprecision mediump float;\n",this.m_mainBeginCode="\n\nvoid main(){\n",this.m_mainEndCode="\n}\n",this.m_fragExt=[],this.m_vertExt=[],this.m_defineNames=[],this.m_defineValues=[],this.m_vertLayoutNames=[],this.m_vertLayoutTypes=[],this.m_fragOutputNames=[],this.m_fragOutputTypes=[],this.m_vertUniformNames=[],this.m_vertUniformTypes=[],this.m_fragUniformNames=[],this.m_fragUniformTypes=[],this.m_varyingNames=[],this.m_varyingTypes=[],this.m_fragFunctionBlocks=[],this.m_vertFunctionBlocks=[],this.m_textureSampleTypes=[],this.m_texturePrecises=[],this.m_textureMacroNames=[],this.m_texturePrecise="",this.m_textureFlags=[],this.m_vertObjMat=!1,this.m_vertViewMat=!1,this.m_vertProjMat=!1,this.m_fragObjMat=!1,this.m_fragViewMat=!1,this.m_fragProjMat=!1,this.m_vertHeadCode="",this.m_vertMainCode="",this.m_fragHeadCode="",this.m_fragMainCode="",this.m_use2DMap=!1,this.m_preCompileInfo=null,this.normalMapEanbled=!1,this.mapLodEnabled=!1,this.derivatives=!1,this.vertMatrixInverseEnabled=!1,this.fragMatrixInverseEnabled=!1}reset(){this.m_vertObjMat=!1,this.m_vertViewMat=!1,this.m_vertProjMat=!1,this.m_fragObjMat=!1,this.m_fragViewMat=!1,this.m_fragProjMat=!1,this.m_use2DMap=!1,this.m_vertHeadCode="",this.m_vertMainCode="",this.m_fragHeadCode="",this.m_fragMainCode="",this.m_vertExt=[],this.m_fragExt=[],this.m_vertLayoutNames=[],this.m_vertLayoutTypes=[],this.m_fragOutputNames=[],this.m_fragOutputTypes=[],this.m_varyingNames=[],this.m_varyingTypes=[],this.m_vertUniformNames=[],this.m_vertUniformTypes=[],this.m_fragUniformNames=[],this.m_fragUniformTypes=[],this.m_fragFunctionBlocks=[],this.m_vertFunctionBlocks=[],this.m_defineNames=[],this.m_defineValues=[],this.m_textureSampleTypes=[],this.m_texturePrecises=[],this.m_textureMacroNames=[],this.m_textureFlags=[],this.m_texturePrecise="",this.normalMapEanbled=!1,this.mapLodEnabled=!1,this.vertMatrixInverseEnabled=!1,this.fragMatrixInverseEnabled=!1,this.m_preCompileInfo=null}getPreCompileInfo(){let t=this.m_preCompileInfo;return this.m_preCompileInfo=null,t}useHighPrecious(){this.m_preciousCode="precision highp float;"}useMediumPrecious(){this.m_preciousCode="precision mediump float;"}useLowPrecious(){this.m_preciousCode="precision lowp float;"}addDefine(t,e="1"){this.m_defineNames.push(t),this.m_defineValues.push(e)}addVertLayout(t,e){this.m_vertLayoutNames.push(e),this.m_vertLayoutTypes.push(t)}addFragOutput(t,e){this.m_fragOutputNames.push(e),this.m_fragOutputTypes.push(t)}addVarying(t,e){this.m_varyingNames.push(e),this.m_varyingTypes.push(t)}addVertUniform(t,e,s=0){this.m_fragUniformNames.includes(e)||(s>0?this.m_vertUniformNames.push(e+"["+s+"]"):this.m_vertUniformNames.push(e),this.m_vertUniformTypes.push(t))}addVertUniformParam(t){this.addVertUniform(t.type,t.name,t.arrayLength)}addFragUniform(t,e,s=0){this.m_fragUniformNames.includes(e)||(s>0?this.m_fragUniformNames.push(e+"["+s+"]"):this.m_fragUniformNames.push(e),this.m_fragUniformTypes.push(t))}addFragUniformParam(t){this.addFragUniform(t.type,t.name,t.arrayLength)}addFragFunction(t){this.m_fragFunctionBlocks.push(t)}addVertFunction(t){this.m_vertFunctionBlocks.push(t)}useTexturePreciseHighp(){this.m_texturePrecise="highp"}addTextureSample2D(t="",e=!0,s=!0,i=!1){this.m_textureSampleTypes.push("sampler2D"),this.m_textureMacroNames.push(t),this.m_texturePrecises.push(this.m_texturePrecise);let a=0;s&&(a|=2),i&&(a|=4),this.m_textureFlags.push(a),this.m_texturePrecise="",e&&(this.m_use2DMap=!0)}addTextureSampleCube(t="",e=!0,s=!1){this.m_textureSampleTypes.push("samplerCube"),this.m_textureMacroNames.push(t),this.m_texturePrecises.push(this.m_texturePrecise);let i=0;e&&(i|=2),s&&(i|=4),this.m_textureFlags.push(i),this.m_texturePrecise=""}addTextureSample3D(t="",e=!0,s=!1){this.m_textureSampleTypes.push("sampler3D"),this.m_textureMacroNames.push(t),this.m_texturePrecises.push(this.m_texturePrecise);let i=0;e&&(i|=2),s&&(i|=4),this.m_textureFlags.push(i),this.m_texturePrecise=""}isHaveTexture(){return this.m_textureSampleTypes.length>0}isHaveTexture2D(){return this.m_use2DMap}useVertSpaceMats(t=!0,e=!0,s=!0){this.m_vertObjMat=t,this.m_vertViewMat=e,this.m_vertProjMat=s}useFragSpaceMats(t=!0,e=!0,s=!0){this.m_fragObjMat=t,this.m_fragViewMat=e,this.m_fragProjMat=s}addVertExtend(t){this.m_vertExt.push(t)}addFragExtend(t){this.m_fragExt.push(t)}addVertHeadCode(t){this.m_vertHeadCode+=t}addVertMainCode(t){this.m_vertMainCode+=t}addFragHeadCode(t){this.m_fragHeadCode+=t}addFragMainCode(t){this.m_fragMainCode+=t}buildFragCode(){let t=0,e=0,s="";for(a.default.FRAG_SHADER_PRECISION_GLOBAL_HIGHP_ENABLED&&this.useHighPrecious(),a.default.IsWebGL2()&&(s+=this.m_versionDeclare),this.m_preCompileInfo=new l.default,this.m_preCompileInfo.info="\n//##COMPILE_INFO_BEGIN",this.m_preCompileInfo.info+="\n//##COMPILE_INFO_END",t=0,e=this.m_fragExt.length;t<e;t++)s+="\n"+this.m_fragExt[t];for(a.default.IsWebGL1()&&(this.m_fragOutputNames.length>1&&(s+="\n#extension GL_EXT_draw_buffers: require"),(this.normalMapEanbled||this.derivatives)&&(s+="\n#extension GL_OES_standard_derivatives : enable"),this.mapLodEnabled&&(s+="\n#extension GL_EXT_shader_texture_lod : enable")),a.default.IsWebGL2()?(s+="\n#define VOX_IN in",this.mapLodEnabled&&(s+="\n#define VOX_TextureCubeLod textureLod",s+="\n#define VOX_Texture2DLod textureLod"),s+="\n#define VOX_Texture2D texture",s+="\n#define VOX_TextureCube texture"):(s+="\n#define VOX_IN varying",this.mapLodEnabled&&(s+="\n#define VOX_TextureCubeLod textureCubeLodEXT",s+="\n#define VOX_Texture2DLod texture2DLodEXT"),s+="\n#define VOX_TextureCube textureCube",s+="\n#define VOX_Texture2D texture2D"),a.default.IsMobileWeb()?s+="\nprecision highp float;":s+="\n"+this.m_preciousCode,e=this.m_defineNames.length,t=0;t<e;t++)""!=this.m_defineValues[t]?s+="\n#define "+this.m_defineNames[t]+" "+this.m_defineValues[t]:s+="\n#define "+this.m_defineNames[t]+" 1";for(t=0,e=this.m_textureMacroNames.length;t<e;t++)""!=this.m_textureMacroNames[t]&&0!=(2&this.m_textureFlags[t])&&(s+="\n#define "+this.m_textureMacroNames[t]+" u_sampler"+t);for(this.m_use2DMap&&(s+="\n#define VOX_USE_2D_MAP 1"),t=0,e=this.m_textureSampleTypes.length;t<e;t++)0!=(2&this.m_textureFlags[t])&&(""==this.m_texturePrecises[t]?s+="\nuniform "+this.m_textureSampleTypes[t]+" u_sampler"+t+";":s+="\nuniform "+this.m_texturePrecises[t]+" "+this.m_textureSampleTypes[t]+" u_sampler"+t+";");for(t=0,e=this.m_fragUniformTypes.length;t<e;t++)s+="\nuniform "+this.m_fragUniformTypes[t]+" "+this.m_fragUniformNames[t]+";";if(this.m_fragObjMat&&(s+="\nuniform mat4 u_objMat;"),this.m_fragViewMat&&(s+="\nuniform mat4 u_viewMat;"),this.m_fragProjMat&&(s+="\nuniform mat4 u_projMat;"),e=this.m_varyingNames.length,a.default.IsWebGL2())for(t=0;t<e;t++)s+="\nin "+this.m_varyingTypes[t]+" "+this.m_varyingNames[t]+";";else for(t=0;t<e;t++)s+="\nvarying "+this.m_varyingTypes[t]+" "+this.m_varyingNames[t]+";";for(this.fragMatrixInverseEnabled&&a.default.IsWebGL1()&&(this.addVertFunction(r.default.__glslInverseMat3),this.addVertFunction(r.default.__glslInverseMat4)),s+=this.m_fragHeadCode,t=0,e=this.m_fragFunctionBlocks.length;t<e;t++)s+="\n"+this.m_fragFunctionBlocks[t];if(t=0,e=this.m_fragOutputNames.length,a.default.IsWebGL2())for(;t<e;t++)s+="\nlayout(location = "+t+") out "+this.m_fragOutputTypes[t]+" "+this.m_fragOutputNames[t]+";";else 1==e&&(s+="\n#define "+this.m_fragOutputNames[t]+" gl_FragColor");if(s+=this.m_fragMainCode,e=this.m_fragOutputNames.length,a.default.IsWebGL1()&&e>1)for(t=0;t<e;t++){let e=new RegExp(this.m_fragOutputNames[t],"g");s=s.replace(e,"gl_FragData["+t+"]")}return s}buildVertCode(){let t=0,e=0,s="";for(a.default.VERT_SHADER_PRECISION_GLOBAL_HIGHP_ENABLED&&this.useHighPrecious(),a.default.IsWebGL2()&&(s+=this.m_versionDeclare),t=0,e=this.m_vertExt.length;t<e;t++)s+="\n"+this.m_vertExt[t];for(a.default.IsWebGL2()?(s+="\n#define VOX_IN in",this.mapLodEnabled&&(s+="\n#define VOX_TextureCubeLod textureLod",s+="\n#define VOX_Texture2DLod textureLod"),s+="\n#define VOX_Texture2D texture",s+="\n#define VOX_TextureCube texture"):(s+="\n#define VOX_IN varying",this.mapLodEnabled&&(s+="\n#define VOX_TextureCubeLod textureCubeLodEXT",s+="\n#define VOX_Texture2DLod texture2DLodEXT"),s+="\n#define VOX_TextureCube textureCube",s+="\n#define VOX_Texture2D texture2D"),a.default.IsMobileWeb()?s+="\nprecision highp float;":s+="\n"+this.m_preciousCode,a.default.IsWebGL2()?s+="\n#define VOX_OUT out":s+="\n#define VOX_OUT varying",e=this.m_defineNames.length,t=0;t<e;t++)""!=this.m_defineValues[t]?s+="\n#define "+this.m_defineNames[t]+" "+this.m_defineValues[t]:s+="\n#define "+this.m_defineNames[t];for(t=0,e=this.m_textureMacroNames.length;t<e;t++)""!=this.m_textureMacroNames[t]&&0!=(4&this.m_textureFlags[t])&&(s+="\n#define "+this.m_textureMacroNames[t]+" u_sampler"+t);for(this.m_use2DMap&&(s+="\n#define VOX_USE_2D_MAP 1"),t=0,e=this.m_textureSampleTypes.length;t<e;t++)0!=(4&this.m_textureFlags[t])&&(""==this.m_texturePrecises[t]?s+="\nuniform "+this.m_textureSampleTypes[t]+" u_sampler"+t+";":s+="\nuniform "+this.m_texturePrecises[t]+" "+this.m_textureSampleTypes[t]+" u_sampler"+t+";");if(e=this.m_vertLayoutNames.length,a.default.IsWebGL2())for(t=0;t<e;t++)s+="\nlayout(location = "+t+") in "+this.m_vertLayoutTypes[t]+" "+this.m_vertLayoutNames[t]+";";else for(t=0;t<e;t++)s+="\nattribute "+this.m_vertLayoutTypes[t]+" "+this.m_vertLayoutNames[t]+";";for(e=this.m_vertUniformTypes.length,t=0;t<e;t++)s+="\nuniform "+this.m_vertUniformTypes[t]+" "+this.m_vertUniformNames[t]+";";if(this.m_vertObjMat&&(s+="\nuniform mat4 u_objMat;"),this.m_vertViewMat&&(s+="\nuniform mat4 u_viewMat;"),this.m_vertProjMat&&(s+="\nuniform mat4 u_projMat;"),e=this.m_varyingNames.length,a.default.IsWebGL2())for(t=0;t<e;t++)s+="\nout "+this.m_varyingTypes[t]+" "+this.m_varyingNames[t]+";";else for(t=0;t<e;t++)s+="\nvarying "+this.m_varyingTypes[t]+" "+this.m_varyingNames[t]+";";for(this.vertMatrixInverseEnabled&&a.default.IsWebGL1()&&(this.addVertFunction(r.default.__glslInverseMat3),this.addVertFunction(r.default.__glslInverseMat4)),s+=this.m_vertHeadCode,t=0,e=this.m_vertFunctionBlocks.length;t<e;t++)s+="\n"+this.m_vertFunctionBlocks[t];return s+=this.m_vertMainCode,s}}e.default=_},"29ef":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s("7c63"),a=s("e08e");class r{static Initialize(){if(r.s_initBoo){r.s_initBoo=!1;let t=r;t.Rstate=new i.RODrawState,i.RenderColorMask.Rstate=r.Rstate,i.RenderStateObject.Rstate=r.Rstate,t.COLOR_MASK_ALL_TRUE=i.RenderColorMask.Create("all_true",!0,!0,!0,!0),t.COLOR_MASK_ALL_FALSE=i.RenderColorMask.Create("all_false",!1,!1,!1,!1);let e=i.RenderStateObject,s=a.RenderBlendMode;s.NORMAL=e.CreateBlendMode("NORMAL",a.GLBlendMode.ONE,a.GLBlendMode.ZERO,a.GLBlendEquation.FUNC_ADD),s.OPAQUE=e.CreateBlendMode("OPAQUE",a.GLBlendMode.ONE,a.GLBlendMode.ZERO,a.GLBlendEquation.FUNC_ADD),s.TRANSPARENT=e.CreateBlendMode("TRANSPARENT",a.GLBlendMode.SRC_ALPHA,a.GLBlendMode.ONE_MINUS_SRC_ALPHA,a.GLBlendEquation.FUNC_ADD),s.ALPHA_ADD=e.CreateBlendMode("ALPHA_ADD",a.GLBlendMode.ONE,a.GLBlendMode.ONE_MINUS_SRC_ALPHA,a.GLBlendEquation.FUNC_ADD),s.ADD=e.CreateBlendMode("ADD",a.GLBlendMode.SRC_ALPHA,a.GLBlendMode.ONE,a.GLBlendEquation.FUNC_ADD),s.ADD_LINEAR=e.CreateBlendMode("ADD_LINEAR",a.GLBlendMode.ONE,a.GLBlendMode.ONE,a.GLBlendEquation.FUNC_ADD),s.INVERSE_ALPHA=e.CreateBlendMode("INVERSE_ALPHA",a.GLBlendMode.ONE,a.GLBlendMode.SRC_ALPHA,a.GLBlendEquation.FUNC_ADD),s.BLAZE=e.CreateBlendMode("BLAZE",a.GLBlendMode.SRC_COLOR,a.GLBlendMode.ONE,a.GLBlendEquation.FUNC_ADD),s.OVERLAY=e.CreateBlendMode("OVERLAY",a.GLBlendMode.DST_COLOR,a.GLBlendMode.DST_ALPHA,a.GLBlendEquation.FUNC_ADD),s.OVERLAY2=e.CreateBlendMode("OVERLAY2",a.GLBlendMode.DST_COLOR,a.GLBlendMode.SRC_ALPHA,a.GLBlendEquation.FUNC_ADD),t.NORMAL_STATE=e.Create("normal",a.CullFaceMode.BACK,a.RenderBlendMode.NORMAL,a.DepthTestMode.OPAQUE),t.BACK_CULLFACE_NORMAL_STATE=t.NORMAL_STATE,t.FRONT_CULLFACE_NORMAL_STATE=e.Create("front_normal",a.CullFaceMode.FRONT,a.RenderBlendMode.NORMAL,a.DepthTestMode.OPAQUE),t.NONE_CULLFACE_NORMAL_STATE=e.Create("none_normal",a.CullFaceMode.NONE,a.RenderBlendMode.NORMAL,a.DepthTestMode.OPAQUE),t.ALL_CULLFACE_NORMAL_STATE=e.Create("all_cull_normal",a.CullFaceMode.FRONT_AND_BACK,a.RenderBlendMode.NORMAL,a.DepthTestMode.OPAQUE),t.BACK_NORMAL_ALWAYS_STATE=e.Create("back_normal_always",a.CullFaceMode.BACK,a.RenderBlendMode.NORMAL,a.DepthTestMode.ALWAYS),t.BACK_TRANSPARENT_STATE=e.Create("back_transparent",a.CullFaceMode.BACK,a.RenderBlendMode.TRANSPARENT,a.DepthTestMode.TRANSPARENT_SORT),t.BACK_TRANSPARENT_ALWAYS_STATE=e.Create("back_transparent_always",a.CullFaceMode.BACK,a.RenderBlendMode.TRANSPARENT,a.DepthTestMode.ALWAYS),t.NONE_TRANSPARENT_STATE=e.Create("none_transparent",a.CullFaceMode.NONE,a.RenderBlendMode.TRANSPARENT,a.DepthTestMode.TRANSPARENT_SORT),t.NONE_TRANSPARENT_ALWAYS_STATE=e.Create("none_transparent_always",a.CullFaceMode.NONE,a.RenderBlendMode.TRANSPARENT,a.DepthTestMode.ALWAYS),t.FRONT_CULLFACE_GREATER_STATE=e.Create("front_greater",a.CullFaceMode.FRONT,a.RenderBlendMode.NORMAL,a.DepthTestMode.TRUE_GREATER),t.BACK_ADD_BLENDSORT_STATE=e.Create("back_add_blendSort",a.CullFaceMode.BACK,a.RenderBlendMode.ADD,a.DepthTestMode.TRANSPARENT_SORT),t.BACK_ADD_ALWAYS_STATE=e.Create("back_add_always",a.CullFaceMode.BACK,a.RenderBlendMode.ADD,a.DepthTestMode.ALWAYS),t.BACK_ALPHA_ADD_ALWAYS_STATE=e.Create("back_alpha_add_always",a.CullFaceMode.BACK,a.RenderBlendMode.ALPHA_ADD,a.DepthTestMode.ALWAYS),t.NONE_ADD_ALWAYS_STATE=e.Create("none_add_always",a.CullFaceMode.NONE,a.RenderBlendMode.ADD,a.DepthTestMode.ALWAYS),t.NONE_ADD_BLENDSORT_STATE=e.Create("none_add_blendSort",a.CullFaceMode.NONE,a.RenderBlendMode.ADD,a.DepthTestMode.TRANSPARENT_SORT),t.NONE_ALPHA_ADD_ALWAYS_STATE=e.Create("none_alpha_add_always",a.CullFaceMode.NONE,a.RenderBlendMode.ALPHA_ADD,a.DepthTestMode.ALWAYS),t.FRONT_ADD_ALWAYS_STATE=e.Create("front_add_always",a.CullFaceMode.FRONT,a.RenderBlendMode.ADD,a.DepthTestMode.ALWAYS),t.FRONT_TRANSPARENT_STATE=e.Create("front_transparent",a.CullFaceMode.FRONT,a.RenderBlendMode.TRANSPARENT,a.DepthTestMode.TRANSPARENT_SORT),t.FRONT_TRANSPARENT_ALWAYS_STATE=e.Create("front_transparent_always",a.CullFaceMode.FRONT,a.RenderBlendMode.TRANSPARENT,a.DepthTestMode.ALWAYS),t.NONE_CULLFACE_NORMAL_ALWAYS_STATE=e.Create("none_normal_always",a.CullFaceMode.NONE,a.RenderBlendMode.NORMAL,a.DepthTestMode.ALWAYS),t.BACK_ALPHA_ADD_BLENDSORT_STATE=e.Create("back_alpha_add_blendSort",a.CullFaceMode.BACK,a.RenderBlendMode.ALPHA_ADD,a.DepthTestMode.TRANSPARENT_SORT)}}static CreateBlendMode(t,e,s,a=0){return i.RenderStateObject.CreateBlendMode(t,e,s,a)}static CreateBlendModeSeparate(t,e,s,a=0,r=0,l=0){return i.RenderStateObject.CreateBlendModeSeparate(t,e,s,a,r,l)}static CreateRenderState(t,e,s,a){return i.RenderStateObject.Create(t,e,s,a)}static CreateRenderColorMask(t,e,s,a,r){return i.RenderColorMask.Create(t,e,s,a,r)}static GetRenderStateByName(t){return i.RenderStateObject.GetRenderStateByName(t)}static GetRenderColorMaskByName(t){return i.RenderColorMask.GetColorMaskByName(t)}static UnlockBlendMode(){i.RenderStateObject.UnlockBlendMode()}static LockBlendMode(t){i.RenderStateObject.LockBlendMode(t)}static UnlockDepthTestMode(){i.RenderStateObject.UnlockDepthTestMode()}static LockDepthTestMode(t){i.RenderStateObject.LockDepthTestMode(t)}static ResetState(){i.RenderColorMask.Reset(),i.RenderStateObject.Reset(),r.Rstate.reset()}static Reset(t){i.RenderColorMask.Reset(),i.RenderStateObject.Reset(),r.Rstate.setRenderContext(t),r.Rstate.reset()}static ResetInfo(){r.DrawCallTimes=0,r.DrawTrisNumber=0,r.POVNumber=0}static SetDepthTestEnable(t){r.Rstate.setDepthTestEnable(t)}static SetBlendEnable(t){r.Rstate.setBlendEnable(t)}static SetStencilFunc(t,e,s){r.Rstate.setStencilFunc(t,e,s)}static SetStencilMask(t){r.Rstate.setStencilMask(t)}static SetStencilOp(t,e,s){r.Rstate.setStencilOp(t,e,s)}}r.s_initBoo=!0,r.Rstate=null,r.DrawCallTimes=0,r.DrawTrisNumber=0,r.POVNumber=0,r.COLOR_MASK_ALL_TRUE=0,r.COLOR_MASK_ALL_FALSE=1,r.NORMAL_STATE=0,r.BACK_CULLFACE_NORMAL_STATE=0,r.FRONT_CULLFACE_NORMAL_STATE=1,r.NONE_CULLFACE_NORMAL_STATE=2,r.ALL_CULLFACE_NORMAL_STATE=3,r.BACK_NORMAL_ALWAYS_STATE=4,r.BACK_TRANSPARENT_STATE=5,r.BACK_TRANSPARENT_ALWAYS_STATE=6,r.NONE_TRANSPARENT_STATE=7,r.NONE_TRANSPARENT_ALWAYS_STATE=8,r.FRONT_CULLFACE_GREATER_STATE=9,r.BACK_ADD_BLENDSORT_STATE=10,r.BACK_ADD_ALWAYS_STATE=11,r.BACK_ALPHA_ADD_ALWAYS_STATE=12,r.NONE_ADD_ALWAYS_STATE=13,r.NONE_ADD_BLENDSORT_STATE=14,r.NONE_ALPHA_ADD_ALWAYS_STATE=15,r.FRONT_ADD_ALWAYS_STATE=16,r.FRONT_TRANSPARENT_STATE=17,r.FRONT_TRANSPARENT_ALWAYS_STATE=18,r.NONE_CULLFACE_NORMAL_ALWAYS_STATE=19,r.BACK_ALPHA_ADD_BLENDSORT_STATE=20,e.default=r},"2e8a":function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s("8a0a")),r=i(s("644c"));class l{constructor(){this.type=-1,this.attriType=-1,this.typeSize=3,this.typeName="",this.name="",this.layoutEnabled=!0}parseCode(t){const e=";",s=" ";t=t.replace(/^\s*|\s*$/g,"");let i=t.indexOf(e);i>0&&(t=t.slice(0,i));let l=t.split(s);this.typeName=l[l.length-2],this.name=l[l.length-1],this.type=r.default.GetTypeByTypeNS(this.typeName),this.typeSize=parseInt(this.typeName.slice(this.typeName.length-1)),this.attriType=a.default.GetVBufAttributeTypeByNS(this.name)}}e.default=l},"32cc":function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s("b3bd")),r=i(s("faa5")),l=i(s("0fc4"));class _ extends r.default{constructor(){super(),this.m_uniqueName="",this.dynColorEnabled=!1}initialize(t){this.m_uniqueName="Line3DShd",this.dynColorEnabled&&(this.m_uniqueName+="_dynColor")}getFragShaderCode(){let t="precision mediump float;\nvarying vec3 v_vtxColor;\nvoid main()\n{\ngl_FragColor = vec4(v_vtxColor, 1.0);\n}\n";return t}getVtxShaderCode(){let t="precision mediump float;\nattribute vec3 a_vs;\n";return this.dynColorEnabled?t+="uniform vec4 u_color;\n":t+="attribute vec3 a_cvs;\n",t+="\nuniform mat4 u_objMat;\nuniform mat4 u_viewMat;\nuniform mat4 u_projMat;\nvarying vec3 v_vtxColor;\nvoid main()\n{\nvec4 pv = u_projMat * u_viewMat * u_objMat * vec4(a_vs,1.0);\n// pixels move offset, and no perspective error.\n//  pv.xy = (pv.xy/pv.w - vec2(0.5)) * pv.w;\ngl_Position = pv;\n",this.dynColorEnabled?t+="v_vtxColor = u_color.xyz;\n":t+="v_vtxColor = a_cvs;\n",t+="}\n",t}getUniqueShaderName(){return this.m_uniqueName}toString(){return"[Line3DShaderBuffer()]"}static GetInstance(){return null!=_.s_instance||(_.s_instance=new _),_.s_instance}}_.s_instance=null;class n extends l.default{constructor(t=!1){super(),this.m_dynColorEnabled=!1,this.m_colorArray=null,t&&(this.m_colorArray=new Float32Array([1,1,1,1])),this.m_dynColorEnabled=t}getCodeBuf(){return _.GetInstance().dynColorEnabled=this.m_dynColorEnabled,_.GetInstance()}setRGB3f(t,e,s){null!=this.m_colorArray&&(this.m_colorArray[0]=t,this.m_colorArray[1]=e,this.m_colorArray[2]=s)}createSelfUniformData(){if(this.m_dynColorEnabled){let t=new a.default;return t.uniformNameList=["u_color"],t.dataList=[this.m_colorArray],t}return null}}e.default=n},"35fa":function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s("8e17"));class r{static ClacTriNormal(t,e,s,i){a.default.Subtract(e,t,r.s_temp_vb),a.default.Subtract(s,e,r.s_temp_vc),a.default.Cross(r.s_temp_vb,r.s_temp_vc,i),i.normalize()}static ClacTriNormalByVS(t,e,s){let i=9*e;r.s_temp_va.setTo(t[i],t[i+1],t[i+2]),s.setTo(t[i+3],t[i+4],t[i+5]),r.s_temp_vc.setTo(t[i+6],t[i+7],t[i+8]),s.subtractBy(r.s_temp_va),r.s_temp_vc.subtractBy(r.s_temp_va),s.crossBy(r.s_temp_vc),s.normalize()}static ClacTriNormalByIVS(t,e,s,i){let a=3*e,l=3*s[a];r.s_temp_va.setTo(t[l],t[l+1],t[l+2]),l=3*s[a+1],i.setTo(t[l],t[l+1],t[l+2]),l=3*s[a+2],r.s_temp_vc.setTo(t[l],t[l+1],t[l+2]),i.subtractBy(r.s_temp_va),r.s_temp_vc.subtractBy(r.s_temp_va),i.crossBy(r.s_temp_vc),i.normalize()}static ClacTrisNormal(t,e,s,i,l){let _=new a.default,n=0,h=0,u=0;for(u=0;u<e;++u)l[u]=0;for(u=0;u<s;++u)r.ClacTriNormalByIVS(t,u,i,_),n=3*u,h=3*i[n],l[h]+=_.x,l[h+1]+=_.y,l[h+2]+=_.z,h=3*i[n+1],l[h]+=_.x,l[h+1]+=_.y,l[h+2]+=_.z,h=3*i[n+2],l[h]+=_.x,l[h+1]+=_.y,l[h+2]+=_.z;for(u=0;u<e;u+=3)r.s_temp_va.setTo(l[u],l[u+1],l[u+2]),r.s_temp_va.normalize(),l[u]=r.s_temp_va.x,l[u+1]=r.s_temp_va.y,l[u+2]=r.s_temp_va.z}static ClacTriTangent(t,e,s,i,a,l,_){let n=3*i,h=3*a[n];r.s_temp_va.setTo(s[h],s[h+1],s[h+2]),r.s_temp_va.setTo(t[h],t[h+1],t[h+2]),h=3*a[n+1],r.s_temp_vb.setTo(t[h],t[h+1],t[h+2]),h=3*a[n+2],r.s_temp_vc.setTo(t[h],t[h+1],t[h+2]),h=2*a[n],r.s_temp_vd.setTo(e[h],e[h+1],0),h=2*a[n+1],r.s_temp_ve.setTo(e[h],e[h+1],0),h=2*a[n+2],r.s_temp_vf.setTo(e[h],e[h+1],0),r.s_temp_vb.subtractBy(r.s_temp_va),r.s_temp_vc.subtractBy(r.s_temp_va),r.s_temp_ve.subtractBy(r.s_temp_vd),r.s_temp_vf.subtractBy(r.s_temp_vd);let u=1/(r.s_temp_ve.x*r.s_temp_vf.y-r.s_temp_ve.y*r.s_temp_vf.x);l.copyFrom(r.s_temp_vb),l.scaleBy(r.s_temp_vf.y),r.s_temp_va.copyFrom(r.s_temp_vc),r.s_temp_va.scaleBy(r.s_temp_ve.y),l.subtractBy(r.s_temp_va),l.scaleBy(u),l.normalize(),_.copyFrom(r.s_temp_vc),_.scaleBy(r.s_temp_ve.x),r.s_temp_va.copyFrom(r.s_temp_vb),r.s_temp_va.scaleBy(r.s_temp_vf.x),_.subtractBy(r.s_temp_va),_.scaleBy(u),_.normalize()}static ClacTrisTangent(t,e,s,i,l,_,n,h){let u=new a.default,o=new a.default,m=0,d=0,c=0;for(c=0;c<e;++c)n[c]=0,h[c]=0;for(c=0;c<l;++c)r.ClacTriTangent(t,s,i,c,_,u,o),m=3*c,d=3*_[m],n[d]=u.x,n[d+1]=u.y,n[d+2]=u.z,h[d]=o.x,h[d+1]=o.y,h[d+2]=o.z,d=3*_[m+1],n[d]=u.x,n[d+1]=u.y,n[d+2]=u.z,h[d]=o.x,h[d+1]=o.y,h[d+2]=o.z,d=3*_[m+2],n[d]=u.x,n[d+1]=u.y,n[d+2]=u.z,h[d]=o.x,h[d+1]=o.y,h[d+2]=o.z;for(c=0;c<e;c+=3)r.s_temp_vd.setTo(n[c],n[c+1],n[c+2]),r.s_temp_vd.normalize(),r.s_temp_vb.setTo(h[c],h[c+1],h[c+2]),r.s_temp_vb.normalize(),r.s_temp_vc.setTo(i[c],i[c+1],i[c+2]),r.s_temp_va.copyFrom(r.s_temp_vc),r.s_temp_vc.scaleBy(r.s_temp_vc.dot(r.s_temp_vd)),r.s_temp_vd.subtractBy(r.s_temp_vc),r.s_temp_vd.normalize(),r.s_temp_vc.setTo(i[c],i[c+1],i[c+2]),r.s_temp_vc.scaleBy(r.s_temp_vb.dot(r.s_temp_vc)),r.s_temp_vb.subtractBy(r.s_temp_vc),r.s_temp_vb.normalize(),r.s_temp_va.crossBy(r.s_temp_vd),r.s_temp_va.dot(r.s_temp_vb)<0&&r.s_temp_vd.scaleBy(-1),n[c]=r.s_temp_vd.x,n[c+1]=r.s_temp_vd.y,n[c+2]=r.s_temp_vd.z,r.s_temp_vb.setTo(i[c],i[c+1],i[c+2]),r.s_temp_vb.crossBy(r.s_temp_vd),r.s_temp_vb.normalize(),h[c]=r.s_temp_vb.x,h[c+1]=r.s_temp_vb.y,h[c+2]=r.s_temp_vb.z}}r.s_temp_va=new a.default,r.s_temp_vb=new a.default,r.s_temp_vc=new a.default,r.s_temp_vd=new a.default,r.s_temp_ve=new a.default,r.s_temp_vf=new a.default,r.s_temp_vg=new a.default,e.default=r},"38de":function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s("6e01")),r=i(s("8e17")),l=i(s("f48d"));class _ extends l.default{constructor(){super(...arguments),this.tv=new r.default(1,0,0)}update(){this.tv.normalize()}updateFast(){this.tv.normalize()}static IntersectionTri(t,e,s,i,a,r){return 0}static IntersectionLS(t,e,s,i,a,n=1){let h=_.__tAv;if(h.copyFrom(i),h.subtractBy(s),h.normalize(),r.default.Cross(e,h,a),a.normalize(),h.w=a.dot(t)-a.dot(i),Math.abs(h.w)<=n){a.crossBy(e),a.normalize(),a.w=a.dot(t),h.w=(a.w-a.dot(s))/h.dot(a),a.copyFrom(h),a.scaleBy(h.w),a.addBy(s),h.copyFrom(a),h.subtractBy(s);let r=l.default.__tV1;if(r.copyFrom(a),r.subtractBy(i),h.dot(r)<=0)return 1}return 0}static IntersectioNearSphere2(t,e,s,i,r){let l=_.__tAv;if(l.x=s.x-t.x,l.y=s.y-t.y,l.z=s.z-t.z,l.w=l.dot(e),i*=i,l.w>a.default.MATH_MIN_POSITIVE){if(r.copyFrom(e),r.scaleBy(l.w),r.subtractBy(l),l.x=r.getLengthSquared(),l.x<=i)return l.w-=Math.sqrt(i-l.x),r.copyFrom(e),r.scaleBy(l.w),r.addBy(t),r.w=1,1}else if(l.getLengthSquared()<=i&&(r.copyFrom(e),r.scaleBy(l.w),r.subtractBy(l),l.x=r.getLengthSquared(),l.x<=i))return l.w+=Math.sqrt(i-l.x),r.copyFrom(e),r.scaleBy(l.w),r.addBy(t),r.w=1,1;return 0}static IntersectioNearSphere(t,e,s,i,r){let l=_.__tAv;if(l.x=s.x-t.x,l.y=s.y-t.y,l.z=s.z-t.z,l.w=l.dot(e),l.w>a.default.MATH_MIN_POSITIVE){if(r.x=l.x-l.w*e.x,r.y=l.y-l.w*e.y,r.z=l.z-l.w*e.z,r.x=r.getLengthSquared(),r.w=i*i,r.x<=r.w)return r.x=l.getLengthSquared(),r.z=r.w-r.x,l.normalize(),r.y=l.dot(e)*Math.sqrt(r.x),l.w=.5*(-r.y+Math.sqrt(r.y*r.y+4*r.z)),r.copyFrom(e),r.scaleBy(l.w),r.addBy(t),r.w=1,1}else if(r.x=l.getLengthSquared(),r.w=i*i,r.x<=r.w)return r.z=r.w-r.x,l.normalize(),r.y=l.dot(e)*Math.sqrt(r.x),l.w=.5*(-r.y+Math.sqrt(r.y*r.y+4*r.z)),r.copyFrom(e),r.scaleBy(l.w),r.addBy(t),r.w=1,1;return 0}static IntersectSphere(t,e,s,i){let r=_.__tAv;return r.x=s.x-t.x,r.y=s.y-t.y,r.z=s.z-t.z,r.w=r.dot(e),r.w<a.default.MATH_MIN_POSITIVE||(r.x-=r.w*e.x,r.y-=r.w*e.y,r.z-=r.w*e.z),r.getLengthSquared()<=i*i}}_.__tAv=new r.default,e.default=_},3930:function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s("6e01"));class r{constructor(t=1,e=1,s=1,i=1){this.r=1,this.g=1,this.b=1,this.a=1,this.r=t,this.g=e,this.b=s,this.a=i}setRGB3Bytes(t,e,s){this.r=t/255,this.g=e/255,this.b=s/255}setRGB3f(t,e,s){this.r=t,this.g=e,this.b=s}setRGBUint24(t){this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255}setRGBA4f(t,e,s,i){this.r=t,this.g=e,this.b=s,this.a=i}copyFrom(t){this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a}scaleBy(t){this.r*=t,this.g*=t,this.b*=t}inverseRGB(){this.r=1-this.r,this.g=1-this.g,this.b=1-this.b}randomRGB(t=1){this.r=Math.random()*t,this.g=Math.random()*t,this.b=Math.random()*t}normalizeRandom(t=1){this.r=Math.random(),this.g=Math.random(),this.b=Math.random();let e=Math.sqrt(this.r*this.r+this.g*this.g+this.b*this.b);e>a.default.MATH_MIN_POSITIVE&&(this.r=t*this.r/e,this.g=t*this.g/e,this.b=t*this.b/e)}normalize(t){void 0==t&&(t=1);let e=Math.sqrt(this.r*this.r+this.g*this.g+this.b*this.b);e>a.default.MATH_MIN_POSITIVE&&(this.r=t*this.r/e,this.g=t*this.g/e,this.b=t*this.b/e)}getCSSDecRGBAColor(){return"rgba("+Math.floor(255*this.r)+","+Math.floor(255*this.g)+","+Math.floor(255*this.b)+","+this.a.toFixed(4)+")"}getCSSHeXRGBColor(){let t="#",e=Math.floor(255*this.r);return t+=e<15?"0"+e.toString(16):""+e.toString(16),e=Math.floor(255*this.g),t+=e<15?"0"+e.toString(16):""+e.toString(16),e=Math.floor(255*this.b),t+=e<15?"0"+e.toString(16):""+e.toString(16),t}toString(){return"[Color4(r="+this.r+", g="+this.g+",b="+this.b+",a="+this.a+")]"}}e.default=r},"3b73":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class i{static SetLanguage(t){i.s_language=t}static GetLanguage(){return i.s_language}static SetThreadEnabled(t){i.s_threadEnabled=t}static GetThreadEnabled(){return i.s_threadEnabled}static GetDebugEnabled(){return i.s_debugEnabled}static SetDebugEnabled(t){i.s_debugEnabled=t}static SetDevicePixelRatio(t){i.s_devicePixelRatio=t}static GetDevicePixelRatio(){return i.s_devicePixelRatio}static Initialize(t){i.s_inited&&(i.s_inited=!1,i.s_WEBGL_VER=t[0],i.TestMobileWeb(),i.s_language=navigator.language+"")}static IsWebGL1(){return 1==i.s_WEBGL_VER}static IsWebGL2(){return 2==i.s_WEBGL_VER}static IsMobileWeb(){return i.s_mobileFlag>0?2==i.s_mobileFlag:i.TestMobileWeb()}static IsIOS(){if(i.s_IOS_Flag>0)return 2==i.s_IOS_Flag;let t=!1;return t=!!/iPad|iPhone|iPod/.test(navigator.platform)||void 0!=navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform),i.s_IOS_Flag=t?2:1,t}static IsIpadOS(){if(i.s_IPad_Flag>0)return 2==i.s_IPad_Flag;let t=navigator.maxTouchPoints>0&&navigator.maxTouchPoints>2&&/MacIntel/.test(navigator.platform);return!t&&/iPod|iPad|iPadPro|iPodPro/i.test(navigator.userAgent)&&(t=!0),i.s_IPad_Flag=t?2:1,t}static IsAndroidOS(){if(i.s_Android_Flag>0)return 2==i.s_Android_Flag;let t=i.TestMobileWeb();return t=!(!t||!/Android|Linux/i.test(navigator.userAgent)),i.s_Android_Flag=t?2:1,t}static TestMobileWeb(){return i.s_mobileFlag>0?2==i.s_mobileFlag:/mobile/.test(location.href)?(i.s_mobileFlag=2,2==i.s_mobileFlag):/Android/i.test(navigator.userAgent)?/Mobile/i.test(navigator.userAgent)?(i.s_mobileFlag=2,2==i.s_mobileFlag):(i.s_mobileFlag=1,2==i.s_mobileFlag):/webOS|iPhone|iPod|iPad|iPodPro|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?(i.s_mobileFlag=2,2==i.s_mobileFlag):(i.s_mobileFlag=1,2==i.s_mobileFlag)}}i.s_inited=!0,i.s_WEBGL_VER=2,i.s_devicePixelRatio=1,i.s_mobileFlag=0,i.s_Android_Flag=0,i.s_IOS_Flag=0,i.s_IPad_Flag=0,i.s_language="zh-CN",i.s_debugEnabled=!0,i.GPU_VENDOR="unknown",i.GPU_RENDERER="unknown",i.MAX_TEXTURE_SIZE=4096,i.MAX_RENDERBUFFER_SIZE=4096,i.MAX_VIEWPORT_WIDTH=4096,i.MAX_VIEWPORT_HEIGHT=4096,i.SHOWLOG_ENABLED=!1,i.SHADERCODE_TRACE_ENABLED=!1,i.VERT_SHADER_PRECISION_GLOBAL_HIGHP_ENABLED=!0,i.FRAG_SHADER_PRECISION_GLOBAL_HIGHP_ENABLED=!0,i.s_threadEnabled=!0,e.default=i},"3bfb":function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s("6e01")),r=i(s("8e17")),l=i(s("35fa")),_=i(s("8a0a")),n=i(s("e7d2")),h=s("8a0a"),u=i(s("fecb")),o=i(s("cb29"));class m extends o.default{constructor(t=_.default.VTX_STATIC_DRAW){super(t),this.m_posList=[null,null,null,null,null,null,null,null],this.m_pos=new r.default,this.normalType=h.VtxNormalType.FLAT,this.m_vs=null,this.m_uvs=null,this.m_nvs=null,this.m_cvs=null,this.flipVerticalUV=!1,this.uvPartsNumber=0}getVS(){return this.m_vs}getUVS(){return this.m_uvs}getNVS(){return this.m_nvs}getCVS(){return this.m_cvs}setPositionAt(t,e){if(t>=0&&t<8&&null!=this.m_vs){let s=this.m_posList[t];s[0]=e.x,s[1]=e.y,s[2]=e.z}}getPositionAt(t,e){if(t>=0&&t<8&&null!=this.m_vs){let s=this.m_posList[t];e.x=s[0],e.y=s[1],e.z=s[2]}}setEdgeAt(t,e,s){if(t>=0&&t<8&&null!=this.m_vs){let i=this.m_posList[t];t++,3==t?t=0:7==t&&(t=4);let a=this.m_posList[t];i[0]=e.x,i[1]=e.y,i[2]=e.z,a[0]=s.x,a[1]=s.y,a[2]=s.z}}getEdgeAt(t,e,s){if(t>=0&&t<8&&null!=this.m_vs){let i=this.m_posList[t];t++,3==t?t=0:7==t&&(t=4);let a=this.m_posList[t];e.x=i[0],e.y=i[1],e.z=i[2],s.x=a[0],s.y=a[1],s.z=a[2]}}setFaceAt(t,e,s,i,a){if(t>=0&&t<8&&null!=this.m_vs){t*=4;let r,l,_=[e,s,i,a],n=m.s_facePosIds,h=this.m_posList;for(let e=t+4,s=0;t<e;++t)r=h[n[t]],l=_[s++],r[0]=l.x,r[1]=l.y,r[2]=l.z}}getFaceAt(t,e,s,i,a){if(t>=0&&t<8&&null!=this.m_vs){t*=4;let r,l,_=[e,s,i,a],n=m.s_facePosIds,h=this.m_posList;for(let e=t+4,s=0;t<e;++t)r=h[n[t]],l=_[s++],l.x=r[0],l.y=r[1],l.z=r[2]}}getFaceCenterAt(t,e){if(t>=0&&t<8&&null!=this.m_vs){t*=4;let s,i=m.s_facePosIds,a=this.m_posList;e.setXYZ(0,0,0);for(let r=t+4;t<r;++t)s=a[i[t]],e.x+=s[0],e.y+=s[1],e.z+=s[2];e.scaleBy(.33333)}}transformFaceAt(t,e){if(t>=0&&t<8&&null!=this.m_vs){t*=4;let s=m.s_facePosIds,i=this.m_posList;for(let a=t+4;t<a;++t)e.transformVectorsSelf(i[s[t]],3)}}initializeWithYFace(t,e,s,i){let a=t,r=e,l=.5*(a.y+r.y);this.m_posList[0]=[r.x,l,r.z],this.m_posList[1]=[r.x,l,a.z],this.m_posList[2]=[a.x,l,a.z],this.m_posList[3]=[a.x,l,r.z],a=s,r=i;let _=.5*(a.y+r.y);this.m_posList[4]=[r.x,_,r.z],this.m_posList[5]=[r.x,_,a.z],this.m_posList[6]=[a.x,_,a.z],this.m_posList[7]=[a.x,_,r.z],this.initData(this.m_posList)}initialize(t,e){this.m_posList[0]=[e.x,t.y,e.z],this.m_posList[1]=[e.x,t.y,t.z],this.m_posList[2]=[t.x,t.y,t.z],this.m_posList[3]=[t.x,t.y,e.z],this.m_posList[4]=[e.x,e.y,e.z],this.m_posList[5]=[e.x,e.y,t.z],this.m_posList[6]=[t.x,e.y,t.z],this.m_posList[7]=[t.x,e.y,e.z],this.initData(this.m_posList)}scaleUVFaceAt(t,e,s,i,a){if(null!=this.m_uvs&&t>=0&&t<6){let r=8*t,l=r+8,_=this.m_uvs;for(;r<l;r+=2)_[r]=e+_[r]*i,_[r+1]=s+_[r+1]*a}}reinitialize(){this.initData(this.m_posList)}initData(t){this.vtxTotal=24;let e=0,s=0,i=0,r=null==this.m_ivs;if(r){this.m_vs=new Float32Array(72),this.m_ivs=new Uint16Array(36);let t=[3,2,3,3,2,2];for(e=0;e<6;++e)3==t[e]?(this.m_ivs[i]=s+3,this.m_ivs[i+1]=s+2,this.m_ivs[i+2]=s+1,this.m_ivs[i+3]=s+3,this.m_ivs[i+4]=s+1,this.m_ivs[i+5]=s):(this.m_ivs[i]=s+2,this.m_ivs[i+1]=s+3,this.m_ivs[i+2]=s,this.m_ivs[i+3]=s+2,this.m_ivs[i+4]=s,this.m_ivs[i+5]=s+1),i+=6,s+=4}let o,d=m.s_facePosIds,c=this.m_posList,f=this.m_vs;for(s=0,e=0;e<this.vtxTotal;++e)o=c[d[e]],f.set(o,s),s+=3;this.bounds=new u.default,null!=this.m_transMatrix?(this.m_transMatrix.transformVectorsSelf(this.m_vs,this.m_vs.length),this.bounds.addXYZFloat32Arr(this.m_vs)):this.bounds.addXYZFloat32Arr(this.m_vs),this.bounds.updateFast(),n.default.Reset(),n.default.AddFloat32Data(this.m_vs,3);let p=6;if(this.isVBufEnabledAt(_.default.VBUF_UVS_INDEX)){if(null==this.m_uvs&&(this.m_uvs=new Float32Array(48),this.initUVData(2*this.vtxTotal),4==this.uvPartsNumber?(this.scaleUVFaceAt(0,.5,.5,.5,.5),this.scaleUVFaceAt(1,0,0,.5,.5),this.scaleUVFaceAt(2,.5,0,.5,.5),this.scaleUVFaceAt(3,0,.5,.5,.5),this.scaleUVFaceAt(4,.5,0,.5,.5),this.scaleUVFaceAt(5,0,.5,.5,.5)):6==this.uvPartsNumber&&(this.scaleUVFaceAt(0,0,0,.25,.5),this.scaleUVFaceAt(1,.25,0,.25,.5),this.scaleUVFaceAt(2,.5,0,.25,.5),this.scaleUVFaceAt(3,.75,0,.25,.5),this.scaleUVFaceAt(4,0,.5,.25,.5),this.scaleUVFaceAt(5,.25,.5,.25,.5)),this.isVBufEnabledAt(_.default.VBUF_TVS_INDEX))){i=0;while(i<6){switch(i){case 0:e=0,this.m_uvs[e]=0,this.m_uvs[e+1]=1,this.m_uvs[e+2]=1,this.m_uvs[e+3]=1,this.m_uvs[e+4]=1,this.m_uvs[e+5]=0,this.m_uvs[e+6]=0,this.m_uvs[e+7]=0;break;case 3:e=24,this.m_uvs[e]=0,this.m_uvs[e+1]=1,this.m_uvs[e+2]=1,this.m_uvs[e+3]=1,this.m_uvs[e+4]=1,this.m_uvs[e+5]=0,this.m_uvs[e+6]=0,this.m_uvs[e+7]=0;break;case 5:e=32,this.m_uvs[e]=0,this.m_uvs[e+1]=1,this.m_uvs[e+2]=1,this.m_uvs[e+3]=1,this.m_uvs[e+4]=1,this.m_uvs[e+5]=0,this.m_uvs[e+6]=0,this.m_uvs[e+7]=0;break;default:break}++i}}n.default.AddFloat32Data(this.m_uvs,2)}if(this.isVBufEnabledAt(_.default.VBUF_NVS_INDEX)){this.m_nvs=new Float32Array(72),i=0;let t=0,s=0,r=0;if(this.normalType==h.VtxNormalType.FLAT)while(i<p){switch(t=0,s=0,r=0,i){case 0:s=-1;break;case 1:s=1;break;case 2:t=1;break;case 3:r=-1;break;case 4:t=-1;break;case 5:r=1;break;default:break}e=12*i,t*=this.normalScale,s*=this.normalScale,r*=this.normalScale,this.m_nvs[e]=t,this.m_nvs[e+1]=s,this.m_nvs[e+2]=r,this.m_nvs[e+3]=t,this.m_nvs[e+4]=s,this.m_nvs[e+5]=r,this.m_nvs[e+6]=t,this.m_nvs[e+7]=s,this.m_nvs[e+8]=r,this.m_nvs[e+9]=t,this.m_nvs[e+10]=s,this.m_nvs[e+11]=r,++i}else{let l=this.bounds.center,_=0;while(i<this.vtxTotal)e=3*i,t=this.m_vs[e]-l.x,s=this.m_vs[e+1]-l.y,r=this.m_vs[e+2]-l.z,_=Math.sqrt(t*t+s*s+r*r),_>a.default.MATH_MIN_POSITIVE&&(this.m_nvs[e]=t/_,this.m_nvs[e+1]=s/_,this.m_nvs[e+2]=r/_),++i}n.default.AddFloat32Data(this.m_nvs,3)}if(this.isVBufEnabledAt(_.default.VBUF_CVS_INDEX)){this.m_cvs=new Float32Array(72),i=0;let t=1,s=1,a=1;while(i<p)e=12*i,this.m_cvs[e]=t,this.m_cvs[e+1]=s,this.m_cvs[e+2]=a,this.m_cvs[e+3]=t,this.m_cvs[e+4]=s,this.m_cvs[e+5]=a,this.m_cvs[e+6]=t,this.m_cvs[e+7]=s,this.m_cvs[e+8]=a,this.m_cvs[e+9]=t,this.m_cvs[e+10]=s,this.m_cvs[e+11]=a,++i;n.default.AddFloat32Data(this.m_cvs,3)}if(this.isVBufEnabledAt(_.default.VBUF_TVS_INDEX)){let t=12,e=new Float32Array(this.m_nvs.length),s=new Float32Array(this.m_nvs.length);l.default.ClacTrisTangent(this.m_vs,this.m_vs.length,this.m_uvs,this.m_nvs,t,this.m_ivs,e,s),n.default.AddFloat32Data(e,3),n.default.AddFloat32Data(s,3)}n.default.vbWholeDataEnabled=this.vbWholeDataEnabled,r?(this.m_vbuf=n.default.CreateBySaveData(this.getBufDataUsage()),this.m_vbuf.setUint16IVSData(this.m_ivs),this.vtCount=this.m_ivs.length,this.trisNumber=12,this.buildEnd()):n.default.UpdateBufData(this.m_vbuf)}setFaceUVSAt(t,e,s=0){if(null!=this.m_uvs)if(s<1)this.m_uvs.set(e,8*t);else{t*=8,s<0&&(s=0);for(let i=0;i<4;++i)this.m_uvs[t++]=e[2*s],this.m_uvs[t++]=e[2*s+1],s++,s%=4}}initUVData(t){let e=0;if(this.flipVerticalUV)while(e<t)this.m_uvs[e]=1,this.m_uvs[e+1]=1,this.m_uvs[e+2]=0,this.m_uvs[e+3]=1,this.m_uvs[e+4]=0,this.m_uvs[e+5]=0,this.m_uvs[e+6]=1,this.m_uvs[e+7]=0,e+=8;else while(e<t)this.m_uvs[e]=0,this.m_uvs[e+1]=0,this.m_uvs[e+2]=1,this.m_uvs[e+3]=0,this.m_uvs[e+4]=1,this.m_uvs[e+5]=1,this.m_uvs[e+6]=0,this.m_uvs[e+7]=1,e+=8}toString(){return"Box3DMesh()"}__$destroy(){this.isResFree()&&(this.bounds=null,this.m_vs=null,this.m_uvs=null,this.m_nvs=null,this.m_cvs=null,super.__$destroy())}}m.s_facePosIds=[0,1,2,3,4,5,6,7,4,5,1,0,5,6,2,1,7,6,2,3,4,7,3,0],e.default=m},"402a":function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s("11e6")),r=i(s("8e17")),l=i(s("fecb")),_=i(s("1710")),n=i(s("29ef")),h=i(s("0929")),u=i(s("cc48")),o=i(s("dc2b"));class m{constructor(t=null){this.m_uid=0,this.m_transfrom=null,this.m_mouseEvtDispatcher=null,this.m_visible=!0,this.m_drawEnabled=!0,this.m_rcolorMask=n.default.COLOR_MASK_ALL_TRUE,this.m_renderState=n.default.BACK_CULLFACE_NORMAL_STATE,this.m_display=null,this.m_mesh=null,this.m_globalBounds=null,this.m_parent=null,this.m_renderProxy=null,this.__$rseFlag=a.default.DEFAULT,this.name="DisplayEntity",this.spaceCullMask=u.default.CAMERA,this.drawEnabled=!1,this.mouseEnabled=!1,this.vbWholeDataEnabled=!0,this.m_texChanged=!1,this.m_meshChanged=!1,this.m_transStatus=h.default.UPDATE_TRANSFORM,this.m_uid=m.s_uid++,this.m_transfrom=null==t?h.default.Create():t,this.createBounds()}createBounds(){this.m_globalBounds=new l.default}__$setRenderProxy(t){this.m_renderProxy=t}__$setParent(t){this.m_parent,this.m_parent=t}__$getParent(){return this.m_parent}__$testSpaceEnabled(){return a.default.TestSpaceEnabled2(this.__$rseFlag)}__$testContainerEnabled(){return a.default.TestContainerEnabled(this.__$rseFlag)}__$testRendererEnabled(){return a.default.TestRendererEnabled(this.__$rseFlag)}getRendererUid(){return a.default.GetRendererUid(this.__$rseFlag)}isFree(){return this.__$rseFlag==a.default.DEFAULT}dispatchEvt(t){t.getClassType()==_.default.EventClassType&&null!=this.m_mouseEvtDispatcher&&this.m_mouseEvtDispatcher.dispatchEvt(t)}getEvtDispatcher(t){return this.m_mouseEvtDispatcher}setEvtDispatcher(t){this.m_mouseEvtDispatcher=t}getGlobalBounds(){return this.m_globalBounds}getLocalBounds(){return this.m_mesh.bounds}getGlobalBoundsVer(){return null!=this.m_globalBounds?this.m_globalBounds.version:-1}__$setDrawEnabled(t){this.m_drawEnabled!=t&&(this.m_drawEnabled=t,null!=this.m_display&&(this.m_display.visible=this.m_visible&&t,null!=this.m_display.__$$runit&&this.m_display.__$$runit.setVisible(this.m_display.visible)))}isDrawEnabled(){return this.m_drawEnabled}updateMeshToGpu(t=null,e=!0){null!=t&&(this.m_renderProxy=t),null!=this.m_renderProxy&&null!=this.m_display&&this.m_display.__$ruid>-1&&(this.m_meshChanged?(this.m_meshChanged=!1,this.m_renderProxy.VtxBufUpdater.updateDispVbuf(this.m_display,e)):this.m_renderProxy.VtxBufUpdater.updateVtxDataToGpuByUid(this.m_display.vbuf.getUid(),e))}updateMaterialToGpu(t=null,e=!0){null!=t&&(this.m_renderProxy=t),null!=this.m_renderProxy&&null!=this.m_display&&this.m_display.__$ruid>-1&&this.m_texChanged&&(this.m_texChanged=!1,this.m_renderProxy.MaterialUpdater.updateDispTRO(this.m_display,e))}setTextureList(t){null!=this.m_display&&this.m_display.__$ruid>-1&&null!=this.m_display.getMaterial()&&(this.m_display.getMaterial().setTextureList(t),this.m_texChanged=!0)}setTextureAt(t,e){null!=this.m_display&&this.m_display.__$ruid>-1&&null!=this.m_display.getMaterial()&&(this.m_display.getMaterial().setTextureAt(t,e),this.m_texChanged=!0)}setSortValue(t){null!=this.m_display&&null!=this.m_display.__$$runit&&(this.m_display.__$$runit.value=t)}setVisible(t){this.m_visible!=t&&(this.m_visible=t,null!=this.m_display&&(this.m_display.visible=t&&this.m_drawEnabled,null!=this.m_display.__$$runit&&this.m_display.__$$runit.setVisible(this.m_display.visible)))}getVisible(){return this.m_visible}getTransform(){return this.m_transfrom}copyPositionFrom(t){null!=t&&this.m_transfrom.copyPositionFrom(t.getTransform())}copyMeshFrom(t){null!=t&&this.setMesh(t.getMesh())}copyMaterialFrom(t){null!=t&&this.setMaterial(t.getMaterial())}copyTransformFrom(t){let e=t;null!=e&&this.m_transfrom.copyFrom(e.m_transfrom)}initDisplay(t){this.m_display.vbuf=t.__$attachVBuf(),this.m_display.ivsIndex=0,this.m_display.ivsCount=t.vtCount,this.m_display.drawMode=t.drawMode,this.m_display.trisNumber=t.trisNumber,this.m_display.visible=this.m_visible&&this.m_drawEnabled}setMesh(t){null==this.m_mesh?null!=t&&(t.isEnabled()||t.rebuild(),t.isEnabled()&&(this.m_mesh=t,t.__$attachThis(),null==this.m_display&&this.createDisplay(),null!=this.m_display&&(this.m_display.setTransform(this.m_transfrom.getMatrix()),this.initDisplay(t)),null!=this.m_globalBounds&&this.m_globalBounds.copyFrom(t.bounds),this.updateMesh())):null!=this.m_display&&this.m_display.__$ruid>-1&&this.m_mesh!=t&&null!=t&&(this.m_transfrom.updatedStatus|=2,this.m_mesh.__$detachVBuf(this.m_display.vbuf),this.m_mesh.__$detachThis(),t.__$attachThis(),this.m_mesh=t,this.initDisplay(t),this.m_meshChanged=!0,this.updateMesh())}updateMesh(){}getIvsIndex(){return this.m_display.ivsIndex}getIvsCount(){return this.m_display.ivsCount}setIvsParam(t,e){null!=this.m_display&&(this.m_display.ivsIndex=t,this.m_display.ivsCount=e,this.m_display.__$ruid>-1&&this.m_display.__$$runit.setIvsParam(t,e))}getMesh(){return this.m_mesh}hasMesh(){return null!=this.m_mesh}isPolyhedral(){return null==this.m_mesh||this.m_mesh.isPolyhedral()}testRay(t,e,s,i){return this.m_mesh.testRay(t,e,s,i)}setMaterial(t){null!=t&&(null==this.m_display&&(this.m_display=o.default.Create(),this.m_display.setTransform(this.m_transfrom.getMatrix()),this.m_display.visible=this.m_visible&&this.m_drawEnabled),this.m_display.getMaterial()!=t&&(a.default.RENDERER_UID_FLAT&this.__$rseFlag)==a.default.RENDERER_UID_FLAT&&this.m_display.__$ruid<0&&(this.m_display.renderState=this.m_renderState,this.m_display.rcolorMask=this.m_rcolorMask,this.m_display.setMaterial(t)))}getMaterial(){return null!=this.m_display?this.m_display.getMaterial():null}getDisplay(){return this.m_display}getInvMatrix(){return this.m_transfrom.getInvMatrix()}getMatrix(){return this.m_transfrom.getMatrix()}getToParentMatrix(){return this.m_transfrom.getToParentMatrix()}setRenderColorMask(t){this.m_rcolorMask=t,null!=this.m_display&&(this.m_display.rcolorMask=this.m_rcolorMask,null!=this.m_display.__$$runit&&this.m_display.__$$runit.setDrawFlag(this.m_renderState,this.m_rcolorMask))}setRenderColorMaskByName(t){this.m_rcolorMask=n.default.GetRenderColorMaskByName(t),null!=this.m_display&&(this.m_display.rcolorMask=this.m_rcolorMask,null!=this.m_display.__$$runit&&this.m_display.__$$runit.setDrawFlag(this.m_renderState,this.m_rcolorMask))}setRenderState(t){this.m_renderState=t,null!=this.m_display&&(this.m_display.renderState=this.m_renderState,null!=this.m_display.__$$runit&&this.m_display.__$$runit.setDrawFlag(this.m_renderState,this.m_rcolorMask))}setRenderStateByName(t){this.m_renderState=n.default.GetRenderStateByName(t),null!=this.m_display&&(this.m_display.renderState=this.m_renderState,null!=this.m_display.__$$runit&&this.m_display.__$$runit.setDrawFlag(this.m_renderState,this.m_rcolorMask))}createDisplay(){this.m_display=o.default.Create()}activeDisplay(){if(null!=this.m_display){let t=this.m_display.getMaterial();if(null!=t){if(null==t.getShaderData()&&null!=t.getCodeBuf()&&null==t.getShaderData()){let e=t.getTextureList(),s=null!=e&&e.length>0;t.initializeByCodeBuf(s)}null==this.getMesh()&&(this.__activeMesh(t),this.m_display.name=this.name)}}}__activeMesh(t){}getUid(){return this.m_uid}setXYZ(t,e,s){this.m_transfrom.setXYZ(t,e,s)}offsetPosition(t){this.m_transfrom.offsetPosition(t)}setPosition(t){this.m_transfrom.setPosition(t)}getPosition(t){this.m_transfrom.getPosition(t)}setRotationXYZ(t,e,s){this.m_transfrom.setRotationXYZ(t,e,s)}setScaleXYZ(t,e,s){this.m_transfrom.setScaleXYZ(t,e,s)}getRotationXYZ(t){this.m_transfrom.getRotationXYZ(t)}getScaleXYZ(t){this.m_transfrom.getScaleXYZ(t)}destroy(){null!=this.m_mouseEvtDispatcher&&(this.m_mouseEvtDispatcher.destroy(),this.m_mouseEvtDispatcher=null),null!=this.m_transfrom&&this.isFree()&&(null!=this.m_display&&(this.m_mesh.__$detachVBuf(this.m_display.vbuf),o.default.Restore(this.m_display),this.m_display=null),h.default.Restore(this.m_transfrom),this.m_transfrom=null,null!=this.m_mesh&&(this.m_mesh.__$detachThis(),this.m_mesh=null),this.__$setParent(null),this.m_visible=!0,this.m_drawEnabled=!0,this.m_renderProxy=null,this.__$rseFlag=a.default.DEFAULT)}isInRenderer(){return(this.__$rseFlag&a.default.RENDERER_UID_FLAT)!=a.default.RENDERER_UID_FLAT}isRenderEnabled(){return null!=this.m_display&&this.m_display.__$ruid>-1}updateBounds(){null!=this.m_transfrom&&(this.m_transStatus=h.default.UPDATE_TRANSFORM,this.update())}update(){if(this.m_transfrom.updatedStatus>this.m_transStatus&&(this.m_transStatus=this.m_transfrom.updatedStatus),this.m_transStatus!=h.default.UPDATE_NONE){if(null!=this.m_globalBounds&&null!=this.m_mesh)if(this.m_transfrom.update(),this.m_transStatus>h.default.UPDATE_POSITION){let t=this.m_mesh.bounds.min,e=this.m_mesh.bounds.max,s=m.s_boundsInVS;s[0]=t.x,s[1]=t.y,s[2]=t.z,s[3]=e.x,s[4]=t.y,s[5]=t.z,s[6]=t.x,s[7]=t.y,s[8]=e.z,s[9]=e.x,s[10]=t.y,s[11]=e.z,s[12]=t.x,s[13]=e.y,s[14]=t.z,s[15]=e.x,s[16]=e.y,s[17]=t.z,s[18]=t.x,s[19]=e.y,s[20]=e.z,s[21]=e.x,s[22]=e.y,s[23]=e.z,this.m_transfrom.getMatrix().transformVectors(s,24,m.s_boundsOutVS),this.m_globalBounds.reset(),this.m_globalBounds.addXYZFloat32Arr(m.s_boundsOutVS),this.m_globalBounds.update()}else{let t=this.m_transfrom.getMatrix(),e=this.m_mesh.bounds,s=this.m_globalBounds;t.transformOutVector3(e.min,s.min),t.transformOutVector3(e.max,s.max),s.center.addVecsTo(s.min,s.max),s.center.scaleBy(.5),++this.m_globalBounds.version}else this.m_transfrom.update();this.m_transStatus=h.default.UPDATE_NONE,this.m_transfrom.updatedStatus=this.m_transStatus}null!=this.m_display&&null!=this.m_display.__$$runit&&(this.m_display.__$$runit.bounds=this.m_globalBounds,this.m_transfrom.getPosition(this.m_display.__$$runit.pos))}toString(){return"DisplayEntity(name="+this.name+",uid = "+this.m_uid+", rseFlag = "+this.__$rseFlag+")"}}m.s_uid=0,m.s_boundsInVS=new Float32Array(24),m.s_boundsOutVS=new Float32Array(24),m.s_pos=new r.default,e.default=m},"519e":function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s("8a0a")),r=i(s("cb29")),l=i(s("e7d2"));class _ extends r.default{constructor(t=a.default.VTX_STATIC_DRAW){super(t),this.vsStride=3,this.vs=null,this.uvs=null,this.nvs=null,this.cvs=null,this.tvs=null,this.btvs=null,this.ivs=null}initialize(){null!=this.vs&&(l.default.Reset(),l.default.AddFloat32Data(this.vs,this.vsStride),this.isVBufEnabledAt(a.default.VBUF_UVS_INDEX)&&l.default.AddFloat32Data(this.uvs,2),this.isVBufEnabledAt(a.default.VBUF_NVS_INDEX)&&l.default.AddFloat32Data(this.nvs,3),this.isVBufEnabledAt(a.default.VBUF_CVS_INDEX)&&l.default.AddFloat32Data(this.cvs,3),this.isVBufEnabledAt(a.default.VBUF_TVS_INDEX)&&(l.default.AddFloat32Data(this.tvs,3),l.default.AddFloat32Data(this.btvs,3)),l.default.vbWholeDataEnabled=this.vbWholeDataEnabled,this.vtCount=this.ivs.length,null!=this.m_vbuf?l.default.UpdateBufData(this.m_vbuf):this.m_vbuf=l.default.CreateBySaveData(this.getBufDataUsage(),this.getBufSortFormat()),this.m_vbuf.setUintIVSData(this.ivs),this.buildEnd())}testRay(t,e,s,i){return-1}toString(){return"[DataMesh()]"}__$destroy(){this.isResFree()&&(this.bounds=null,this.vs=null,this.uvs=null,this.nvs=null,this.cvs=null,this.tvs=null,this.btvs=null,super.__$destroy())}}e.default=_},5282:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class i{constructor(t=0,e=0,s=0,i=0){this.x=0,this.y=0,this.z=0,this.u=0,this.v=1,this.nx=0,this.ny=0,this.nz=0,this.index=0,this.x=t,this.y=e,this.z=s,this.index=i}cloneVertex(){let t=new i(this.x,this.y,this.z,this.index);return t.nx=this.nx,t.ny=this.ny,t.nz=this.nz,t.u=this.u,t.v=this.v,t}copyFrom(t){this.x=t.x,this.y=t.y,this.z=t.z,this.u=t.u,this.v=t.v,this.nx=t.nx,this.ny=t.ny,this.nz=t.nz,this.index=t.index}}e.default=i},"5e78":function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=s("8d98"),r=i(s("7181")),l=i(s("0851"));class _ extends l.default{constructor(t,e,s=!1){super(t,e,s),this.m_texData=null,this.m_texDatas=null,this.m_texDatasLen=0,this.mipmapEnabled=!0,this.minFilter=a.TextureConst.LINEAR_MIPMAP_LINEAR,this.m_type=a.TextureProxyType.Image}getTexData(){return this.m_texData}setDataFromImage(t,e=0,s=0,i=0,a=!1){if(null!=t&&t.width>0&&t.height>0){this.m_haveRData=!0,e<0&&(e=0),e>15&&(e=15),e>=this.m_texDatasLen&&(this.m_texDatasLen=e+1);let l=this.m_texData;null!=l?this.m_texData.miplevel!=e?(null==this.m_texDatas&&(this.m_texDatas=[this.m_texData,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]),l=this.m_texDatas[e],null==l&&(l=r.default.Create(),l.miplevel=e,a=!0,this.m_texDatas[e]=l)):this.isGpuEnabled()&&(l.status=0):(l=this.m_texData=r.default.Create(),l.miplevel=e,a=!0,this.m_texWidth=t.width,this.m_texHeight=t.height),l.data==t&&l.offsetx==s&&l.offsety==i||(0==e&&(this.m_texWidth=t.width,this.m_texHeight=t.height),l.data=t,l.status=0,(l.width<t.width||l.height<t.height||a)&&(l.width=t.width,l.height=t.height,l.status=1),l.offsetx=s,l.offsety=i),this.version++}}uploadData(t){null!=this.m_texData&&this.dataUploadToGpu(t.getRC(),this.m_texData,this.m_texDatas,!0),this.version=0}__$updateToGpu(t){if(this.version>0&&t.hasResUid(this.getResUid())&&null!=this.m_texData){let e=t.getRC();this.__$updateToGpuBegin(t),this.dataUploadToGpu(e,this.m_texData,this.m_texDatas),this.__$buildParam(e),this.m_generateMipmap=!0}}__$destroy(){if(this.getAttachCount()<1){if(this.version=0,null!=this.m_texDatas){for(let t=0;t<this.m_texDatasLen;++t)r.default.Restore(this.m_texDatas[t]);this.m_texDatasLen=0,this.m_texDatas=null,this.m_texData=null}null!=this.m_texData&&(r.default.Restore(this.m_texData),this.m_texData=null),super.__$destroy()}}toString(){return"[ImageTextureProxy(name:"+this.name+",uid="+this.getUid()+",width="+this.getWidth()+",height="+this.getHeight()+")]"}}e.default=_},6098:function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s("6e01")),r=i(s("faa5")),l=i(s("b3bd")),_=i(s("0fc4")),n=i(s("c217"));class h extends r.default{constructor(){super(),this.billFS=new n.default,this.m_uniqueName=""}initialize(t){this.m_uniqueName="BillboardShader"}getFragShaderCode(){let t="#version 300 es\nprecision mediump float;\nuniform sampler2D u_sampler0;\nin vec4 v_colorMult;\nin vec4 v_colorOffset;\nin vec2 v_texUV;\nlayout(location = 0) out vec4 FragColor;\nvoid main()\n{\nvec4 color = texture(u_sampler0, v_texUV);\nvec3 offsetColor = v_colorOffset.rgb;\nvec4 fv4 = v_colorMult.wwww;\n",e=this.billFS.getBrnAndAlphaCode("fv4"),s="\nFragColor = color;\n}\n";return t+e+s}getVtxShaderCode(){let t="#version 300 es\nprecision mediump float;\nlayout(location = 0) in vec2 a_vs;\nlayout(location = 1) in vec2 a_uvs;\nuniform mat4 u_objMat;\nuniform mat4 u_viewMat;\nuniform mat4 u_projMat;\nuniform vec4 u_billParam[3];\nout vec4 v_colorMult;\nout vec4 v_colorOffset;\nout vec2 v_texUV;\nvoid main()\n{\nvec4 temp = u_billParam[0];\nfloat cosv = cos(temp.z);\nfloat sinv = sin(temp.z);\nvec2 vtx = a_vs.xy * temp.xy;\nvec2 vtx_pos = vec2(vtx.x * cosv - vtx.y * sinv, vtx.x * sinv + vtx.y * cosv);\nvec4 pos = u_viewMat * u_objMat * vec4(0.0,0.0,0.0,1.0);\npos.xy += vtx_pos.xy;\ngl_Position =  u_projMat * pos;\nv_texUV = a_uvs;\nv_colorMult = u_billParam[1];\nv_colorOffset = u_billParam[2];\n}\n";return t}getUniqueShaderName(){return this.m_uniqueName+"_"+this.billFS.getBrnAlphaStatus()}toString(){return"[BillboardShaderBuffer()]"}static GetInstance(){return null!=h.s_instance||(h.s_instance=new h),h.s_instance}}h.s_instance=new h;class u extends _.default{constructor(t=!0,e=!1){super(),this.m_brightnessEnabled=!0,this.m_alphaEnabled=!1,this.m_rz=0,this.m_uniformData=new Float32Array([1,1,0,1,1,1,1,1,0,0,0,0]),this.m_brightnessEnabled=t,this.m_alphaEnabled=e}getCodeBuf(){let t=h.GetInstance();return t.billFS.setBrightnessAndAlpha(this.m_brightnessEnabled,this.m_alphaEnabled),t}createSelfUniformData(){let t=new l.default;return t.uniformNameList=["u_billParam"],t.dataList=[this.m_uniformData],t}setRGBA4f(t,e,s,i){this.m_uniformData[4]=t,this.m_uniformData[5]=e,this.m_uniformData[6]=s,this.m_uniformData[7]=i}setRGB3f(t,e,s){this.m_uniformData[4]=t,this.m_uniformData[5]=e,this.m_uniformData[6]=s}setFadeFactor(t){this.m_uniformData[7]=t}getFadeFactor(){return this.m_uniformData[7]}setRGBAOffset4f(t,e,s,i){this.m_uniformData[8]=t,this.m_uniformData[9]=e,this.m_uniformData[10]=s,this.m_uniformData[11]=i}setRGBOffset3f(t,e,s){this.m_uniformData[8]=t,this.m_uniformData[9]=e,this.m_uniformData[10]=s}getRotationZ(){return this.m_rz}setRotationZ(t){this.m_rz=t,this.m_uniformData[2]=t*a.default.MATH_PI_OVER_180}getScaleX(){return this.m_uniformData[0]}getScaleY(){return this.m_uniformData[1]}setScaleX(t){this.m_uniformData[0]=t}setScaleY(t){this.m_uniformData[1]=t}setScaleXY(t,e){this.m_uniformData[0]=t,this.m_uniformData[1]=e}getUniformData(){return this.m_uniformData}destroy(){super.destroy(),this.m_uniformData=null}}e.default=u},"644c":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class i{constructor(){}static GetTypeByTypeNS(t){switch(t){case"mat4":return i.SHADER_MAT4;case"mat3":return i.SHADER_MAT3;case"mat2":return i.SHADER_MAT2;case"float":return i.SHADER_FLOAT;case"int":return i.SHADER_INT;case"vec4":return i.SHADER_VEC4;case"vec3":return i.SHADER_VEC3;case"vec2":return i.SHADER_VEC2;case"vec4[]":return i.SHADER_VEC4FV;case"vec3[]":return i.SHADER_VEC3FV;case"vec2[]":return i.SHADER_VEC2FV;case"sampler2D":return i.SHADER_SAMPLER2D;case"sampler3D":return i.SHADER_SAMPLER3D;case"samplerCube":return i.SHADER_SAMPLERCUBE;default:break}return i.SHADER_UNDEFINED}static GetTypeNSByType(t){switch(t){case i.SHADER_MAT4:return"mat4";case i.SHADER_MAT3:return"mat3";case i.SHADER_MAT2:return"mat2";case i.SHADER_FLOAT:return"float";case i.SHADER_VEC4:return"vec4";case i.SHADER_VEC3:return"vec3";case i.SHADER_VEC2:return"vec2";case i.SHADER_SAMPLER2D:return"sampler2D";case i.SHADER_SAMPLER3D:return"sampler3D";case i.SHADER_SAMPLERCUBE:return"samplerCube";case i.SHADER_UNDEFINED:return"undefined";default:break}return""}}i.ATTRINS_VTX_VS="a_vs",i.ATTRINS_VTX_UVS="a_uvs",i.ATTRINS_VTX_NVS="a_nvs",i.ATTRINS_VTX_CVS="a_cvs",i.UNIFORMNS_OBJ_MAT_NS="u_objMat",i.UNIFORMNS_VIEW_MAT_NS="u_viewMat",i.UNIFORMNS_PROJ_MAT_NS="u_projMat",i.SHADER_UNDEFINED=3010,i.SHADER_VEC2=3011,i.SHADER_VEC3=3012,i.SHADER_VEC4=3013,i.SHADER_VEC2FV=3014,i.SHADER_VEC3FV=3015,i.SHADER_VEC4FV=3016,i.SHADER_MAT2=3017,i.SHADER_MAT3=3018,i.SHADER_MAT4=3019,i.SHADER_FLOAT=3020,i.SHADER_INT=3021,i.SHADER_MAT2FV=3022,i.SHADER_MAT3FV=3023,i.SHADER_MAT4FV=3024,i.SHADER_SAMPLER2D=3031,i.SHADER_SAMPLERCUBE=3032,i.SHADER_SAMPLER3D=3033,i.SHADER_PRECISION_LOWP=3101,i.SHADER_PRECISION_MEDIUMP=3111,i.SHADER_PRECISION_HIGHP=3121,i.UNIFORM_TEX_SAMPLER2D="sampler2D",i.UNIFORM_TEX_SAMPLERCUBE="samplerCube",i.UNIFORM_TEX_SAMPLER3D="sampler3D",i.UNIFORMNS_TEX_SAMPLER_0="u_sampler0",i.UNIFORMNS_TEX_SAMPLER_1="u_sampler1",i.UNIFORMNS_TEX_SAMPLER_2="u_sampler2",i.UNIFORMNS_TEX_SAMPLER_3="u_sampler3",i.UNIFORMNS_TEX_SAMPLER_4="u_sampler4",i.UNIFORMNS_TEX_SAMPLER_5="u_sampler5",i.UNIFORMNS_TEX_SAMPLER_6="u_sampler6",i.UNIFORMNS_TEX_SAMPLER_7="u_sampler7",i.UNIFORMNS_TEX_SAMPLER_LIST=[i.UNIFORMNS_TEX_SAMPLER_0,i.UNIFORMNS_TEX_SAMPLER_1,i.UNIFORMNS_TEX_SAMPLER_2,i.UNIFORMNS_TEX_SAMPLER_3,i.UNIFORMNS_TEX_SAMPLER_4,i.UNIFORMNS_TEX_SAMPLER_5,i.UNIFORMNS_TEX_SAMPLER_6,i.UNIFORMNS_TEX_SAMPLER_7],e.default=i},"6af0":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=window;void 0==i["VoxCore"]&&(i["VoxCore"]={});var a=i["VoxCore"];const r=s("face");a["ROFunctions"]=r.ROFunctions},"6e01":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class i{static Clamp(t,e,s){return Math.max(Math.min(t,s),e)}static IsPowerOf2(t){return 0==(t&t-1)}static CalcCeilPowerOfTwo(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}static CalcNearestCeilPow2(t){return Math.pow(2,Math.round(Math.log(t)/Math.LN2))}static CalcFloorCeilPow2(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}static DegreeToRadian(t){return i.MATH_PI_OVER_180*t}static Log2(t){return Math.log(t)/Math.LN2}static GetMaxMipMapLevel(t,e){return Math.round(i.Log2(Math.max(t,e))+1)}static SafeACos(t){return t<=-1?i.MATH_PI:t>=1?0:Math.acos(t)}static GetNearestCeilPow2(t){let e=1;while(e<t)e<<=1;return e}static GetMinRadian(t,e){return e%=i.MATH_2PI,t%=i.MATH_2PI,e<t?(e=i.MATH_2PI-t+e,e>i.MATH_PI?e-i.MATH_2PI:e):e>t?(t=i.MATH_2PI-e+t,t>i.MATH_PI?i.MATH_2PI-t:-t):0}static GetMinDegree(t,e){let s=0;return e>=270&&t<90?s=(e-(t+360))%180:e<=90&&t>=270?s=(e+360-t)%180:(s=e-t,s>180?(s-=360,s%=360):s<-180&&(s+=360,s%=360)),s}static GetDegreeByXY(t,e){if(Math.abs(t)<1e-5)return e>=0?270:90;let s=180*Math.atan(e/t)/Math.PI;return e>0&&t>0?s:e<0&&t>=0?360+s:180+s}static GetRadianByXY(t,e){if(Math.abs(t)<i.MATH_MIN_POSITIVE)return e>=0?i.MATH_1PER2PI:i.MATH_3PER2PI;let s=Math.atan(e/t);return t>=0?s:i.MATH_PI+s}static GetRadianByCos(t,e,s){var a=Math.acos(t);return e>=0?a:i.MATH_PI+a}}i.MATH_MIN_POSITIVE=1e-5,i.MATH_MAX_NEGATIVE=-1e-5,i.MATH_MAX_POSITIVE=268435454,i.MATH_MIN_NEGATIVE=-268435454,i.MATH_1_OVER_255=1/255,i.MATH_PI=Math.PI,i.MATH_2PI=2*i.MATH_PI,i.MATH_3PER2PI=1.5*i.MATH_PI,i.MATH_1PER2PI=.5*i.MATH_PI,i.MATH_1_OVER_PI=1/i.MATH_PI,i.MATH_1_OVER_360=1/360,i.MATH_1_OVER_180=1/180,i.MATH_180_OVER_PI=180/i.MATH_PI,i.MATH_PI_OVER_180=i.MATH_PI/180,i.MATH_LN2=.6931471805599453,e.default=i},"710f":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class i{constructor(){if(this.m_useidList=[],this.m_removeidList=[],null!=i.s_ins)throw Error("ROVtxBufUidStore is a singleton class!!");i.s_ins=this}static GetInstance(){return i.s_ins}__$getRemovedListLen(){return this.m_removeidList.length}__$getRemovedList(){return this.m_removeidList}__$attachAt(t){if(t<this.m_useidList.length)++this.m_useidList[t];else{let e=this.m_useidList.length;for(;e<=t;++e)this.m_useidList.push(0);++this.m_useidList[t]}}__$detachAt(t){--this.m_useidList[t],this.m_useidList[t]<1&&(this.m_useidList[t]=0,this.m_removeidList.push(t))}getAttachCountAt(t){return t<this.m_useidList.length?this.m_useidList[t]:0}getAttachAllCount(){let t=0,e=0,s=this.m_useidList.length;for(;e<s;++e)this.m_useidList[e]>0&&(t+=this.m_useidList[e]);return t}}i.s_ins=null,e.default=i},7181:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class i{constructor(){this.width=0,this.height=0,this.data=null,this.miplevel=0,this.status=1,this.offsetx=0,this.offsety=0}updateToGpu(t,e,s,i,a,r){1==this.status||r?t.texImage2D(e,this.miplevel,s,i,a,this.data):0==this.status&&t.texSubImage2D(e,this.miplevel,this.offsetx,this.offsety,i,a,this.data),this.status=-1}static Create(){return i.s_list.length>0?i.s_list.pop():new i}static Restore(t){null!=t&&(t.data=null,i.s_list.push(t))}}i.s_list=[],e.default=i},"76b0":function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s("8e17")),r=i(s("d1a0")),l=i(s("35fa")),_=i(s("8a0a")),n=i(s("fecb")),h=i(s("cb29")),u=i(s("e7d2")),o=s("e08e"),m=i(s("3930"));class d extends h.default{constructor(t=_.default.VTX_STATIC_DRAW){super(t),this.color0=new m.default,this.color1=new m.default,this.color2=new m.default,this.color3=new m.default,this.offsetU=0,this.offsetV=0,this.uScale=1,this.vScale=1,this.flipVerticalUV=!1,this.axisFlag=0,this.m_polyhedralBoo=!0,this.m_vs=null,this.m_uvs=null,this.m_nvs=null,this.m_cvs=null,this.m_tvs=null,this.m_btvs=null,this.vsFloat32=null,this.dataStepList=null}getVS(){return this.m_vs}getUVS(){return this.m_uvs}setUVS(t){null!=t&&8==t.length&&(null==this.m_uvs?this.m_uvs=t.slice(0):this.m_uvs.set(t))}getNVS(){return this.m_nvs}getCVS(){return this.m_cvs}initialize(t,e,s,i){if(null!=this.m_vs)return;let a=t,r=e,h=t+s,m=e+i,d=0;switch(this.m_ivs=new Uint16Array([0,1,2,0,2,3]),this.axisFlag){case 0:this.m_vs=new Float32Array([a,r,d,h,r,d,h,m,d,a,m,d]);break;case 1:this.m_vs=new Float32Array([h,d,r,a,d,r,a,d,m,h,d,m]);break;case 2:this.m_vs=new Float32Array([d,a,r,d,h,r,d,h,m,d,a,m]);break;default:break}if(null==this.bounds&&(this.bounds=new n.default),this.bounds.addXYZFloat32Arr(this.m_vs),this.bounds.updateFast(),u.default.Reset(),u.default.AddFloat32Data(this.m_vs,3),null==this.m_uvs&&this.isVBufEnabledAt(_.default.VBUF_UVS_INDEX)&&(this.flipVerticalUV?this.m_uvs=new Float32Array([this.offsetU+0*this.uScale,this.offsetV+1*this.vScale,this.offsetU+1*this.uScale,this.offsetV+1*this.vScale,this.offsetU+1*this.uScale,this.offsetV+0*this.vScale,this.offsetU+0*this.uScale,this.offsetV+0*this.vScale]):this.m_uvs=new Float32Array([this.offsetU+0*this.uScale,this.offsetV+0*this.vScale,this.offsetU+1*this.uScale,this.offsetV+0*this.vScale,this.offsetU+1*this.uScale,this.offsetV+1*this.vScale,this.offsetU+0*this.uScale,this.offsetV+1*this.vScale])),this.isVBufEnabledAt(_.default.VBUF_NVS_INDEX))switch(this.axisFlag){case 0:this.m_nvs=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1]);break;case 1:this.m_nvs=new Float32Array([0,1,0,0,1,0,0,1,0,0,1,0]);break;case 2:this.m_nvs=new Float32Array([1,0,0,1,0,0,1,0,0,1,0,0]);break;default:break}if(this.isVBufEnabledAt(_.default.VBUF_CVS_INDEX)&&(this.m_cvs=new Float32Array([this.color0.r,this.color0.g,this.color0.b,this.color1.r,this.color1.g,this.color1.b,this.color2.r,this.color2.g,this.color2.b,this.color3.r,this.color3.g,this.color3.b])),this.isVBufEnabledAt(_.default.VBUF_TVS_INDEX)){let t=2;this.m_tvs=new Float32Array(12),this.m_btvs=new Float32Array(12),l.default.ClacTrisTangent(this.m_vs,this.m_vs.length,this.m_uvs,this.m_nvs,t,this.m_ivs,this.m_tvs,this.m_btvs)}this.buildVbuf(),this.vtxTotal=4,this.trisNumber=2,this.drawMode=o.RenderDrawMode.ELEMENTS_TRIANGLES,this.buildEnd()}reinitialize(){this.buildVbuf()}buildVbuf(){u.default.Reset(),u.default.AddFloat32Data(this.m_vs,3),this.isVBufEnabledAt(_.default.VBUF_UVS_INDEX)&&u.default.AddFloat32Data(this.m_uvs,2),this.isVBufEnabledAt(_.default.VBUF_NVS_INDEX)&&u.default.AddFloat32Data(this.m_nvs,3),this.isVBufEnabledAt(_.default.VBUF_CVS_INDEX)&&u.default.AddFloat32Data(this.m_cvs,3),this.isVBufEnabledAt(_.default.VBUF_TVS_INDEX)&&(u.default.AddFloat32Data(this.m_tvs,3),u.default.AddFloat32Data(this.m_btvs,3)),u.default.vbWholeDataEnabled=this.vbWholeDataEnabled,this.vtCount=this.m_ivs.length,null!=this.m_vbuf?u.default.UpdateBufData(this.m_vbuf):this.m_vbuf=u.default.CreateBySaveData(this.getBufDataUsage(),this.getBufSortFormat()),this.m_vbuf.setUintIVSData(this.m_ivs),this.buildEnd()}isPolyhedral(){return this.m_polyhedralBoo}setPolyhedral(t){this.m_polyhedralBoo=t}testRay(t,e,s,i){if(this.m_polyhedralBoo)return-1;if(i){switch(this.axisFlag){case 0:r.default.IntersectionSLV2(a.default.Z_AXIS,0,t,e,s);break;case 1:r.default.IntersectionSLV2(a.default.Y_AXIS,0,t,e,s);break;case 2:r.default.IntersectionSLV2(a.default.X_AXIS,0,t,e,s);break;default:break}return 1}return-1}toString(){return"[RectPlaneMesh()]"}__$destroy(){this.isResFree()&&(this.bounds=null,this.m_vs=null,this.m_uvs=null,this.m_nvs=null,this.m_cvs=null,super.__$destroy())}}e.default=d},"78e9":function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s("644c"));class r{constructor(){this.type=-1,this.typeName="",this.name="",this.isArray=!1,this.arrLength=0,this.isTex=!1,this.location=null}parseCode(t){const e=";";let s=t.indexOf(e);if(s<0)return!1;const i=" ";t=t.replace(/^\s*|\s*$/g,""),s>0&&(t=t.slice(0,s));let r=t.split(i);return this.typeName=r[r.length-2],this.name=r[r.length-1],s=this.name.indexOf("["),this.isArray=s>0,this.arrLength=0,this.isArray&&(this.arrLength=parseInt(this.name.slice(s+1,this.name.indexOf("]",s+1))),this.name=this.name.slice(0,s),this.typeName+="[]"),this.type=a.default.GetTypeByTypeNS(this.typeName),!(this.type<0)&&(this.isTex=this.type==a.default.SHADER_SAMPLER2D||this.type==a.default.SHADER_SAMPLERCUBE||this.type==a.default.SHADER_SAMPLER3D,!0)}}e.default=r},"7a04":function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s("f044"));class r{constructor(){this.m_uid=-1,this.m_total=0,this.layoutBit=0,this.m_fOffsetList=null,this.m_f32List=null,this.m_f32SizeList=null,this.m_f32PreSizeList=null,this.m_f32ChangedList=null,this.m_f32Bufs=null,this.m_stepFloatsTotal=0,this.m_uid=a.default.CreateNewID()}getUid(){return this.m_uid}getType(){return 1}getBuffersTotal(){return this.m_f32List.length}getF32DataAt(t){return this.m_f32List[t]}setF32DataAt(t,e,s,i){null==this.m_f32List&&(this.m_f32List=[null,null,null,null,null,null,null,null],this.m_f32ChangedList=[!1,!1,!1,!1,!1,!1,!1,!1],this.m_f32SizeList=[0,0,0,0,0,0,0,0],this.m_f32PreSizeList=[0,0,0,0,0,0,0,0]),this.m_f32List[t]=e,null!=this.m_f32Bufs&&null!=e&&(this.m_f32ChangedList[t]=!0),null!=i&&(this.m_fOffsetList=i),this.m_stepFloatsTotal=s,null!=e&&(this.m_f32SizeList[t]=e.length)}setData4fAt(t,e,s,i,a,r){t*=this.m_fOffsetList[e],this.m_f32List[e][t++]=s,this.m_f32List[e][t++]=i,this.m_f32List[e][t++]=a,this.m_f32List[e][t++]=r}setData3fAt(t,e,s,i,a){t*=this.m_fOffsetList[e],this.m_f32List[e][t++]=s,this.m_f32List[e][t++]=i,this.m_f32List[e][t++]=a}setData2fAt(t,e,s,i){t*=this.m_fOffsetList[e],this.m_f32List[e][t++]=s,this.m_f32List[e][t++]=i}destroy(){this.m_f32List=null,this.m_f32ChangedList=null,this.m_f32SizeList=null,this.m_f32PreSizeList=null,this.m_f32List=null}toString(){return"VtxSeparatedBuf(uid = "+this.m_uid+")"}}e.default=r},"7c63":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=s("e08e");class a{constructor(t,e,s,i){this.m_uid=-1,this.m_rBoo=!0,this.m_gBoo=!0,this.m_bBoo=!0,this.m_aBoo=!0,this.m_uid=a.s_uid++,this.m_rBoo=t,this.m_gBoo=e,this.m_bBoo=s,this.m_aBoo=i}getUid(){return this.m_uid}getR(){return this.m_rBoo}getG(){return this.m_gBoo}getB(){return this.m_bBoo}getA(){return this.m_aBoo}use(){a.s_state!=this.m_uid&&(a.Rstate.setColorMask(this.m_rBoo,this.m_gBoo,this.m_bBoo,this.m_aBoo),a.s_state=this.m_uid)}static Create(t,e,s,i,r){if(a.s_stsNameMap.has(t)){let e=a.s_stsNameMap.get(t);return e.getUid()}let l=(e?64:32)|(s?16:8)|(i?4:2)|(r?1:0);if(a.s_stsMap.has(l)){let t=a.s_stsMap.get(l);l=t.getUid()}else{let _=new a(e,s,i,r);l=_.getUid(),a.s_stsMap.set(l,_),a.s_stsNameMap.set(t,_),a.s_states.push(_),++a.s_statesLen}return l}static GetColorMaskByName(t){if(a.s_stsNameMap.has(t)){let e=a.s_stsNameMap.get(t);return e.getUid()}return-1}static UseRenderState(t){a.s_unlocked&&a.Rstate.roColorMask!=t&&t>-1&&t<a.s_statesLen&&a.s_states[t].use()}static UseColorMaskByName(t){let e=a.GetColorMaskByName(t);a.s_unlocked&&a.Rstate.roColorMask!=e&&e>-1&&e<a.s_statesLen&&a.s_states[e].use()}static Lock(){a.s_unlocked=!1}static Unlock(){a.s_unlocked=!0}static Reset(){a.s_state=-1}}a.s_uid=0,a.s_state=-1,a.s_states=[],a.s_statesLen=1,a.s_stsMap=new Map,a.s_stsNameMap=new Map,a.s_unlocked=!0,a.ALL_TRUE_COLOR_MASK=0,a.ALL_FALSE_COLOR_MASK=1,a.Rstate=null,e.RenderColorMask=a;class r{constructor(t,e,s){this.m_uid=-1,this.m_cullFaceMode=0,this.m_blendMode=0,this.m_depthTestMode=0,this.m_shadowMode=0,this.m_uid=r.s_uid++,this.m_cullFaceMode=t,this.m_blendMode=e,this.m_depthTestMode=s}getUid(){return this.m_uid}getCullFaceMode(){return this.m_cullFaceMode}getDepthTestMode(){return this.m_depthTestMode}getBlendMode(){return this.m_blendMode}use(){if(r.s_state!=this.m_uid){r.Rstate.setCullFaceMode(this.m_cullFaceMode);r.s_blendModes[r.m_blendMode];r.m_blendMode<0?r.Rstate.setBlendMode(this.m_blendMode,r.s_blendModes[this.m_blendMode]):r.Rstate.setBlendMode(r.m_blendMode,r.s_blendModes[r.m_blendMode]),r.s_depthTestMode<0?r.Rstate.setDepthTestMode(this.m_depthTestMode):r.Rstate.setDepthTestMode(r.s_depthTestMode),r.s_state=this.m_uid}}static CreateBlendModeSeparate(t,e,s,a,l,_=0,n=0){if(null!=t&&""!=t){let h;if(r.s_blendModeNameMap.has(t))return h=r.s_blendModeNameMap.get(t),r.s_blendModeIndexMap.get(h);_<1&&(_=i.GLBlendEquation.FUNC_ADD),n<1&&(n=i.GLBlendEquation.FUNC_ADD);let u=1;if(h=31,h=131*h+e,h=131*h+s,a>0&&l>0&&(h=131*h+a,h=131*h+l,u=1),r.s_blendModeIndexMap.has(h))return r.s_blendModeNameMap.set(t,h),r.s_blendModeIndexMap.get(h);let o=++r.s_blendModeIndex;r.s_blendModeNameMap.set(t,h),r.s_blendModeIndexMap.set(h,o);let m=[u,_,n,e,s,a,l];return r.s_blendModes[o]=m,o}return 0}static CreateBlendMode(t,e,s,a=0){if(null!=t&&""!=t){let l;if(r.s_blendModeNameMap.has(t))return l=r.s_blendModeNameMap.get(t),r.s_blendModeIndexMap.get(l);a<1&&(a=i.GLBlendEquation.FUNC_ADD);let _=0;if(l=31,l=131*l+e,l=131*l+s,r.s_blendModeIndexMap.has(l))return r.s_blendModeIndexMap.get(l);let n=++r.s_blendModeIndex;r.s_blendModeNameMap.set(t,l),r.s_blendModeIndexMap.set(l,n);let h=[_,a,0,e,s,0,0];return r.s_blendModes[n]=h,n}return 0}static Create(t,e,s,i){if(r.s_stsNameMap.has(t)){let e=r.s_stsNameMap.get(t);return e.getUid()}let a=31;if(a=131*a+i,a=131*a+s,a=131*a+e,r.s_stsMap.has(a)){let t=r.s_stsMap.get(a);a=t.getUid()}else{let l=new r(e,s,i);a=l.getUid(),r.s_stsMap.set(a,l),r.s_stsNameMap.set(t,l),r.s_states.push(l),++r.s_statesLen}return a}static GetRenderStateByName(t){if(r.s_stsNameMap.has(t)){let e=r.s_stsNameMap.get(t);return e.getUid()}return-1}static UseRenderState(t){r.s_unlocked&&r.s_state!=t&&t>-1&&t<r.s_statesLen&&r.s_states[t].use()}static UseRenderStateByName(t){if(r.s_unlocked){let e=r.GetRenderStateByName(t);r.s_state!=e&&e>-1&&e<r.s_statesLen&&r.s_states[e].use()}}static UnlockBlendMode(){r.m_blendMode=r.s_preBlendMode}static LockBlendMode(t){r.s_preBlendMode=r.m_blendMode,r.m_blendMode=t}static UnlockDepthTestMode(){r.s_depthTestMode=r.s_preDepthTestMode}static LockDepthTestMode(t){r.s_preDepthTestMode=r.s_depthTestMode,r.s_depthTestMode=t}static Lock(){r.s_unlocked=!1}static Unlock(){r.s_unlocked=!0}static Reset(){r.s_state=-1}}r.s_uid=0,r.s_state=-1,r.s_states=[],r.s_statesLen=1,r.m_blendMode=-1,r.s_depthTestMode=-1,r.s_stsMap=new Map,r.s_stsNameMap=new Map,r.s_blendModeNameMap=new Map,r.s_blendModeIndexMap=new Map,r.s_blendModeIndex=0,r.s_blendModes=new Array(256),r.s_unlocked=!0,r.Rstate=null,r.s_preBlendMode=-1,r.s_preDepthTestMode=-1,e.RenderStateObject=r;class l{constructor(){this.stencilMask=-1}}class _{constructor(){this.m_units=new Array(128),this.m_unit=null,this.m_blendMode=i.RenderBlendMode.NORMAL,this.m_cullMode=i.CullFaceMode.NONE,this.m_depthTestType=i.DepthTestMode.DISABLE,this.m_cullDisabled=!0,this.m_context=null,this.m_gl=null,this.roColorMask=-11}reset(){this.roColorMask=-11}setRenderContext(t){this.m_context=t,this.m_gl=t.getRC();let e=this.m_gl.rcuid;this.m_unit=this.m_units[e],null==this.m_unit&&(this.m_unit=this.m_units[e]=new l)}setColorMask(t,e,s,i){this.m_gl.colorMask(t,e,s,i)}setStencilFunc(t,e,s){this.m_gl.stencilFunc(t,e,s)}setStencilMask(t){this.m_unit.stencilMask!=t&&t>=0&&(this.m_unit.stencilMask=t,this.m_gl.stencilMask(t))}setStencilOp(t,e,s){this.m_gl.stencilOp(t,e,s)}setDepthTestEnable(t){t?this.m_gl.enable(this.m_gl.DEPTH_TEST):this.m_gl.disable(this.m_gl.DEPTH_TEST)}setCullFaceEnable(t){t?this.m_gl.enable(this.m_gl.CULL_FACE):this.m_gl.disable(this.m_gl.CULL_FACE)}setBlendEnable(t){t?this.m_gl.enable(this.m_gl.BLEND):this.m_gl.disable(this.m_gl.BLEND)}setCullFaceMode(t){this.m_cullMode!=t&&(this.m_cullMode=t,t!=i.CullFaceMode.NONE?(this.m_cullDisabled&&(this.m_cullDisabled=!1,this.m_gl.enable(this.m_gl.CULL_FACE)),this.m_gl.cullFace(t)):this.m_cullDisabled||(this.m_cullDisabled=!0,this.m_gl.disable(this.m_gl.CULL_FACE)))}setBlendMode(t,e){this.m_blendMode!=t&&(this.m_blendMode=t,t>0?e[0]<1?(this.m_gl.blendEquation(this.m_gl.FUNC_ADD),this.m_gl.blendFunc(this.m_gl.ONE,this.m_gl.ZERO),this.m_gl.blendEquation(e[1]),this.m_gl.blendFunc(e[3],e[4])):(this.m_gl.blendEquationSeparate(e[1],e[2]),this.m_gl.blendFuncSeparate(e[3],e[4],e[5],e[6])):this.m_gl.disable(this.m_gl.BLEND))}setDepthTestMode(t){if(this.m_depthTestType!=t)switch(this.m_depthTestType=t,t){case i.DepthTestMode.ALWAYS:this.m_gl.depthMask(!1),this.m_gl.depthFunc(this.m_gl.ALWAYS);break;case i.DepthTestMode.SKY:this.m_gl.depthMask(!0),this.m_gl.depthFunc(this.m_gl.LEQUAL);break;case i.DepthTestMode.OPAQUE:this.m_gl.depthMask(!0),this.m_gl.depthFunc(this.m_gl.LESS);break;case i.DepthTestMode.OPAQUE_OVERHEAD:this.m_gl.depthMask(!1),this.m_gl.depthFunc(this.m_gl.EQUAL);break;case i.DepthTestMode.DECALS:this.m_gl.depthMask(!1),this.m_gl.depthFunc(this.m_gl.LEQUAL);break;case i.DepthTestMode.BLEND:this.m_gl.depthMask(!1),this.m_gl.depthFunc(this.m_gl.LESS);break;case i.DepthTestMode.WIRE_FRAME:this.m_gl.depthMask(!0),this.m_gl.depthFunc(this.m_gl.LEQUAL);break;case i.DepthTestMode.NEXT_LAYER:this.m_gl.depthMask(!1),this.m_gl.depthFunc(this.m_gl.ALWAYS);break;case i.DepthTestMode.TRUE_EQUAL:this.m_gl.depthMask(!0),this.m_gl.depthFunc(this.m_gl.EQUAL);break;case i.DepthTestMode.TRUE_GREATER:this.m_gl.depthMask(!0),this.m_gl.depthFunc(this.m_gl.GREATER);break;case i.DepthTestMode.TRUE_GEQUAL:this.m_gl.depthMask(!0),this.m_gl.depthFunc(this.m_gl.GEQUAL);break;case i.DepthTestMode.WIRE_FRAME_NEXT:break;default:break}}}e.RODrawState=_},"81ce":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class i{static Es2VtxShderToES3(t){let e=t;const s="attribute",i="varying ";let a=e.indexOf(s),r=0;while(a>=0)e=e.slice(0,a)+"layout(location="+r+") in"+e.slice(a+9),a=e.indexOf(s),r++;let l=new RegExp(i,"g");return e=e.replace(l,"out "),"#version 300 es\n"+e}static Es2FragShderToES3(t){let e=t;const s="gl_FragColor",i="varying ";let a=e.indexOf(s),r=0,l="FragColorOut_"+r;a>=0&&(e=e.slice(0,a)+l+e.slice(a+12)),a=e.indexOf("void "),e=e.slice(0,a)+"out vec4 "+l+";\n"+e.slice(a);let _=new RegExp(i,"g");return e=e.replace(_,"in "),_=new RegExp(" texture2D","g"),e=e.replace(_," texture"),_=new RegExp(" textureCube","g"),e=e.replace(_," texture"),"#version 300 es\n"+e}static Es3VtxShaderToES2(t){const e=/^#.+(\bes|core\b)/;t=t.replace(e,"");const s=/\blayout\b.+\bin\b/g;t=t.replace(s,"attribute");const a=/\bout\b/g;t=t.replace(a,"varying");const r=/\btexture\b/g;t=t.replace(r,"texture2D"),t.indexOf("#version")>=0&&(t=t.replace("#version","//#version"));let l=0,_=0,n=t.indexOf("inverse(");n<0&&(n=t.indexOf("inverse ("));let h="",u=!1,o=!1;while(n>3){if(l=t.indexOf(")",n+2),h=t.slice(n+2,l),h.indexOf("mat3")>0)u=!0;else if(h=h.replace(/\s+/g,""),l=h.indexOf("("),h=h.slice(l+1),l=t.indexOf(h,1),_=t.lastIndexOf("mat",l),_>0)switch(h=t.slice(_,l),h=h.replace(/\s+/g,""),h){case"mat3":u=!0;break;case"mat4":o=!0;break}if(n=t.indexOf("inverse(",n+5),n<0&&(n=t.indexOf("inverse (",n+5)),u&&o)break}l=0,n=t.indexOf("transpose("),n<0&&(n=t.indexOf("transpose (")),h="";let m=!1,d=!1;while(n>3){if(l=t.indexOf(")",n+2),h=t.slice(n+2,l+1),h.indexOf("mat3")>0)m=!0;else if(h=h.replace(/\s+/g,""),l=h.indexOf("("),h=h.slice(l+1),l=t.indexOf(h,1),_=t.lastIndexOf("mat",l),_>0)switch(h=t.slice(_,l),h=h.replace(/\s+/g,""),h){case"mat3":m=!0;break;case"mat4":d=!0;break}if(n=t.indexOf("transpose(",n+5),n<0&&(n=t.indexOf("transpose (",n+5)),m&&d)break}return(u||o)&&(n=t.indexOf("void "),n>10&&(u&&o?t=t.slice(0,n)+i.__glslInverseMat3+i.__glslInverseMat4+t.slice(n):u?t=t.slice(0,n)+i.__glslInverseMat3+t.slice(n):o&&(t=t.slice(0,n)+i.__glslInverseMat4+t.slice(n)))),(m||d)&&(n=t.indexOf("void "),n>10&&(m&&d?t=t.slice(0,n)+i.__glslTransposeMat3+i.__glslTransposeMat4+t.slice(n):m?t=t.slice(0,n)+i.__glslTransposeMat3+t.slice(n):d&&(t=t.slice(0,n)+i.__glslTransposeMat4+t.slice(n)))),t}static Es3FragShaderToES2(t){const e=/^#.+(\bes|core\b)/;t=t.replace(e,"");const s=new RegExp(" in ","g");t=t.replace(s,"_fref_");const i=/\bin\b/g;t=t.replace(i,"varying");const a=new RegExp("_fref_","g");t=t.replace(a," in ");const r=/\btexture\b/g;t=t.replace(r,"texture2D");const l=/" "/g;let _=t;const n=";",h="layout";let u=_.indexOf(h),o=0,m=0,d="",c="",f=0,p=null,S=[],A=[];while(u>=0)o=_.indexOf(n,u+1),d=_.slice(u+1,o),c=d.slice(d.lastIndexOf(" ")+1),f=d.indexOf(")"),u=d.lastIndexOf("=",f)+1,d=d.slice(u+1,f),f=parseInt(d.replace(l,"")),S.push(c),A.push(f),u=_.indexOf(h,o);let T=S.length;if(T>0)if(p=/layout/g,t=t.replace(p,"//layout"),T>1){u=0;while(u<T)p=new RegExp(S[u],"g"),t=t.replace(p,"gl_FragData["+A[u]+"]"),++u}else p=new RegExp(c,"g"),t=t.replace(p,"gl_FragColor");else u=_.indexOf("out "),u>0&&(o=_.indexOf(n,u+1),d=_.slice(u+1,o),c=d.slice(d.lastIndexOf(" ")+1),p=new RegExp(c,"g"),t=t.replace(p,"gl_FragColor"),p=/\bout\b/g,t=t.replace(p,"//out"));T>1&&(t="#extension GL_EXT_draw_buffers: require\n"+t),t.indexOf("#version")>=0&&(t=t.replace("#version","//#version")),u=0;for(let E=0;E<16;++E){if(u=t.indexOf("samplerCube ",u),!(u>0))break;{o=t.indexOf(";",u),d=_.slice(u+12,o),c="";let e=d.split(" ");for(let t=0;t<16;++t)if(""!=e[t]){c=e[t];break}for(T=0;T<16;++T){if(o=t.indexOf(c,o+1),!(o>0))break;if(m=t.lastIndexOf("texture2D",o-1),m<0)break;d=t.slice(m,o),t=t.slice(0,m)+"textureCube("+t.slice(o),o+=2}}u+=4}return t}}i.__glslTransposeMat3="\n    mat3 transpose(mat3 m) {\n        return mat3(m[0][0],m[1][0],m[2][0],\n            m[0][1],m[1][1],m[2][1],\n            m[0][2],m[1][2],m[2][2]);\n    }\n    ",i.__glslTransposeMat4="\n    mat4 transpose(mat4 m) {\n        return mat4(m[0][0],m[1][0],m[2][0],m[3][0],\n            m[0][1],m[1][1],m[2][1],m[3][1],\n            m[0][2],m[1][2],m[2][2],m[3][2],\n            m[0][3],m[1][3],m[2][3],m[3][3]);\n    }\n    ",i.__glslInverseMat3="\n    mat3 inverse(mat3 m) {\n        float a00 = m[0][0], a01 = m[0][1], a02 = m[0][2];\n        float a10 = m[1][0], a11 = m[1][1], a12 = m[1][2];\n        float a20 = m[2][0], a21 = m[2][1], a22 = m[2][2];  \n        float b01 = a22 * a11 - a12 * a21;\n        float b11 = -a22 * a10 + a12 * a20;\n        float b21 = a21 * a10 - a11 * a20;  \n        float det = a00 * b01 + a01 * b11 + a02 * b21;  \n        return mat3(b01, (-a22 * a01 + a02 * a21), (a12 * a01 - a02 * a11),\n                    b11, (a22 * a00 - a02 * a20), (-a12 * a00 + a02 * a10),\n                    b21, (-a21 * a00 + a01 * a20), (a11 * a00 - a01 * a10)) / det;\n    }\n    ",i.__glslInverseMat4="\n    mat4 inverse(mat4 m) {\n        float\n            a00 = m[0][0], a01 = m[0][1], a02 = m[0][2], a03 = m[0][3],\n            a10 = m[1][0], a11 = m[1][1], a12 = m[1][2], a13 = m[1][3],\n            a20 = m[2][0], a21 = m[2][1], a22 = m[2][2], a23 = m[2][3],\n            a30 = m[3][0], a31 = m[3][1], a32 = m[3][2], a33 = m[3][3],\n            b00 = a00 * a11 - a01 * a10,\n            b01 = a00 * a12 - a02 * a10,\n            b02 = a00 * a13 - a03 * a10,\n            b03 = a01 * a12 - a02 * a11,\n            b04 = a01 * a13 - a03 * a11,\n            b05 = a02 * a13 - a03 * a12,\n            b06 = a20 * a31 - a21 * a30,\n            b07 = a20 * a32 - a22 * a30,\n            b08 = a20 * a33 - a23 * a30,\n            b09 = a21 * a32 - a22 * a31,\n            b10 = a21 * a33 - a23 * a31,\n            b11 = a22 * a33 - a23 * a32,\n            det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n        return mat4(\n            a11 * b11 - a12 * b10 + a13 * b09,\n            a02 * b10 - a01 * b11 - a03 * b09,\n            a31 * b05 - a32 * b04 + a33 * b03,\n            a22 * b04 - a21 * b05 - a23 * b03,\n            a12 * b08 - a10 * b11 - a13 * b07,\n            a00 * b11 - a02 * b08 + a03 * b07,\n            a32 * b02 - a30 * b05 - a33 * b01,\n            a20 * b05 - a22 * b02 + a23 * b01,\n            a10 * b10 - a11 * b08 + a13 * b06,\n            a01 * b08 - a00 * b10 - a03 * b06,\n            a30 * b04 - a31 * b02 + a33 * b00,\n            a21 * b02 - a20 * b04 - a23 * b00,\n            a11 * b07 - a10 * b09 - a12 * b06,\n            a00 * b09 - a01 * b07 + a02 * b06,\n            a31 * b01 - a30 * b03 - a32 * b00,\n            a20 * b03 - a21 * b01 + a22 * b00) / det;\n        }\n    ",e.default=i},8875:function(t,e,s){var i,a,r;(function(s,l){a=[],i=l,r="function"===typeof i?i.apply(e,a):i,void 0===r||(t.exports=r)})("undefined"!==typeof self&&self,(function(){function t(){var e=Object.getOwnPropertyDescriptor(document,"currentScript");if(!e&&"currentScript"in document&&document.currentScript)return document.currentScript;if(e&&e.get!==t&&document.currentScript)return document.currentScript;try{throw new Error}catch(d){var s,i,a,r=/.*at [^(]*\((.*):(.+):(.+)\)$/gi,l=/@([^@]*):(\d+):(\d+)\s*$/gi,_=r.exec(d.stack)||l.exec(d.stack),n=_&&_[1]||!1,h=_&&_[2]||!1,u=document.location.href.replace(document.location.hash,""),o=document.getElementsByTagName("script");n===u&&(s=document.documentElement.outerHTML,i=new RegExp("(?:[^\\n]+?\\n){0,"+(h-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),a=s.replace(i,"$1").trim());for(var m=0;m<o.length;m++){if("interactive"===o[m].readyState)return o[m];if(o[m].src===n)return o[m];if(n===u&&o[m].innerHTML&&o[m].innerHTML.trim()===a)return o[m]}return null}}return t}))},"8a0a":function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s("ca6c"));class r{static ToGL(t,e){switch(e){case r.VTX_STATIC_DRAW:return t.STATIC_DRAW;case r.VTX_DYNAMIC_DRAW:return t.DYNAMIC_DRAW;case r.VTX_STREAM_DRAW:return t.STREAM_DRAW;case r.VTX_STATIC_READ:return t.STATIC_READ;case r.VTX_DYNAMIC_READ:return t.DYNAMIC_READ;case r.VTX_STREAM_READ:return t.STREAM_READ;case r.VTX_STATIC_COPY:return t.STATIC_COPY;case r.VTX_DYNAMIC_COPY:return t.DYNAMIC_COPY;case r.VTX_STREAM_COPY:return t.STREAM_COPY;default:break}return t.STATIC_DRAW}static GetVBufTypeByNS(t){switch(t){case r.VBUF_VS_NS:return r.VBUF_VS;case r.VBUF_UVS_NS:return r.VBUF_UVS;case r.VBUF_NVS_NS:return r.VBUF_NVS;case r.VBUF_CVS_NS:return r.VBUF_CVS;case r.VBUF_VS2_NS:return r.VBUF_VS2;case r.VBUF_UVS2_NS:return r.VBUF_UVS2;case r.VBUF_NVS2_NS:return r.VBUF_NVS2;case r.VBUF_CVS2_NS:return r.VBUF_CVS2;case r.VBUF_TVS_NS:return r.VBUF_TVS;case r.VBUF_TVS2_NS:return r.VBUF_TVS2;default:}return-1}static GetVBufNSByType(t){switch(t){case r.VBUF_VS:return r.VBUF_VS_NS;case r.VBUF_UVS:return r.VBUF_UVS_NS;case r.VBUF_NVS:return r.VBUF_NVS_NS;case r.VBUF_CVS:return r.VBUF_CVS_NS;case r.VBUF_VS2:return r.VBUF_VS2_NS;case r.VBUF_UVS2:return r.VBUF_UVS2_NS;case r.VBUF_NVS2:return r.VBUF_NVS2_NS;case r.VBUF_CVS2:return r.VBUF_CVS2_NS;case r.VBUF_TVS:return r.VBUF_TVS_NS;case r.VBUF_TVS2:return r.VBUF_TVS2_NS;default:}return""}static GetVBufAttributeTypeByNS(t){return r.GetVBufTypeByNS(t)-3e3}}r.VTXTYPE_GL_POINTS=101,r.VTXTYPE_GL_LINES=102,r.VTXTYPE_GL_LINE_STRIP=103,r.VTXTYPE_GL_TRIANGLES=111,r.VTX_STATIC_DRAW=0,r.VTX_DYNAMIC_DRAW=1,r.VTX_STREAM_DRAW=2,r.VTX_STATIC_READ=3,r.VTX_DYNAMIC_READ=4,r.VTX_STREAM_READ=5,r.VTX_STATIC_COPY=6,r.VTX_DYNAMIC_COPY=7,r.VTX_STREAM_COPY=8,r.VBUF_VS=3001,r.VBUF_UVS=3002,r.VBUF_NVS=3003,r.VBUF_CVS=3004,r.VBUF_TVS=3005,r.VBUF_VS2=3006,r.VBUF_UVS2=3007,r.VBUF_NVS2=3008,r.VBUF_CVS2=3009,r.VBUF_TVS2=3010,r.VBUF_VS_INDEX=a.default.BIT_ONE_0,r.VBUF_UVS_INDEX=a.default.BIT_ONE_1,r.VBUF_NVS_INDEX=a.default.BIT_ONE_2,r.VBUF_CVS_INDEX=a.default.BIT_ONE_3,r.VBUF_TVS_INDEX=a.default.BIT_ONE_4,r.VBUF_VS2_INDEX=a.default.BIT_ONE_5,r.VBUF_UVS2_INDEX=a.default.BIT_ONE_6,r.VBUF_NVS2_INDEX=a.default.BIT_ONE_7,r.VBUF_CVS2_INDEX=a.default.BIT_ONE_8,r.VBUF_TVS2_INDEX=a.default.BIT_ONE_9,r.VBUF_VS_NS="a_vs",r.VBUF_VS2_NS="a_vs2",r.VBUF_UVS_NS="a_uvs",r.VBUF_UVS2_NS="a_uvs2",r.VBUF_NVS_NS="a_nvs",r.VBUF_NVS2_NS="a_nvs2",r.VBUF_CVS_NS="a_cvs",r.VBUF_CVS2_NS="a_cvs2",r.VBUF_TVS_NS="a_tvs",r.VBUF_TVS2_NS="a_tvs2";class l{}l.FLAT=210,l.GOURAND=310,e.VtxNormalType=l,e.default=r},"8d98":function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s("3b73")),r=i(s("030e"));class l{static ToGL(t,e){switch(e){case l.RGBA:break;case l.R8:return t.R8;case l.RGB:return t.RGB;case l.RGB8:return t.RGB8;case l.RGBA8:return t.RGBA8;case l.ALPHA:return t.ALPHA;case l.RGB16F:return a.default.IsWebGL2()?t.RGB16F:t.RGB;case l.RGBA16F:return a.default.IsWebGL2()?t.RGBA16F:t.RGBA;case l.RGB32F:return a.default.IsWebGL2()&&t.RGB32F,t.RGB;case l.RGBA32F:return a.default.IsWebGL2()&&t.RGBA32F,t.RGBA;case l.RED:return t.RED;case l.DEPTH_COMPONENT:return t.DEPTH_COMPONENT;case l.DEPTH_STENCIL:return t.DEPTH_STENCIL;default:break}return t.RGBA}}l.R8=101,l.RGB=110,l.RED=111,l.RGBA=121,l.RGB8=122,l.RGBA8=123,l.ALPHA=132,l.RGB16F=331,l.RGBA16F=332,l.RGB32F=341,l.RGBA32F=342,l.DEPTH_COMPONENT=351,l.DEPTH_STENCIL=352,e.TextureFormat=l;class _{static ToGL(t,e){switch(e){case _.UNSIGNED_BYTE:return t.UNSIGNED_BYTE;case _.BYTE:return t.BYTE;case _.FLOAT:return t.FLOAT;case _.HALF_FLOAT:return t.HALF_FLOAT;case _.HALF_FLOAT_OES:return null!=r.default.OES_texture_half_float?r.default.OES_texture_half_float.HALF_FLOAT_OES:t.FLOAT;case _.UNSIGNED_SHORT:return t.UNSIGNED_SHORT;case _.UNSIGNED_INT:return t.UNSIGNED_INT;case _.UNSIGNED_SHORT_5_6_5:return t.UNSIGNED_SHORT_5_6_5;case _.UNSIGNED_SHORT_4_4_4_4:return t.UNSIGNED_SHORT_4_4_4_4;case _.UNSIGNED_SHORT_5_5_5_1:return t.UNSIGNED_SHORT_5_5_5_1;case _.UNSIGNED_INT_24_8_WEBGL:return r.default.WEBGL_depth_texture.UNSIGNED_INT_24_8_WEBGL;default:break}return t.UNSIGNED_BYTE}}_.UNSIGNED_BYTE=1108,_.UNSIGNED_SHORT=1109,_.UNSIGNED_INT=1110,_.BYTE=1111,_.FLOAT=1211,_.HALF_FLOAT=1212,_.HALF_FLOAT_OES=1213,_.UNSIGNED_SHORT_5_6_5=1214,_.UNSIGNED_SHORT_4_4_4_4=1215,_.UNSIGNED_SHORT_5_5_5_1=1216,_.UNSIGNED_INT_24_8_WEBGL=1217,e.TextureDataType=_;class n{static GetValue(t,e){switch(e){case n.TEXTURE_2D:return t.TEXTURE_2D;case n.TEXTURE_2D_ARRAY:return t.TEXTURE_2D_ARRAY;case n.TEXTURE_CUBE:return t.TEXTURE_CUBE_MAP;case n.TEXTURE_3D:return t.TEXTURE_3D;default:break}return t.TEXTURE_2D}}n.TEXTURE_2D=20,n.TEXTURE_2D_ARRAY=22,n.TEXTURE_SHADOW_2D=23,n.TEXTURE_CUBE=25,n.TEXTURE_3D=30,e.TextureTarget=n,function(t){t[t["Default"]=0]="Default",t[t["Depth"]=1]="Depth",t[t["Wrapper"]=2]="Wrapper",t[t["RTT"]=3]="RTT",t[t["Image"]=4]="Image",t[t["Float"]=5]="Float",t[t["Uint16"]=6]="Uint16",t[t["FloatCube"]=7]="FloatCube",t[t["Bytes"]=8]="Bytes",t[t["BytesCube"]=9]="BytesCube",t[t["ImageCube"]=10]="ImageCube",t[t["Texture3D"]=11]="Texture3D"}(e.TextureProxyType||(e.TextureProxyType={}));class h{static GetConst(t,e){switch(e){case h.NEAREST:return t.NEAREST;case h.LINEAR:return t.LINEAR;case h.LINEAR_MIPMAP_LINEAR:return t.LINEAR_MIPMAP_LINEAR;case h.NEAREST_MIPMAP_NEAREST:return t.NEAREST_MIPMAP_NEAREST;case h.LINEAR_MIPMAP_NEAREST:return t.LINEAR_MIPMAP_NEAREST;case h.NEAREST_MIPMAP_LINEAR:return t.NEAREST_MIPMAP_LINEAR;case h.WRAP_REPEAT:return t.REPEAT;case h.WRAP_CLAMP_TO_EDGE:return t.CLAMP_TO_EDGE;case h.WRAP_MIRRORED_REPEAT:return t.MIRRORED_REPEAT;default:break}return-1}}h.WRAP_REPEAT=3001,h.WRAP_CLAMP_TO_EDGE=3002,h.WRAP_MIRRORED_REPEAT=3003,h.NEAREST=4001,h.LINEAR=4002,h.LINEAR_MIPMAP_LINEAR=4003,h.NEAREST_MIPMAP_NEAREST=4004,h.LINEAR_MIPMAP_NEAREST=4005,h.NEAREST_MIPMAP_LINEAR=4006,e.TextureConst=h},"8e17":function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s("6e01"));class r{constructor(t=0,e=0,s=0,i=1){this.x=0,this.y=0,this.z=0,this.w=0,this.x=t,this.y=e,this.z=s,this.w=i}setTo(t,e,s,i=1){this.x=t,this.y=e,this.z=s,this.w=i}setXYZ(t,e,s){this.x=t,this.y=e,this.z=s}copyFrom(t){this.x=t.x,this.y=t.y,this.z=t.z}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}multBy(t){this.x*=t.x,this.y*=t.y,this.z*=t.z}normalize(){let t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);t>a.default.MATH_MIN_POSITIVE&&(this.x/=t,this.y/=t,this.z/=t)}normalizeTo(t){let e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);e>a.default.MATH_MIN_POSITIVE?(t.x=this.x/e,t.y=this.y/e,t.z=this.z/e):(t.x=this.x,t.y=this.y,t.z=this.z)}scaleVector(t){this.x*=t.x,this.y*=t.y,this.z*=t.z}scaleBy(t){this.x*=t,this.y*=t,this.z*=t}negate(){this.x=-this.x,this.y=-this.y,this.z=-this.z}equalsXYZ(t){return Math.abs(this.x-t.x)<a.default.MATH_MIN_POSITIVE&&Math.abs(this.y-t.y)<a.default.MATH_MIN_POSITIVE&&Math.abs(this.z-t.z)<a.default.MATH_MIN_POSITIVE}equalsAll(t){return Math.abs(this.x-t.x)<a.default.MATH_MIN_POSITIVE&&Math.abs(this.y-t.y)<a.default.MATH_MIN_POSITIVE&&Math.abs(this.z-t.z)<a.default.MATH_MIN_POSITIVE&&Math.abs(this.w-t.w)<a.default.MATH_MIN_POSITIVE}project(){let t=1/this.w;this.x*=t,this.y*=t,this.z*=t}getLength(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}getLengthSquared(){return this.x*this.x+this.y*this.y+this.z*this.z}addBy(t){this.x+=t.x,this.y+=t.y,this.z+=t.z}subtractBy(t){this.x-=t.x,this.y-=t.y,this.z-=t.z}subtract(t){return new r(this.x-t.x,this.y-t.y,this.z-t.z)}add(t){return new r(this.x+t.x,this.y+t.y,this.z+t.z)}crossProduct(t){return new r(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)}crossBy(t){let e=this.y*t.z-this.z*t.y,s=this.z*t.x-this.x*t.z,i=this.x*t.y-this.y*t.x;this.x=e,this.y=s,this.z=i}reflectBy(t){let e=2*(this.x*t.x+this.y*t.y+this.z*t.z);this.x=this.x-e*t.x,this.y=this.y-e*t.y,this.z=this.z-e*t.z}scaleVecTo(t,e){this.x=t.x*e,this.y=t.y*e,this.z=t.z*e}subVecsTo(t,e){this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z}addVecsTo(t,e){this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z}crossVecsTo(t,e){this.x=t.y*e.z-t.z*e.y,this.y=t.z*e.x-t.x*e.z,this.z=t.x*e.y-t.y*e.x}toString(){return"[Vector3D(x="+this.x+", y="+this.y+",z="+this.z+",w="+this.w+")]"}static Cross(t,e,s){s.x=t.y*e.z-t.z*e.y,s.y=t.z*e.x-t.x*e.z,s.z=t.x*e.y-t.y*e.x}static CrossSubtract(t,e,s,i,a){r.__vtor3Stv0.x=e.x-t.x,r.__vtor3Stv0.y=e.y-t.y,r.__vtor3Stv0.z=e.z-t.z,r.__vtor3Stv1.x=i.x-s.x,r.__vtor3Stv1.y=i.y-s.y,r.__vtor3Stv1.z=i.z-s.z,t=r.__vtor3Stv0,s=r.__vtor3Stv1,a.x=t.y*s.z-t.z*s.y,a.y=t.z*s.x-t.x*s.z,a.z=t.x*s.y-t.y*s.x}static Subtract(t,e,s){s.x=t.x-e.x,s.y=t.y-e.y,s.z=t.z-e.z}static DistanceSquared(t,e){return r.__vtor3Stv0.x=t.x-e.x,r.__vtor3Stv0.y=t.y-e.y,r.__vtor3Stv0.z=t.z-e.z,r.__vtor3Stv0.getLengthSquared()}static DistanceXYZ(t,e,s,i,a,l){return r.__vtor3Stv0.x=t-i,r.__vtor3Stv0.y=e-a,r.__vtor3Stv0.z=s-l,r.__vtor3Stv0.getLength()}static Distance(t,e){return r.__vtor3Stv0.x=t.x-e.x,r.__vtor3Stv0.y=t.y-e.y,r.__vtor3Stv0.z=t.z-e.z,r.__vtor3Stv0.getLength()}static AngleBetween(t,e){return t.normalizeTo(r.__vtor3Stv0),e.normalizeTo(r.__vtor3Stv1),Math.acos(r.__vtor3Stv0.dot(r.__vtor3Stv1))*a.default.MATH_180_OVER_PI}static RadianBetween(t,e){return t.normalizeTo(r.__vtor3Stv0),e.normalizeTo(r.__vtor3Stv1),Math.acos(r.__vtor3Stv0.dot(r.__vtor3Stv1))}static RadianBetween2(t,e){let s=t.getLengthSquared(),i=e.getLengthSquared();return r.__vtor3Stv0.x=t.x-e.x,r.__vtor3Stv0.y=t.y-e.y,r.__vtor3Stv0.z=t.z-e.z,Math.acos((s+i-r.__vtor3Stv0.getLengthSquared())/(2*Math.sqrt(s)*Math.sqrt(i)))}static Reflect(t,e,s){let i=2*(t.x*e.x+t.y*e.y+t.z*e.z);s.x=t.x-i*e.x,s.y=t.y-i*e.y,s.z=t.z-i*e.z}}r.X_AXIS=new r(1,0,0),r.Y_AXIS=new r(0,1,0),r.Z_AXIS=new r(0,0,1),r.__vtor3Stv0=new r,r.__vtor3Stv1=new r,r.ZERO=new r,e.default=r},9156:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class i{static SetTransUniform(t,e){i.s_transMap.set(t.getUid(),e)}static GetTransUniform(t){if(t.getUid()<0)throw Error("mat.getUid() < 0");return i.s_transMap.has(t.getUid())?i.s_transMap.get(t.getUid()):null}static HasTransUniform(t){return i.s_transMap.has(t.getUid())}static RemoveTransUniform(t){i.s_transMap.delete(t.getUid())}}i.s_transMap=new Map,e.default=i},"91e2":function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s("8e17")),r=i(s("29ef")),l=i(s("402a")),_=i(s("f63e")),n=s("8a0a"),h=i(s("3bfb"));class u extends l.default{constructor(t=null){super(t),this.normalScale=1,this.m_normalType=n.VtxNormalType.FLAT,this.m_minV=null,this.m_maxV=null,this.m_transMatrix=null,this.m_currMesh=null,this.uvPartsNumber=0}setVtxTransformMatrix(t){this.m_transMatrix=t}useFlatNormal(){this.m_normalType=n.VtxNormalType.FLAT}useGourandNormal(){this.m_normalType=n.VtxNormalType.GOURAND}createMaterial(t){if(null==this.getMaterial()){let e=new _.default;e.setTextureList(t),this.setMaterial(e)}else this.getMaterial().setTextureList(t)}showBackFace(){this.setRenderState(r.default.BACK_CULLFACE_NORMAL_STATE)}showFrontFace(){this.setRenderState(r.default.FRONT_CULLFACE_NORMAL_STATE)}showAllFace(){this.setRenderState(r.default.NONE_CULLFACE_NORMAL_STATE)}scaleUVFaceAt(t,e,s,i,a){let r=this.getMesh();null!=r&&r.scaleUVFaceAt(t,e,s,i,a)}scaleUVSFaceAt(t,e){let s=this.getMesh();null!=s&&s.setFaceUVSAt(t,e)}reinitializeMesh(){null!=this.m_currMesh&&this.m_currMesh.reinitialize()}initialize(t,e,s=null){this.m_minV=t,this.m_maxV=e,this.createMaterial(s),this.activeDisplay()}initializeCube(t,e=null){t*=.5,this.m_minV=new a.default(-t,-t,-t),this.m_maxV=new a.default(t,t,t),this.createMaterial(e),this.activeDisplay()}initializeSizeXYZ(t,e,s,i=null){this.m_minV=new a.default(.5*-t,.5*-e,.5*-s),this.m_maxV=new a.default(.5*t,.5*e,.5*s),this.createMaterial(i),this.activeDisplay()}__activeMesh(t){if(this.m_currMesh=this.getMesh(),null==this.m_currMesh&&(this.m_currMesh=new h.default),null!=this.m_currMesh){let e=this.m_currMesh;null!=this.m_transMatrix&&e.setTransformMatrix(this.m_transMatrix),e.normalType=this.m_normalType,e.normalScale=this.normalScale,e.vbWholeDataEnabled=this.vbWholeDataEnabled,e.uvPartsNumber=this.uvPartsNumber,e.setBufSortFormat(t.getBufSortFormat()),e.initialize(this.m_minV,this.m_maxV),this.m_minV=null,this.m_maxV=null,this.setMesh(e),e.setTransformMatrix(null)}this.m_transMatrix=null}updateMesh(){this.m_currMesh=this.getMesh()}setFaceUVSAt(t,e,s=0){null!=this.m_currMesh&&this.m_currMesh.setFaceUVSAt(t,e,s)}transformFaceAt(t,e){null!=this.m_currMesh&&this.m_currMesh.transformFaceAt(t,e)}getFaceCenterAt(t,e){null!=this.m_currMesh&&this.m_currMesh.getFaceCenterAt(t,e)}toString(){return"[Box3DEntity(uid = "+this.getUid()+", rseFlag = "+this.__$rseFlag+")"}}e.default=u},9266:function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s("e7d2")),r=i(s("8a0a")),l=i(s("fecb")),_=i(s("cb29")),n=s("e08e");class h extends _.default{constructor(t=r.default.VTX_STATIC_DRAW){super(t),this.m_vs=null,this.m_uvs=null,this.flipVerticalUV=!1,this.vtxUVEnabled=!0}setUVSFloatArr(t){null==this.m_uvs&&(this.m_uvs=new Float32Array(8)),this.m_uvs.set(t,0)}setUVSArr(t){null==this.m_uvs&&(this.m_uvs=new Float32Array(8)),this.m_uvs.set(t,0)}initialize(t,e){if(null!=this.m_vs)return;let s=.5*t,i=.5*e,r=-s,_=-i;this.bounds=new l.default,this.bounds.min.setXYZ(r,_,r),this.bounds.max.setXYZ(s,i,s),this.bounds.updateFast(),this.m_ivs=new Uint16Array([1,2,0,3]),this.m_vs=new Float32Array([r,_,s,_,s,i,r,i]),a.default.Reset(),a.default.AddFloat32Data(this.m_vs,2),this.vtxUVEnabled&&(null==this.m_uvs&&(this.flipVerticalUV?this.m_uvs=new Float32Array([0,0,1,0,1,1,0,1]):this.m_uvs=new Float32Array([0,1,1,1,1,0,0,0])),a.default.AddFloat32Data(this.m_uvs,2)),a.default.vbWholeDataEnabled=this.vbWholeDataEnabled,this.m_vbuf=a.default.CreateBySaveData(this.getBufDataUsage()),this.m_vbuf.setUint16IVSData(this.m_ivs),this.vtCount=this.m_ivs.length,this.vtxTotal=4,this.trisNumber=2,this.drawMode=n.RenderDrawMode.ELEMENTS_TRIANGLE_STRIP,this.buildEnd()}setUV(t,e,s,i){null!=this.m_vbuf&&(this.m_vbuf.setData2fAt(0,1,t,e+i),this.m_vbuf.setData2fAt(1,1,t+s,e+i),this.m_vbuf.setData2fAt(2,1,t+s,e),this.m_vbuf.setData2fAt(3,1,t,e))}}e.default=h},9666:function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s("3b73")),r=i(s("acfe"));class l{static CreateShdData(t,e,s,i,_){if(l.s_shdDataDict.has(t))return l.s_shdDataDict.get(t);let n=new r.default;return n.adaptationShaderVersion=i,n.preCompileInfo=_,n.initialize(t,e,s),l.s_shdDataList[n.getUid()]=n,++l.s_shdDataListLen,l.s_shdDataDict.set(t,n),a.default.SHADERCODE_TRACE_ENABLED,n}static FindData(t){return l.s_shdDataDict.has(t)?l.s_shdDataDict.get(t):null}}l.s_shdDataDict=new Map,l.s_shdDataList=[],l.s_shdDataListLen=0,e.default=l},"9c3c":function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s("8e17")),r=i(s("38de")),l=i(s("fecb")),_=i(s("8a0a")),n=i(s("cb29")),h=i(s("e7d2")),u=s("e08e");class o extends n.default{constructor(t=_.default.VTX_STATIC_DRAW){super(t),this.m_vs=null,this.m_cvs=null,this.m_lsTotal=0,this.rayTestRadius=2}getVS(){return this.m_vs}getCVS(){return this.m_vs}initialize(t,e){t.length>=6&&(this.vtCount=Math.floor(t.length/3),this.m_lsTotal=Math.floor(this.vtCount/2),this.m_vs=new Float32Array(t),this.bounds=new l.default,this.bounds.addXYZFloat32Arr(this.m_vs),this.bounds.updateFast(),h.default.Reset(),h.default.AddFloat32Data(this.m_vs,3),this.isVBufEnabledAt(_.default.VBUF_CVS_INDEX)&&(this.m_cvs=new Float32Array(e),h.default.AddFloat32Data(this.m_cvs,3)),h.default.vbWholeDataEnabled=this.vbWholeDataEnabled,this.m_vbuf=h.default.CreateBySaveData(this.getBufDataUsage()),this.drawMode=u.RenderDrawMode.ARRAYS_LINES,this.buildEnd())}setVSXYZAt(t,e,s,i){null!=this.m_vbuf&&this.m_vbuf.setData3fAt(t,0,e,s,i)}toString(){return"DashedLineMesh()"}isPolyhedral(){return!1}testRay(t,e,s,i){let a=0,l=this.m_vs,_=0,n=this.rayTestRadius;for(let h=0;h<this.m_lsTotal;++h){if(o.s_pv0.setXYZ(l[a],l[a+1],l[a+2]),o.s_pv1.setXYZ(l[a+3],l[a+4],l[a+5]),_=r.default.IntersectionLS(t,e,o.s_pv0,o.s_pv1,s,n),_>0)return 1;a+=6}return 0}__$destroy(){this.isResFree()&&(this.bounds=null,this.m_vs=null,this.m_cvs=null,super.__$destroy())}}o.s_pv0=new a.default,o.s_pv1=new a.default,e.default=o},a254:function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s("faa5")),r=i(s("b3bd")),l=i(s("0fc4")),_=i(s("250c"));class n extends a.default{constructor(){super(),this.m_codeBuilder=new _.default,this.m_uniqueName="",this.m_hasTex=!1,this.mapLodEnabled=!1}initialize(t){this.m_uniqueName="ScreenPlaneShd",this.m_hasTex=t,t&&(this.m_uniqueName+="_tex",this.mapLodEnabled&&(this.m_uniqueName+="Lod"))}buildThisCode(){let t=this.m_codeBuilder;t.reset(),t.addVertLayout("vec3","a_vs"),this.m_hasTex?(t.mapLodEnabled=this.mapLodEnabled,t.addVertLayout("vec2","a_uvs"),t.addTextureSample2D(),t.addVarying("vec2","v_uv")):t.mapLodEnabled=!1,t.addFragOutput("vec4","FragColor0"),t.addFragUniform("vec4","u_param",3),t.useVertSpaceMats(!0,!1,!1),t.addFragFunction("")}getFragShaderCode(){return this.buildThisCode(),this.m_hasTex?this.m_codeBuilder.addFragMainCode("\nvoid main() {\n    #ifdef VOX_Texture2DLod\n    vec4 color4 = VOX_Texture2DLod(u_sampler0, v_uv, u_param[2].w);\n    #else\n    vec4 color4 = VOX_Texture2D(u_sampler0, v_uv);\n    #endif\n    color4 *= u_param[0];\n    color4 += u_param[1];\n    FragColor0 = color4;\n}\n"):this.m_codeBuilder.addFragMainCode("\nvoid main() {\n    FragColor0 = u_param[0] + u_param[1];\n}\n"),this.m_codeBuilder.buildFragCode()}getVtxShaderCode(){return this.m_hasTex?this.m_codeBuilder.addVertMainCode("\nvoid main() {\n    gl_Position = u_objMat * vec4(a_vs,1.0);\n    v_uv = a_uvs.xy;\n}\n"):this.m_codeBuilder.addVertMainCode("\nvoid main() {\n    gl_Position = u_objMat * vec4(a_vs,1.0);\n}\n"),this.m_codeBuilder.buildVertCode()}getUniqueShaderName(){return this.m_uniqueName}toString(){return"[ScreenPlaneShaderBuffer()]"}static GetInstance(){return null!=n.s_instance||(n.s_instance=new n),n.s_instance}}n.s_instance=null;class h extends l.default{constructor(){super(),this.mapLodEnabled=!1,this.m_param=new Float32Array([1,1,1,1,0,0,0,0,0,0,0,0])}getCodeBuf(){let t=n.GetInstance();return t.mapLodEnabled=this.mapLodEnabled,t}setRGB3f(t,e,s){this.m_param[0]=t,this.m_param[1]=e,this.m_param[2]=s}setRGBA4f(t,e,s,i){this.m_param[0]=t,this.m_param[1]=e,this.m_param[2]=s,this.m_param[3]=i}setOffsetRGB3f(t,e,s){this.m_param[0]=t,this.m_param[1]=e,this.m_param[2]=s}setOffsetRGBA4f(t,e,s,i){this.m_param[0]=t,this.m_param[1]=e,this.m_param[2]=s,this.m_param[3]=i}setTextureLodLevel(t){this.m_param[11]=t}createSelfUniformData(){let t=new r.default;return t.uniformNameList=["u_param"],t.dataList=[this.m_param],t}}e.default=h},a996:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class i{constructor(){this.uuid="",this.phase=0,this.type=i.RESIZE,this.target=null,this.data=null,this.__$preventBoo=!1}getClassType(){return i.EventClassType}preventDefault(){this.__$preventBoo=!0}reset(){this.__$preventBoo=!1}toString(){return"[EventBase]"}}i.EventClassType=1001,i.RESIZE=3001,i.ENTER_FRAME=3002,e.default=i},abdb:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class i{}i.AXIS_ANGLE=0,i.QUATERNION=1,i.EULER_ANGLES=2,e.default=i},acfe:function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s("ca6c")),r=i(s("8a0a")),l=i(s("3b73")),_=i(s("81ce")),n=i(s("fc07"));class h{constructor(){this.m_uid=-1,this.adaptationShaderVersion=!0,this.preCompileInfo=null,this.m_vshdCode="",this.m_fshdCode="",this.m_shdUniqueName="",this.m_texTotal=0,this.m_uniforms=null,this.m_useTex=!1,this.m_attriNSList=null,this.m_attriSizeList=null,this.m_aLocationTypes=null,this.m_uniformDict=new Map,this.m_haveCommonUniform=!1,this.m_layoutBit=0,this.m_mid=0,this.m_fragOutputTotal=1,this.m_texUniformNames=null,this.dataUniformEnabled=!1,this.m_uid=h.s_uid++}getVSCodeStr(){return this.m_vshdCode}getFSCodeStr(){return this.m_fshdCode}getLayoutBit(){return this.m_layoutBit}getMid(){return this.m_mid}getFragOutputTotal(){return this.m_fragOutputTotal}parseCode(t,e){h.s_codeParser.reset(),h.s_codeParser.parseVShaderCode(t),h.s_codeParser.parseFShaderCode(e),this.m_fragOutputTotal=h.s_codeParser.fragOutputTotal,this.m_uniforms=h.s_codeParser.m_uniforms}initialize(t,e,s){this.m_shdUniqueName=t,this.adaptationShaderVersion&&null==this.preCompileInfo&&l.default.IsWebGL1()&&(e=_.default.Es3VtxShaderToES2(e),s=_.default.Es3FragShaderToES2(s)),this.preCompileInfo,this.parseCode(e,s);let i=h.s_codeParser.attributes,n=0,u=i.length,o=null;this.m_attriNSList=[],this.m_attriSizeList=[],this.m_layoutBit=0;let m=31;while(n<u){if(o=i[n],null!=o)switch(this.m_attriNSList.push(o.name),this.m_attriSizeList.push(o.typeSize),r.default.GetVBufTypeByNS(o.name)){case r.default.VBUF_VS:m+=131*m+1,this.m_layoutBit|=a.default.BIT_ONE_0;break;case r.default.VBUF_UVS:m+=131*m+2,this.m_layoutBit|=a.default.BIT_ONE_1;break;case r.default.VBUF_NVS:m+=131*m+3,this.m_layoutBit|=a.default.BIT_ONE_2;break;case r.default.VBUF_CVS:m+=131*m+4,this.m_layoutBit|=a.default.BIT_ONE_3;break;case r.default.VBUF_TVS:m+=131*m+5,this.m_layoutBit|=a.default.BIT_ONE_4;break;case r.default.VBUF_VS2:m+=131*m+6,this.m_layoutBit|=a.default.BIT_ONE_5;break;case r.default.VBUF_UVS2:m+=131*m+7,this.m_layoutBit|=a.default.BIT_ONE_6;break;case r.default.VBUF_NVS2:m+=131*m+8,this.m_layoutBit|=a.default.BIT_ONE_7;break;case r.default.VBUF_CVS2:m+=131*m+9,this.m_layoutBit|=a.default.BIT_ONE_8;break;case r.default.VBUF_TVS2:m+=131*m+11,this.m_layoutBit|=a.default.BIT_ONE_9;break;default:break}++n}this.m_mid=m,this.m_texTotal=h.s_codeParser.texTotal,this.m_useTex=this.m_texTotal>0,this.m_useTex&&(this.m_texUniformNames=h.s_codeParser.texUniformNameListStr.split(",")),this.m_haveCommonUniform=this.m_texTotal<this.m_uniforms.length,this.m_vshdCode=e,this.m_fshdCode=s,this.m_shdUniqueName=t}getAttriSizeList(){return this.m_attriSizeList}getTexUniformNames(){return this.m_texUniformNames}getUniforms(){return this.m_uniforms}haveCommonUniform(){return this.m_haveCommonUniform}getAttriNSList(){return this.m_attriNSList}getUid(){return this.m_uid}getTexTotal(){return this.m_texTotal}haveTexture(){return this.m_useTex}getLocationsTotal(){return this.m_aLocationTypes.length}getUniformTypeNameByNS(t){let e=this.m_uniformDict.get(t);return null!=e?e.typeName:""}getUniformTypeByNS(t){let e=this.m_uniformDict.get(t);return null!=e?e.type:0}hasUniformByName(t){return this.m_uniformDict.has(t)}getUniformLengthByNS(t){return this.m_uniformDict.has(t)&&this.m_uniformDict.get(t).arrLength,0}getUniqueShaderName(){return this.m_shdUniqueName}destroy(){this.m_texTotal=0}}h.s_uid=0,h.s_codeParser=new n.default,e.default=h},b3bd:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class i{constructor(){this.uns="",this.types=null,this.uniformSize=0,this.uniformNameList=null,this.locations=null,this.dataList=null,this.calcModels=null,this.always=!0,this.next=null}getDataRefFromUniformName(t){if(null!=this.uniformNameList){let e=this.uniformNameList,s=e.length;for(let i=0;i<s;++i)if(t==e[i])return this.dataList[i]}return null}setDataRefFromUniformName(t,e){if(null!=this.uniformNameList){let s=this.uniformNameList,i=s.length;for(let a=0;a<i;++a)if(t==s[a]){this.dataList[a]=e;break}}}copyDataFromProbe(t){this.types=[];for(let e=0;e<t.uniformsTotal;++e)this.types.push(t.uniformTypes[e]);this.uniformSize=t.uniformsTotal}destroy(){let t=0,e=this.dataList.length;for(;t<e;++t)this.dataList[t]=null;if(null!=this.calcModels)for(e=this.calcModels.length,t=0;t<e;++t)this.calcModels[t].destroy(),this.calcModels[t]=null;this.dataList=null,this.types=null,this.locations=null,this.calcModels=null}}e.default=i},b8ff:function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s("402a")),r=i(s("f63e")),l=i(s("f152")),_=i(s("29ef"));class n extends a.default{constructor(t=null){super(t),this.doubleTriFaceEnabled=!1,this.m_radius=50,this.m_longitudeNumSegments=10,this.m_latitudeNumSegments=10}showBackFace(){this.setRenderState(_.default.NORMAL_STATE)}showFrontFace(){this.setRenderState(_.default.FRONT_CULLFACE_NORMAL_STATE)}showDoubleFace(t=!1,e=!0){t?e?this.setRenderState(_.default.NONE_CULLFACE_NORMAL_ALWAYS_STATE):this.setRenderState(_.default.BACK_NORMAL_ALWAYS_STATE):e?this.setRenderState(_.default.NONE_CULLFACE_NORMAL_STATE):this.setRenderState(_.default.NORMAL_STATE)}toTransparentBlend(t=!1,e=!1){t?e?this.setRenderState(_.default.NONE_TRANSPARENT_ALWAYS_STATE):this.setRenderState(_.default.BACK_TRANSPARENT_ALWAYS_STATE):e?this.setRenderState(_.default.NONE_TRANSPARENT_STATE):this.setRenderState(_.default.BACK_TRANSPARENT_STATE)}toBrightnessBlend(t=!1,e=!1){t?e?this.setRenderState(_.default.NONE_ADD_ALWAYS_STATE):this.setRenderState(_.default.BACK_ADD_ALWAYS_STATE):e?this.setRenderState(_.default.NONE_ADD_BLENDSORT_STATE):this.setRenderState(_.default.BACK_ADD_BLENDSORT_STATE)}createMaterial(t){if(null==this.getMaterial()){let e=new r.default;e.setTextureList(t),this.setMaterial(e)}else null!=t&&this.getMaterial().setTextureList(t)}initializeFrom(t,e=null){this.copyMeshFrom(t),this.copyMaterialFrom(t),this.createMaterial(e),this.activeDisplay()}initialize(t,e,s,i=null){this.m_radius=t,this.m_longitudeNumSegments=e,this.m_latitudeNumSegments=s,this.createMaterial(i),this.activeDisplay()}__activeMesh(t){if(null==this.getMesh()){let e=new l.default;e.vbWholeDataEnabled=this.vbWholeDataEnabled,e.setBufSortFormat(t.getBufSortFormat()),e.initialize(this.m_radius,this.m_longitudeNumSegments,this.m_latitudeNumSegments,this.doubleTriFaceEnabled),this.setMesh(e)}}toString(){return"[Sphere3DEntity(uid = "+this.getUid()+", rseFlag = "+this.__$rseFlag+")]"}}e.default=n},b9b5:function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s("9c3c")),r=i(s("402a")),l=i(s("3930")),_=i(s("32cc"));class n extends r.default{constructor(){super(),this.rayTestRadius=8,this.colorX=new l.default(1,0,0,1),this.colorY=new l.default(0,1,0,1),this.colorZ=new l.default(0,0,1,1),this.m_posarr=[0,0,0,100,0,0,0,0,0,0,100,0,0,0,0,0,0,100]}setLineWidth(t){}createMaterial(){if(null==this.getMaterial()){let t=new _.default;this.setMaterial(t)}}__activeMesh(t){if(null==this.getMesh()){let e=[this.colorX.r,this.colorX.g,this.colorX.b,this.colorX.r,this.colorX.g,this.colorX.b,this.colorY.r,this.colorY.g,this.colorY.b,this.colorY.r,this.colorY.g,this.colorY.b,this.colorZ.r,this.colorZ.g,this.colorZ.b,this.colorZ.r,this.colorZ.g,this.colorZ.b],s=new a.default;s.rayTestRadius=this.rayTestRadius,s.vbWholeDataEnabled=!1,s.setBufSortFormat(t.getBufSortFormat()),s.initialize(this.m_posarr,e),this.setMesh(s)}}initialize(t=100){t<2&&(t=2),this.m_posarr[3]=t,this.m_posarr[10]=t,this.m_posarr[17]=t,this.createMaterial(),this.activeDisplay()}initializeSizeXYZ(t,e,s){this.m_posarr[3]=t,this.m_posarr[10]=e,this.m_posarr[17]=s,this.createMaterial(),this.activeDisplay()}initializeCorssSizeXYZ(t,e,s){t*=.5,e*=.5,s*=.5,this.m_posarr[0]=-t,this.m_posarr[7]=-e,this.m_posarr[14]=-s,this.m_posarr[3]=t,this.m_posarr[10]=e,this.m_posarr[17]=s,this.createMaterial(),this.activeDisplay()}initializeCross(t=100){t<2&&(t=2),t*=.5,this.m_posarr[0]=-t,this.m_posarr[7]=-t,this.m_posarr[14]=-t,this.m_posarr[3]=t,this.m_posarr[10]=t,this.m_posarr[17]=t,this.createMaterial(),this.activeDisplay()}toString(){return"Axis3DEntity(name="+this.name+",uid = "+this.getUid()+", rseFlag = "+this.__$rseFlag+")"}}e.default=n},bbd2:function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s("29ef")),r=i(s("402a")),l=i(s("6098")),_=i(s("9266"));class n extends r.default{constructor(t=null){super(t),this.m_brightnessEnabled=!0,this.m_alphaEnabled=!1,this.flipVerticalUV=!1,this.m_bw=0,this.m_bh=0,this.m_currMaterial=null,this.m_billMesh=null,this.setRenderState(a.default.BACK_ADD_BLENDSORT_STATE)}setRGB3f(t,e,s){null!=this.m_currMaterial&&this.m_currMaterial.setRGB3f(t,e,s)}setRGBOffset3f(t,e,s){null!=this.m_currMaterial&&this.m_currMaterial.setRGBOffset3f(t,e,s)}setFadeFactor(t){null!=this.m_currMaterial&&this.m_currMaterial.setFadeFactor(t)}getFadeFactor(){return this.m_currMaterial.getFadeFactor()}getRotationZ(){return this.m_currMaterial.getRotationZ()}setRotationZ(t){this.m_currMaterial.setRotationZ(t)}getScaleX(){return this.m_currMaterial.getScaleX()}getScaleY(){return this.m_currMaterial.getScaleY()}setScaleX(t){this.m_currMaterial.setScaleX(t)}setScaleY(t){this.m_currMaterial.setScaleY(t)}setScaleXY(t,e){this.m_currMaterial.setScaleXY(t,e)}createMaterial(t){null==this.getMaterial()?(this.m_currMaterial=new l.default(this.m_brightnessEnabled,this.m_alphaEnabled),this.m_currMaterial.setTextureList(t),this.setMaterial(this.m_currMaterial)):(this.m_currMaterial=this.getMaterial(),this.m_currMaterial.setTextureList(t))}toTransparentBlend(t=!1){this.m_brightnessEnabled=!1,this.m_alphaEnabled=!0,t?this.setRenderState(a.default.BACK_TRANSPARENT_STATE):this.setRenderState(a.default.BACK_TRANSPARENT_ALWAYS_STATE)}toBrightnessBlend(t=!1){this.m_brightnessEnabled=!0,this.m_alphaEnabled=!1,this.setRenderState(a.default.BACK_ADD_BLENDSORT_STATE)}initializeSquare(t,e){this.m_bw=t,this.m_bh=t,this.createMaterial(e),this.activeDisplay()}initialize(t,e,s){this.m_bw=t,this.m_bh=e,this.createMaterial(s),this.activeDisplay()}createBounds(){}__activeMesh(t){if(null==this.getMesh()){let e=new _.default;e.vbWholeDataEnabled=this.vbWholeDataEnabled,e.flipVerticalUV=this.flipVerticalUV,e.setBufSortFormat(t.getBufSortFormat()),e.initialize(this.m_bw,this.m_bh),this.setMesh(e),this.m_billMesh=e}}setUV(t,e,s,i){null!=this.m_billMesh&&this.m_billMesh.setUV(t,e,s,i)}update(){this.m_transfrom.update()}destroy(){this.m_currMaterial=null,this.m_billMesh=null,super.destroy()}toString(){return"Billboard3DEntity(uid = "+this.getUid()+", rseFlag = "+this.__$rseFlag+")"}}e.default=n},bd6f:function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s("29ef")),r=i(s("402a")),l=i(s("f63e")),_=i(s("a254")),n=i(s("76b0")),h=i(s("3930"));class u extends r.default{constructor(t=null){super(t),this.m_startX=0,this.m_startZ=0,this.m_pwidth=0,this.m_plong=0,this.m_flag=0,this.m_screenAlignEnabled=!1,this.color0=new h.default,this.color1=new h.default,this.color2=new h.default,this.color3=new h.default,this.offsetU=0,this.offsetV=0,this.uScale=1,this.vScale=1,this.uvs=null,this.flipVerticalUV=!1,this.vtxColorEnabled=!1,this.premultiplyAlpha=!1}setScreenAlignEnable(t){this.m_screenAlignEnabled=t}createMaterial(t){if(null==this.getMaterial())if(this.m_screenAlignEnabled){let e=new _.default;e.setTextureList(t),this.setMaterial(e)}else{let e=new l.default;e.vtxColorEnabled=this.vtxColorEnabled,e.premultiplyAlpha=this.premultiplyAlpha,e.setTextureList(t),this.setMaterial(e)}else null!=t&&this.getMaterial().getTextureTotal()<1&&this.getMaterial().setTextureList(t)}showDoubleFace(t=!1,e=!0){t?e?this.setRenderState(a.default.NONE_CULLFACE_NORMAL_ALWAYS_STATE):this.setRenderState(a.default.BACK_NORMAL_ALWAYS_STATE):e?this.setRenderState(a.default.NONE_CULLFACE_NORMAL_STATE):this.setRenderState(a.default.NORMAL_STATE)}toTransparentBlend(t=!1,e=!1){t?e?this.setRenderState(a.default.NONE_TRANSPARENT_ALWAYS_STATE):this.setRenderState(a.default.BACK_TRANSPARENT_ALWAYS_STATE):e?this.setRenderState(a.default.NONE_TRANSPARENT_STATE):this.setRenderState(a.default.BACK_TRANSPARENT_STATE)}toBrightnessBlend(t=!1,e=!1){t?e?this.setRenderState(a.default.NONE_ADD_ALWAYS_STATE):this.setRenderState(a.default.BACK_ADD_ALWAYS_STATE):e?this.setRenderState(a.default.NONE_ADD_BLENDSORT_STATE):this.setRenderState(a.default.BACK_ADD_BLENDSORT_STATE)}initializeFixScreen(t=null){this.initializeXOY(-1,-1,2,2,t)}initializeXOY(t,e,s,i,a=null){this.m_startX=t,this.m_startZ=e,this.m_pwidth=s,this.m_plong=i,this.m_flag=0,this.createMaterial(a),this.activeDisplay()}initializeXOYSquare(t,e=null){this.m_startX=-.5*t,this.m_startZ=-.5*t,this.m_pwidth=t,this.m_plong=t,this.m_flag=0,this.createMaterial(e),this.activeDisplay()}initializeXOZ(t,e,s,i,a=null){this.m_flag=1,this.m_startX=t,this.m_startZ=e,this.m_pwidth=s,this.m_plong=i,this.createMaterial(a),this.activeDisplay()}initializeYOZ(t,e,s,i,a=null){this.m_flag=2,this.m_startX=t,this.m_startZ=e,this.m_pwidth=s,this.m_plong=i,this.createMaterial(a),this.activeDisplay()}initializeXOZSquare(t,e=null){this.m_flag=1,this.m_startX=-.5*t,this.m_startZ=-.5*t,this.m_pwidth=t,this.m_plong=t,this.createMaterial(e),this.activeDisplay()}__activeMesh(t){if(null==this.getMesh()){let e=new n.default;e.color0.copyFrom(this.color0),e.color1.copyFrom(this.color1),e.color2.copyFrom(this.color2),e.color3.copyFrom(this.color3),e.setUVS(this.uvs),this.uvs=null,e.uScale=this.uScale,e.vScale=this.vScale,e.offsetU=this.offsetU,e.offsetV=this.offsetV,e.flipVerticalUV=this.flipVerticalUV,e.vbWholeDataEnabled=this.vbWholeDataEnabled,e.axisFlag=this.m_flag,e.setBufSortFormat(t.getBufSortFormat()),e.initialize(this.m_startX,this.m_startZ,this.m_pwidth,this.m_plong),this.setMesh(e)}}setUVS(t){let e=this.getMesh();null!=e&&e.setUVS(t)}reinitializeMesh(){let t=this.getMesh();null!=t&&t.reinitialize()}toString(){return"[Plane3DEntity]"}}e.default=u},c217:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class i{constructor(){this.m_brnAStatus=0}getBrnAlphaStatus(){return this.m_brnAStatus}setBrightnessAndAlpha(t,e){this.m_brnAStatus=10*Number(t)+Number(e)}getBrnAndAlphaCode(t="v_texUV"){let e;return e=11==this.m_brnAStatus?"\ncolor.rgb = color.rgb * v_colorMult.xyz + color.aaa * offsetColor;\ncolor *= "+t+".zzzz;\n":10==this.m_brnAStatus?"\ncolor.rgb = min(color.rgb * v_colorMult.xyz + color.rgb * offsetColor, vec3(1.0));\ncolor.rgb *= "+t+".zzz;\n":1==this.m_brnAStatus?"\ncolor.rgb = color.rgb * v_colorMult.xyz + color.aaa * offsetColor;\ncolor.a *= "+t+".z;\n":"\ncolor.rgb = color.rgb * v_colorMult.xyz + offsetColor;\ncolor.a *= "+t+".z;\n",e}getMixThreeColorsCode(){let t="\nvec4 mixThreeColors(vec4 color0,vec4 color1,vec4 color2,float t)\n{\nfloat k0 = max(1.0 - 2.0 * t, 0.0);\nfloat k = max(t - 0.5, 0.0);\nfloat k1 = (1.0 - (2.0 * k)) * step(-0.00001,k);\nk = step(0.00001,k0);\nreturn mix(mix(color2,color1,k1), mix(color1,color0,k0), k);\n}\n";return t}getOffsetColorCode(t,e,s=!1){let i;return i=e?s?"\nvec3 offsetColor = clamp(v_colorOffset.xyz + texture(u_sampler"+t+", v_uv.xy).xyz,vec3(0.0),vec3(1.0));\n":"\nvec3 offsetColor = clamp(v_colorOffset.xyz + texture(u_sampler"+t+", v_texUV.xy).xyz,vec3(0.0),vec3(1.0));\n":"\nvec3 offsetColor = v_colorOffset.xyz;\n",i}}e.default=i},ca6c:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class i{static PushThreeBitValueToInt(t,e){return(t<<3)+e}static PopThreeBitValueFromInt(t){return i.value=7&t,t>>3}static ContainsBit(t,e){return(e&t)>0}static RemoveBit(t,e){return~e&t}static AddBit(t,e){return e|t}static AssembleFromIntArray(t){let e=0,s=0,i=t.length;for(;e<i;++e)t[e]>0&&(s|=1<<e);return s}}i.BIT_ZERO=0,i.BIT_ONE_0=1,i.BIT_ONE_1=2,i.BIT_ONE_2=4,i.BIT_ONE_3=8,i.BIT_ONE_4=16,i.BIT_ONE_5=32,i.BIT_ONE_6=64,i.BIT_ONE_7=128,i.BIT_ONE_8=256,i.BIT_ONE_9=512,i.BIT_ONE_10=1024,i.BIT_ONE_11=2048,i.value=0,e.default=i},cb29:function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s("8a0a")),r=s("8a0a"),l=i(s("e7d2")),_=s("e08e");class n{constructor(t=a.default.VTX_STATIC_DRAW){this.m_bufDataUsage=0,this.m_layoutBit=0,this.m_transMatrix=null,this.m_vbuf=null,this.m_ivs=null,this.m_bufDataList=null,this.m_bufDataStepList=null,this.m_bufStatusList=null,this.bounds=null,this.normalType=r.VtxNormalType.GOURAND,this.normalScale=1,this.vtxTotal=0,this.trisNumber=0,this.drawMode=_.RenderDrawMode.ELEMENTS_TRIANGLES,this.vtCount=0,this.vbWholeDataEnabled=!1,this.drawInsBeginIndex=0,this.drawInsStride=0,this.drawInsTotal=0,this.m_attachCount=0,this.m_bufDataUsage=t}buildEnd(){this.m_bufDataList=l.default.BufDataList,this.m_bufDataStepList=l.default.BufDataStepList,this.m_bufStatusList=l.default.BufStatusList}setTransformMatrix(t){this.m_transMatrix=t}getTransformMatrix(){return this.m_transMatrix}isPolyhedral(){return!0}setPolyhedral(t){}testRay(t,e,s,i){return-1}rebuild(){if(null==this.m_vbuf&&null!=this.m_bufDataList){l.default.Reset();let t=0,e=this.m_bufDataList.length;for(;t<e;++t)l.default.AddFloat32Data(this.m_bufDataList[t],this.m_bufDataStepList[t],this.m_bufStatusList[t]);this.m_vbuf=l.default.CreateBySaveData(this.getBufDataUsage()),null!=this.m_ivs&&(this.m_vbuf.setUint16IVSData(this.m_ivs),this.vtCount=this.m_ivs.length)}}__$attachVBuf(){return null==this.m_vbuf&&this.rebuild(),l.default.__$$AttachAt(this.m_vbuf.getUid()),this.m_vbuf}__$detachVBuf(t){if(this.m_vbuf!=t)throw Error("Fatal Error!");l.default.__$$DetachAt(this.m_vbuf.getUid())}isGeomDynamic(){return this.m_bufDataUsage}getBufDataUsage(){return this.m_bufDataUsage}getVS(){return null}getIVS(){return this.m_ivs}setBufSortFormat(t){this.m_layoutBit=t}getBufSortFormat(){return this.m_layoutBit}isVBufEnabledAt(t){return(t&this.m_layoutBit)>0}__$attachThis(){++this.m_attachCount}__$detachThis(){1==this.m_attachCount?(--this.m_attachCount,this.__$dispose()):--this.m_attachCount,this.m_attachCount<1&&(this.m_attachCount=0)}getAttachCount(){return this.m_attachCount}__$dispose(){this.getAttachCount()<1&&null!=this.m_vbuf&&(l.default.__$$DetachAt(this.m_vbuf.getUid()),this.m_vbuf=null)}isEnabled(){return null!=this.m_vbuf}isResFree(){return this.getAttachCount()<1&&null==this.m_vbuf}__$destroy(){this.isResFree()&&(this.m_ivs=null,this.m_bufDataList=null,this.m_bufDataStepList=null,this.m_bufStatusList=null,this.trisNumber=0,this.m_transMatrix=null)}toString(){return"[MeshBase()]"}}e.default=n},cc48:function(t,e,s){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t["NONE"]=0]="NONE",t[t["CAMERA"]=1]="CAMERA",t[t["POV"]=2]="POV",t[t["INNER_POV_PASS"]=3]="INNER_POV_PASS",t[t["CAMERA_AND_POV"]=4]="CAMERA_AND_POV"}(i||(i={})),e.default=i},d1a0:function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s("6e01"));class r{static PlaneCalcIntersectSphere(t,e,s,i){r.IntersectBoo=!1,r.IntersectSatus=0,e=t.dot(s)-e,e>a.default.MATH_MIN_POSITIVE?(r.IntersectBoo=e<=i,r.IntersectSatus=1):e<a.default.MATH_MAX_NEGATIVE&&(r.IntersectBoo=-e<=i,r.IntersectSatus=-1)}static CalcPVCloseV(t,e,s,i){let a=e-s.dot(t);i.setTo(a*t.x,a*t.y,a*t.z),i.addBy(s)}static CalcPVCloseV2(t,e,s,i){let a=e-s.dot(t);i.setTo(a*t.x,a*t.y,a*t.z),i.addBy(s)}static IntersectionSLV2(t,e,s,i,r){let l=t.dot(i);if(l>a.default.MATH_MIN_POSITIVE||l<a.default.MATH_MAX_NEGATIVE){let a=t.dot(s)-e;return r.x=1e5*i.x+s.x,r.y=1e5*i.y+s.y,r.z=1e5*i.z+s.z,l=t.dot(r)-e,l=a/(a-l),r.subtractBy(s),r.scaleBy(l),r.addBy(s),1}return l=t.dot(s)-e,l<=a.default.MATH_MIN_POSITIVE||l>=a.default.MATH_MAX_NEGATIVE?(r.copyFrom(s),2):0}}r.IntersectBoo=!1,r.IntersectSatus=0,e.default=r},da6a:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class i{constructor(){if(this.m_texResource=null,this.m_bufferUpdater=null,this.m_textureTotal=0,this.m_textureMap=new Map,this.m_freeMap=new Map,this.m_texUid=0,this.m_freeUids=[],null!=i.s_ins)throw Error("This Class is a singleton class!!!");i.s_ins=null}static GetInstance(){return null!=i.s_ins||(i.s_ins=new i),i.s_ins}getFreeUid(){if(this.m_freeUids.length>0)return this.m_freeUids.pop();let t=this.m_texUid++;return t}__$$addTexture(t){null==t||this.m_textureMap.has(t.getUid())||(this.m_textureMap.set(t.getUid(),t),this.m_textureTotal++)}getTextureByUid(t){return this.m_textureMap.get(t)}hasTextureByUid(t){return this.m_textureMap.has(t)}removeTextureByUid(t){if(this.m_textureMap.has(t)){let e=this.m_textureMap.get(t);if(e.getAttachCount()<1)return this.m_freeMap.has(t)&&this.m_freeMap.delete(t),e.__$destroy(),e.__$$removeFromSlot(),this.m_textureMap.delete(t),this.m_freeUids.push(t),this.m_textureTotal--,e}return null}getTextureTotal(){return this.m_textureTotal}setRenderProxy(t){this.m_texResource=t.Texture}setBufferUpdater(t){this.m_bufferUpdater=t}getFreeResUidMap(){return this.m_freeMap}isGpuEnabledByResUid(t){return this.m_texResource.hasResUid(t)}addRenderBuffer(t,e){null!=this.m_bufferUpdater&&this.m_bufferUpdater.__$addBuf(t,e)}addFreeUid(t){this.m_freeMap.set(t,0)}removeFreeUid(t){this.m_freeMap.has(t)&&this.m_freeMap.delete(t)}}i.s_ins=null,e.default=i},dc2b:function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=s("e08e"),r=i(s("29ef"));class l{constructor(){this.m_uid=0,this.m_material=null,this.m_matFS32=null,this.name="RODisplay",this.visible=!0,this.ivsIndex=0,this.ivsCount=0,this.trisNumber=0,this.insCount=0,this.drawMode=a.RenderDrawMode.ELEMENTS_TRIANGLES,this.vbuf=null,this.renderState=r.default.NORMAL_STATE,this.rcolorMask=r.default.COLOR_MASK_ALL_TRUE,this.mouseEnabled=!1,this.m_partGroup=null,this.m_trans=null,this.__$ruid=-1,this.__$rpuid=-1,this.__$$rsign=a.DisplayRenderSign.NOT_IN_WORLD,this.__$$runit=null,this.m_uid=l.s_uid++}getPartGroup(){return this.m_partGroup}createPartGroup(t){t<1&&(t=1),this.m_partGroup=new Uint16Array(2*t)}setDrawPartAt(t,e,s){t*=2,this.m_partGroup[t]=s,this.m_partGroup[++t]=e}getUid(){return this.m_uid}setTransform(t){this.m_trans=t,this.m_matFS32=t.getLocalFS32()}getTransform(){return this.m_trans}getMatrixFS32(){return this.m_matFS32}enableDrawInstanced(t,e){this.drawMode=a.RenderDrawMode.ELEMENTS_INSTANCED_TRIANGLES,this.ivsIndex=t,this.insCount=e}disableDrawInstanced(){this.drawMode=a.RenderDrawMode.ELEMENTS_TRIANGLES}getMaterial(){return this.m_material}setMaterial(t){null!=this.m_material&&this.m_material!=t&&(this.m_material.__$detachThis(),null!=t&&t.__$attachThis()),this.m_material=t}copyFrom(t){this.vbuf=t.vbuf,this.ivsIndex=t.ivsIndex,this.ivsCount=t.ivsCount,this.setMaterial(t.getMaterial())}toString(){return"RODisplay(name="+this.name+",uid="+this.getUid()+", __$ruid="+this.__$ruid+")"}destroy(){null!=this.m_material&&(this.m_material.__$detachThis(),this.m_material.destroy(),this.m_material=null),this.m_matFS32=null,this.vbuf=null,this.__$ruid=-1,this.__$rpuid=-1,this.__$$rsign=a.DisplayRenderSign.NOT_IN_WORLD,this.ivsIndex=0,this.ivsCount=0,this.m_partGroup=null,this.__$$runit=null}static GetFreeId(){return l.m_freeIdList.length>0?l.m_freeIdList.pop():-1}static GetByUid(t){return l.m_unitList[t]}static IsEnabledByUid(t){return l.m_unitFlagList[t]==l.S_FLAG_BUSY}static Create(){let t=null,e=l.GetFreeId();return e>=0?(t=l.m_unitList[e],l.m_unitFlagList[e]=l.S_FLAG_BUSY):(t=new l,l.m_unitList.push(t),l.m_unitFlagList.push(l.S_FLAG_BUSY),l.m_unitListLen++),t}static Restore(t){if(null!=t&&l.m_unitFlagList[t.getUid()]==l.S_FLAG_BUSY){let e=t.getUid();l.m_freeIdList.push(e),l.m_unitFlagList[e]=l.S_FLAG_FREE,t.destroy()}}}l.s_uid=0,l.S_FLAG_BUSY=1,l.S_FLAG_FREE=0,l.m_unitFlagList=[],l.m_unitListLen=0,l.m_unitList=[],l.m_freeIdList=[],e.default=l},dc7a:function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s("faa5")),r=i(s("0fc4"));class l extends a.default{constructor(){super(),this.codeWrapper=null}initialize(t){this.adaptationShaderVersion=!1,this.codeWrapper.initialize()}getFragShaderCode(){return this.codeWrapper.getFragShaderCode(this.getShaderCodeBuilder())}getVtxShaderCode(){return this.codeWrapper.getVtxShaderCode(this.getShaderCodeBuilder())}getUniqueShaderName(){return this.codeWrapper.getUniqueShaderName()}toString(){return"[ShaderCodeShaderBuffer()]"}static GetInstance(){return l.s_instance}}l.s_instance=new l;class _ extends r.default{constructor(){super(),this.m_codeWrapper=null,this.m_uniformData=null,this.m_sharedUniformsDataList=null}setShaderCodeWrapper(t){this.m_codeWrapper=t}getCodeBuf(){let t=l.GetInstance();return t.codeWrapper=this.m_codeWrapper,t}setSelfUniformData(t){this.m_uniformData=t}createSharedUniforms(){return this.m_codeWrapper.createSharedUniforms()}setSharedUniformsData(t){this.m_sharedUniformsDataList=t}createSharedUniformsData(){return this.m_sharedUniformsDataList}createSelfUniformData(){return this.m_uniformData}destroy(){super.destroy(),this.m_codeWrapper=null,this.m_uniformData=null,this.m_sharedUniformsDataList=null}}e.default=_},e08e:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class i{}i.ELEMENTS_TRIANGLES=1,i.ELEMENTS_TRIANGLE_STRIP=2,i.ELEMENTS_TRIANGLE_FAN=3,i.ELEMENTS_INSTANCED_TRIANGLES=4,i.ARRAYS_LINES=5,i.ARRAYS_LINE_STRIP=6,i.ARRAYS_POINTS=7,i.DISABLE=0,e.RenderDrawMode=i;class a{}a.NORMAL=1,a.OPAQUE=1,a.TRANSPARENT=2,a.ALPHA_ADD=3,a.ADD=4,a.ADD_LINEAR=5,a.INVERSE_ALPHA=6,a.BLAZE=7,a.OVERLAY=8,a.OVERLAY2=8,a.DISABLE=0,e.RenderBlendMode=a;class r{}r.NEVER=1,r.LESS=1,r.EQUAL=1,r.GREATER=1,r.NOTEQUAL=1,r.GEQUAL=1,r.ALWAYS=1,e.GLStencilFunc=r;class l{}l.KEEP=1,l.ZERO=1,l.REPLACE=1,l.INCR=1,l.INCR_WRAP=1,l.DECR=1,l.DECR_WRAP=1,l.INVERT=1,e.GLStencilOp=l;class _{}_.ZERO=1,_.ONE=1,_.SRC_COLOR=1,_.DST_COLOR=1,_.SRC_ALPHA=1,_.DST_ALPHA=1,_.ONE_MINUS_SRC_ALPHA=1,e.GLBlendMode=_;class n{}n.FUNC_ADD=1,n.FUNC_SUBTRACT=1,n.FUNC_REVERSE_SUBTRACT=1,n.MIN_EXT=1,n.MAX_EXT=1,n.MIN=1,n.MAX=1,e.GLBlendEquation=n;class h{}h.BACK=1,h.FRONT=2,h.FRONT_AND_BACK=3,h.NONE=0,h.DISABLE=0,e.CullFaceMode=h;class u{}u.NEVER=1,u.ALWAYS=2,u.SKY=3,u.TRUE_LESS_EQUAL=3,u.OPAQUE=4,u.TRUE_LESS=4,u.OPAQUE_OVERHEAD=5,u.FALSE_EQUAL=5,u.FALSE_LESS=6,u.BLEND=6,u.BLEND_SORT=6,u.TRANSPARENT_SORT=6,u.TRUE_LEQUAL=7,u.WIRE_FRAME=7,u.FALSE_LEQUAL=8,u.DECALS=8,u.NEXT_LAYER=11,u.WIRE_FRAME_NEXT=12,u.TRUE_EQUAL=13,u.TRUE_GREATER=14,u.TRUE_GEQUAL=15,u.DISABLE=0,e.DepthTestMode=u;class o{}o.SCENE_RO_FILTER_BEGIN=1<<19,o.SCENE_RO_FILTER_FINISH=2<<19,o.SCENE_RO_ERASE=0,e.RenderConst=o,function(t){t[t["NOT_IN_WORLD"]=-1]="NOT_IN_WORLD",t[t["GO_TO_WORLD"]=1]="GO_TO_WORLD",t[t["LIVE_IN_WORLD"]=2]="LIVE_IN_WORLD"}(e.DisplayRenderSign||(e.DisplayRenderSign={}))},e2fe:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class i{constructor(t=0,e=0,s=100,i=100){this.m_right=100,this.m_top=100,this.x=0,this.y=0,this.width=100,this.height=100,this.x=t,this.y=e,this.width=s,this.height=i,this.update()}copyFrom(t){this.x=t.x,this.y=t.y,this.m_right=t.m_right,this.m_top=t.m_top,this.width=t.width,this.height=t.height}clone(){return new i(this.x,this.y,this.width,this.height)}containsXY(t,e){return!(t<this.x||t>this.m_right)&&!(e<this.y||e>this.m_top)}contains(t){return t.x>=this.x&&t.m_right<=this.m_right&&t.y>=this.y&&(t.m_top,this.m_top),!0}intersect(t){return!(t.x>this.m_right)&&(!(t.m_right<this.x)&&(!(t.y>this.m_top)&&!(t.m_top<this.y)))}update(){this.m_right=this.width+this.x,this.m_top=this.height+this.y}flipY(t){this.y=this.y,this.m_right=this.width+this.x,this.m_top=this.height+this.y}getX(){return this.x}getY(){return this.y}getRight(){return this.m_right}getTop(){return this.m_top}}e.default=i},e7d2:function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s("8a0a")),r=i(s("710f")),l=i(s("f0f0")),_=i(s("7a04")),n=s("e08e");class h{constructor(t=a.default.VTX_STATIC_DRAW){this.m_uid=0,this.m_vtxBuf=null,this.m_ivs=null,this.m_bufDataUsage=0,this.m_ibufStep=2,this.layoutBit=0,this.vertexVer=0,this.indicesVer=0,this.version=0,this.drawMode=n.RenderDrawMode.ELEMENTS_TRIANGLES,this.bufData=null,this.m_uid=h.s_uid++,this.m_bufDataUsage=t}setVtxBuf(t){t!=this&&(this.m_vtxBuf=t,null!=t&&(t.layoutBit=this.layoutBit))}getUid(){return this.m_uid}getType(){return this.m_vtxBuf.getType()}getIBufStep(){return this.m_ibufStep}getBufDataUsage(){return this.m_bufDataUsage}setBufDataUsage(t){this.m_bufDataUsage=t}getBuffersTotal(){return this.m_vtxBuf.getBuffersTotal()}getF32DataAt(t){return this.m_vtxBuf.getF32DataAt(t)}getIvsData(){return this.m_ivs}setF32DataAt(t,e,s,i){this.m_vtxBuf.setF32DataAt(t,e,s,i),this.vertexVer++}setUintIVSData(t,e=a.default.VTX_STATIC_DRAW){if(t instanceof Uint16Array)this.m_ibufStep=2;else{if(!(t instanceof Uint32Array))return;this.m_ibufStep=4}this.m_ivs=t,null!=t&&this.indicesVer++}setUint16IVSData(t,e=a.default.VTX_STATIC_DRAW){t instanceof Uint16Array&&(this.m_ivs=t,this.indicesVer++,this.m_ibufStep=2)}setUint32IVSData(t,e=a.default.VTX_STATIC_DRAW){t instanceof Uint32Array&&(this.m_ivs=t,this.indicesVer++,this.m_ibufStep=4)}setData4fAt(t,e,s,i,a,r){null!=this.m_vtxBuf&&(this.m_vtxBuf.setData4fAt(t,e,s,i,a,r),this.vertexVer++)}setData3fAt(t,e,s,i,a){null!=this.m_vtxBuf&&(this.m_vtxBuf.setData3fAt(t,e,s,i,a),this.vertexVer++)}setData2fAt(t,e,s,i){null!=this.m_vtxBuf&&(this.m_vtxBuf.setData2fAt(t,e,s,i),this.vertexVer++)}destroy(){}__$destroy(){this.m_vtxBuf.destroy(),this.m_vtxBuf.getType()<1?h.s_combinedBufs.push(this.m_vtxBuf):h.s_separatedBufs.push(this.m_vtxBuf),this.m_vtxBuf=null,this.m_ivs=null,this.bufData=null}toString(){return"ROVertexBuffer(uid = "+this.m_uid+")"}static GetFreeId(){return h.s_freeIdList.length>0?h.s_freeIdList.pop():-1}static GetVtxByUid(t){return h.s_unitList[t]}static Create(t=a.default.VTX_STATIC_DRAW){let e=null,s=h.GetFreeId();return s>=0?(e=h.s_unitList[s],e.setBufDataUsage(t),h.s_unitFlagList[s]=h.S_FLAG_BUSY):(e=new h(t),h.s_unitList.push(e),h.s_unitFlagList.push(h.S_FLAG_BUSY),h.s_unitListLen++),e.vertexVer=0,e.indicesVer=0,e.version++,h.s_vtxStore.__$attachAt(e.getUid()),e}static __$Restore(t){if(null!=t&&h.s_unitFlagList[t.getUid()]==h.S_FLAG_BUSY){let e=t.getUid();h.s_freeIdList.push(e),h.s_unitFlagList[e]=h.S_FLAG_FREE,t.__$destroy()}}static __$$AttachAt(t){h.s_vtxStore.__$attachAt(t)}static __$$DetachAt(t){h.s_vtxStore.__$detachAt(t)}static Reset(){h.BufDataList=[],h.s_stride=0,h.BufStatusList=[],h.BufDataStepList=[],h.vtxFS32=null,h.vbWholeDataEnabled=!1,h.dynBufSegEnabled=!1,h.useBufByIndexEnabled=!1}static AddFloat32Data(t,e,s=a.default.VTX_STATIC_DRAW){h.BufDataList.push(t),h.BufDataStepList.push(e),h.BufStatusList.push(s),h.s_stride+=e}static CreateBySaveData(t=a.default.VTX_STATIC_DRAW,e=0){let s=0,i=0,r=0,_=h.BufDataStepList.length,n=[];for(;s<_;s++)n.push(r),r+=h.BufDataStepList[s];let u=h.BufDataList[0].length/h.BufDataStepList[0],o=new Float32Array(r*u),m=0,d=0,c=null,f=null;for(s=0;s<u;++s)for(i=s*r,m=0;m<_;++m)d=h.BufDataStepList[m],c=h.BufDataList[m],f=c.subarray(s*d,(s+1)*d),o.set(f,i),i+=d;let p=h.Create(t);if(p.layoutBit=e,h.s_combinedBufs.length>0){let t=h.s_combinedBufs.pop();p.setVtxBuf(t)}else p.setVtxBuf(new l.default(p.getBufDataUsage()));return p.setF32DataAt(0,o,r,n),p}static UpdateBufData(t){let e=0,s=0,i=0,a=h.BufDataStepList.length,r=h.BufDataList[0].length/h.BufDataStepList[0],l=t.getF32DataAt(0),_=h.s_stride*r!=l.length,n=null;if(_)for(n=[],l=new Float32Array(h.s_stride*r);e<a;e++)n.push(i),i+=h.BufDataStepList[e];else i=h.s_stride;let u=0,o=0,m=null,d=null;for(e=0;e<r;++e)for(s=e*i,u=0;u<a;++u)o=h.BufDataStepList[u],m=h.BufDataList[u],d=m.subarray(e*o,(e+1)*o),l.set(d,s),s+=o;_?t.setF32DataAt(0,l,i,n):t.setF32DataAt(0,l,i,null)}static CreateByBufDataSeparate(t,e=a.default.VTX_STATIC_DRAW,s=0){let i=0,r=0,l=t.getAttributesTotal(),n=new Array(l);n.fill(0);let u=h.Create(e);if(u.layoutBit=s,h.s_separatedBufs.length>0){let t=h.s_separatedBufs.pop();u.setVtxBuf(t)}else u.setVtxBuf(new _.default);for(i=0;i<l;i++)u.setF32DataAt(i,t.getAttributeDataAt(i,0),r,n);return u.setUintIVSData(t.getIndexDataAt(0)),u.bufData=t,u}static CreateBySaveDataSeparate(t=a.default.VTX_STATIC_DRAW){let e=0,s=0,i=h.BufDataStepList.length,r=new Array(i);r.fill(0);let l=h.Create(t);if(h.s_separatedBufs.length>0){let t=h.s_separatedBufs.pop();l.setVtxBuf(t)}else l.setVtxBuf(new _.default);for(e=0;e<i;e++)l.setF32DataAt(e,h.BufDataList[e],s,r);return l}static GetVtxAttachCountAt(t){return h.s_vtxStore.getAttachCountAt(t)}static GetVtxAttachAllCount(){return h.s_vtxStore.getAttachAllCount()}static ClearTest(){if(--h.s_timeDelay,h.s_timeDelay<1){h.s_timeDelay=128;let t=h.s_vtxStore;if(t.__$getRemovedListLen()>0){let e=t.__$getRemovedList(),s=e.length,i=0,a=0,r=null,l=32;for(s=s>l?l:s;i<s;++i)a=e.shift(),t.getAttachCountAt(a)<1&&(r=h.GetVtxByUid(a),h.__$Restore(r))}}}}h.s_uid=0,h.s_combinedBufs=[],h.s_separatedBufs=[],h.S_FLAG_BUSY=1,h.S_FLAG_FREE=0,h.s_unitFlagList=[],h.s_unitListLen=0,h.s_unitList=[],h.s_freeIdList=[],h.s_vtxStore=new r.default,h.s_stride=0,h.BufDataList=null,h.BufDataStepList=null,h.BufStatusList=null,h.vtxDataFS32=null,h.vbWholeDataEnabled=!1,h.dynBufSegEnabled=!1,h.useBufByIndexEnabled=!1,h.vtxFS32=null,h.s_timeDelay=128,e.default=h},f044:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class i{static CreateNewID(){return i.__s_uid++}}i.__s_uid=0,e.default=i},f0f0:function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s("f044"));class r{constructor(t){this.m_uid=-1,this.m_total=0,this.layoutBit=0,this.m_offsetList=null,this.m_f32=null,this.m_f32Stride=0,this.m_uid=a.default.CreateNewID()}getUid(){return this.m_uid}getType(){return 0}getBuffersTotal(){return 1}getF32DataAt(t){return this.m_f32}setF32DataAt(t,e,s,i){null!=i&&(this.m_offsetList=i),this.m_f32Stride=s,this.m_f32=e}setData4fAt(t,e,s,i,a,r){t=this.m_f32Stride*t+this.m_offsetList[e],this.m_f32[t++]=s,this.m_f32[t++]=i,this.m_f32[t++]=a,this.m_f32[t++]=r}setData3fAt(t,e,s,i,a){t=this.m_f32Stride*t+this.m_offsetList[e],this.m_f32[t++]=s,this.m_f32[t++]=i,this.m_f32[t++]=a}setData2fAt(t,e,s,i){t=this.m_f32Stride*t+this.m_offsetList[e],this.m_f32[t++]=s,this.m_f32[t++]=i}destroy(){this.m_offsetList=null,this.m_f32=null}toString(){return"VtxCombinedBuf(uid = "+this.m_uid+")"}}e.default=r},f152:function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s("8e17")),r=i(s("38de")),l=i(s("fecb")),_=i(s("35fa")),n=i(s("8a0a")),h=i(s("e7d2")),u=i(s("5282")),o=i(s("cb29"));class m extends o.default{constructor(t=n.default.VTX_STATIC_DRAW){super(t),this.m_longitudeNumSegments=10,this.m_latitudeNumSegments=10,this.m_radius=50,this.m_vs=null,this.m_uvs=null,this.m_nvs=null,this.m_cvs=null,this.inverseUV=!1}getVS(){return this.m_vs}getUVS(){return this.m_uvs}getNVS(){return this.m_nvs}getCVS(){return this.m_cvs}getIVS(){return this.m_ivs}initialize(t,e,s,i){if(this.vtxTotal<1){if(t<.01)return;this.bounds=new l.default,this.bounds.min.setXYZ(-t,-t,-t),this.bounds.max.setXYZ(t,t,t),this.bounds.updateFast(),e<2&&(e=2),s<2&&(s=2),this.m_radius=Math.abs(t),this.m_longitudeNumSegments=e,this.m_latitudeNumSegments=s,(this.m_latitudeNumSegments+1)%2==0&&(this.m_latitudeNumSegments+=1),(this.m_longitudeNumSegments=this.m_latitudeNumSegments)&&(this.m_longitudeNumSegments+=1);let a=1,r=0,o=0,m=0,d=0,c=0,f=new u.default(0,-this.m_radius,0,o),p=[],S=[];S.push([]);let A=S[0];f.u=.5,f.v=.5,f.nx=0,f.ny=-1,f.nz=0,A.push(f.cloneVertex()),p.push(A[0]);let T=0,E=2.01*this.m_radius,M=0,g=1/this.m_radius;for(;a<this.m_latitudeNumSegments;++a){m=Math.PI*a/this.m_latitudeNumSegments,d=Math.sin(m),c=Math.cos(m),f.y=-this.m_radius*c,T=this.m_radius*d,M=f.y,M<0&&(M=-M),this.inverseUV||(M=this.m_radius-M),M/=E,S.push([]);let t=S[a];for(r=0;r<this.m_longitudeNumSegments;++r)m=2*Math.PI*r/this.m_longitudeNumSegments,++o,d=Math.sin(m),c=Math.cos(m),f.x=d*T,f.z=c*T,f.index=o,d*=M,c*=M,f.u=.5+d,f.v=.5+c,f.nx=f.x*g,f.ny=f.y*g,f.nz=f.z*g,t.push(f.cloneVertex()),p.push(t[r]);t.push(t[0])}++o,f.index=o,f.x=0,f.y=this.m_radius,f.z=0,f.u=.5,f.v=.5,f.nx=0,f.ny=1,f.nz=0,S.push([]);let x=S[this.m_latitudeNumSegments];x.push(f.cloneVertex()),p.push(x[0]);let v=null,y=[],b=null,F=null;for(a=1;a<=this.m_latitudeNumSegments;++a)for(b=S[a-1],F=S[a],r=1;r<=this.m_longitudeNumSegments;++r)1==a?(y.push(b[0].index),y.push(F[r].index),y.push(F[r-1].index)):a==this.m_latitudeNumSegments?(y.push(b[r].index),y.push(F[0].index),y.push(b[r-1].index)):(y.push(b[r].index),y.push(F[r-1].index),y.push(b[r-1].index),y.push(b[r].index),y.push(F[r].index),y.push(F[r-1].index));for(this.vtxTotal=p.length,i?(this.m_ivs=new Uint16Array(2*y.length),this.m_ivs.set(y,0),y.reverse(),this.m_ivs.set(y,y.length)):this.m_ivs=new Uint16Array(y),this.m_vs=new Float32Array(3*this.vtxTotal),a=0,r=0;r<this.vtxTotal;++r)v=p[r],this.m_vs[a]=v.x,this.m_vs[a+1]=v.y,this.m_vs[a+2]=v.z,a+=3;if(h.default.Reset(),h.default.AddFloat32Data(this.m_vs,3),this.isVBufEnabledAt(n.default.VBUF_UVS_INDEX)){for(this.m_uvs=new Float32Array(2*this.vtxTotal),a=0,r=0;r<this.vtxTotal;++r)v=p[r],this.m_uvs[a]=v.u,this.m_uvs[a+1]=v.v,a+=2;h.default.AddFloat32Data(this.m_uvs,2)}if(this.isVBufEnabledAt(n.default.VBUF_NVS_INDEX)){for(this.m_nvs=new Float32Array(3*this.vtxTotal),a=0,r=0;r<this.vtxTotal;++r)v=p[r],this.m_nvs[a]=v.nx,this.m_nvs[a+1]=v.ny,this.m_nvs[a+2]=v.nz,a+=3;h.default.AddFloat32Data(this.m_nvs,3)}if(this.isVBufEnabledAt(n.default.VBUF_CVS_INDEX)){for(this.m_cvs=new Float32Array(3*this.vtxTotal),a=0,r=0;r<this.vtxTotal;++r)this.m_cvs[a]=1,this.m_cvs[a+1]=1,this.m_cvs[a+2]=1,a+=3;h.default.AddFloat32Data(this.m_cvs,3)}if(this.isVBufEnabledAt(n.default.VBUF_TVS_INDEX)){let t=this.m_ivs.length/3,e=new Float32Array(this.m_vs.length),s=new Float32Array(this.m_vs.length);_.default.ClacTrisTangent(this.m_vs,this.m_vs.length,this.m_uvs,this.m_nvs,t,this.m_ivs,e,s),h.default.AddFloat32Data(e,3),h.default.AddFloat32Data(s,3)}h.default.vbWholeDataEnabled=this.vbWholeDataEnabled,this.m_vbuf=h.default.CreateBySaveData(this.getBufDataUsage()),this.m_vbuf.setUint16IVSData(this.m_ivs),this.vtCount=this.m_ivs.length,this.trisNumber=this.vtCount/3}}__$destroy(){this.isResFree()&&(this.bounds=null,this.m_vs=null,this.m_uvs=null,this.m_nvs=null,this.m_cvs=null,super.__$destroy())}testRay(t,e,s,i){return r.default.IntersectioNearSphere2(t,e,a.default.ZERO,this.m_radius,s)}toString(){return"Sphere3DMesh()"}}e.default=m},f208:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class i{constructor(){this.info=""}}e.default=i},f48d:function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s("8e17"));class r{constructor(){this.id=-1,this.position=new a.default}update(){}updateFast(){}}r.__tV0=new a.default,r.__tV1=new a.default,r.__tV2=new a.default,e.AbsGeomBase=r,e.default=r},f63e:function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s("b3bd")),r=i(s("0fc4"));class l extends r.default{constructor(){super(),this.m_colorArray=new Float32Array([1,1,1,1]),this.vtxColorEnabled=!1,this.premultiplyAlpha=!1}getCodeBuf(){let t=super.getCodeBuf();return t.vtxColorEnabled=this.vtxColorEnabled,t.premultiplyAlpha=this.premultiplyAlpha,t}setRGB3f(t,e,s){this.m_colorArray[0]=t,this.m_colorArray[1]=e,this.m_colorArray[2]=s}getRGB3f(t){let e=this.m_colorArray;t.setRGB3f(e[0],e[1],e[2])}setRGBA4f(t,e,s,i){this.m_colorArray[0]=t,this.m_colorArray[1]=e,this.m_colorArray[2]=s,this.m_colorArray[3]=i}getRGBA4f(t){let e=this.m_colorArray;t.setRGBA4f(e[0],e[1],e[2],e[3])}setAlpha(t){this.m_colorArray[3]=t}createSelfUniformData(){let t=new a.default;return t.uniformNameList=["u_color"],t.dataList=[this.m_colorArray],t}}e.default=l},faa5:function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s("250c"));class r{constructor(){this.m_texList=null,this.m_texEnabled=!0,this.vtxColorEnabled=!1,this.premultiplyAlpha=!1,this.adaptationShaderVersion=!0}getShaderCodeBuilder(){return r.s_coder}static GetPreCompileInfo(){return r.s_coder.getPreCompileInfo()}initialize(t){null!=r.___s_csBuf&&r.___s_csBuf!=this&&r.___s_csBuf.initialize(t),this.m_texEnabled=t}isTexEanbled(){return this.m_texEnabled}setIRenderTextureList(t){this.m_texList=t}getIRenderTextureList(){return this.m_texList}buildShader(){}getFragShaderCode(){if(r.___s_csBuf!=this)return r.___s_csBuf.getFragShaderCode();this.adaptationShaderVersion=!1;let t=r.s_coder;return t.reset(),t.addVertLayout("vec3","a_vs"),t.addFragOutput("vec4","FragColor0"),t.addFragUniform("vec4","u_color"),t.useVertSpaceMats(!0,!0,!0),this.premultiplyAlpha&&t.addDefine("VOX_PREMULTIPLY_ALPHA","1"),this.m_texEnabled&&(t.addTextureSample2D(),t.addVertLayout("vec2","a_uvs"),t.addVarying("vec2","v_uv")),this.vtxColorEnabled&&(t.addDefine("VOX_USE_VTX_COLOR","1"),t.addVertLayout("vec3","a_cvs"),t.addVarying("vec3","v_cv")),t.addFragMainCode("\nvoid main(){\n\n    FragColor0 = vec4(1.0);\n    #ifdef VOX_USE_2D_MAP\n        //  FragColor0 *= VOX_Texture2D(u_sampler0, vec2(v_uv[0],v_uv[1]));\n        FragColor0 *= VOX_Texture2D(u_sampler0, v_uv.xy);\n    #endif\n    #ifdef VOX_USE_VTX_COLOR\n        FragColor0 *= vec4(v_cv.xyz,1.0);\n    #endif\n    #ifdef VOX_PREMULTIPLY_ALPHA\n        FragColor0.rgb *= u_color.xyz;\n        FragColor0.a *= u_color.w;\n        FragColor0.rgb *= u_color.aaa;\n    #else\n        FragColor0 *= u_color;\n    #endif\n}\n"),t.buildFragCode()}getVtxShaderCode(){if(r.___s_csBuf!=this)return r.___s_csBuf.getVtxShaderCode();let t=r.s_coder;return t.addVertMainCode("\nvoid main(){\n    \n    gl_Position = u_projMat * u_viewMat * u_objMat * vec4(a_vs.xyz,1.0);\n\n    #ifdef VOX_USE_2D_MAP\n        v_uv = a_uvs.xy;\n    #endif\n    #ifdef VOX_USE_VTX_COLOR\n        v_cv = a_cvs.xyz;\n    #endif\n}\n"),t.buildVertCode()}getUniqueShaderName(){if(r.___s_csBuf!=this)return r.___s_csBuf.getUniqueShaderName();let t="vox_default_shd";return this.m_texEnabled&&(t+="_tex"),this.vtxColorEnabled&&(t+="_vtxColor"),this.premultiplyAlpha&&(t+="_preMulAlpha"),t}toString(){return"[ShaderCodeBuffer()]"}static UseShaderBuffer(t){r.___s_csBuf=t}}r.___s_csBuf=null,r.s_coder=new a.default,e.default=r},face:function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s("2139")),r=i(s("0851")),l=i(s("5e78")),_=i(s("b3bd")),n=i(s("0fc4")),h=i(s("dc7a")),u=i(s("0929")),o=i(s("402a")),m=i(s("bd6f")),d=i(s("bbd2")),c=i(s("e2fe")),f=i(s("91e2")),p=i(s("b8ff")),S=i(s("b9b5")),A=i(s("519e"));var T=window;void 0==T["VoxCore"]&&(T["VoxCore"]={});var E=T["VoxCore"];E["AABB2D"]=c.default,E["Matrix4Pool"]=a.default,E["TextureProxy"]=r.default,E["ImageTextureProxy"]=l.default,E["ShaderUniformData"]=_.default,E["MaterialBase"]=n.default,E["ShaderCodeMaterial"]=h.default,E["DataMesh"]=A.default,E["ROTransform"]=u.default,E["DisplayEntity"]=o.default,E["Plane3DEntity"]=m.default,E["Billboard3DEntity"]=d.default,E["Box3DEntity"]=f.default,E["Sphere3DEntity"]=p.default,E["Axis3DEntity"]=S.default;class M{constructor(){this.m_imgTexture=new l.default(32,32),this.m_dataMesh=new A.default,this.m_entity=new o.default,this.m_plane=new m.default,this.m_billboard=new d.default,this.m_box=new f.default,this.m_sph=new p.default,this.m_axis=new S.default,this.m_uniformData=new _.default,this.m_shaderCodeMaterial=new h.default}initialize(t){this.m_dataMesh.initialize(),this.m_plane.initializeXOZSquare(100),this.m_billboard.initialize(100,100,[this.m_imgTexture]),this.m_box.initializeCube(300,[this.m_imgTexture]),this.m_sph.initialize(300,30,30,[this.m_imgTexture]),this.m_axis.initialize(300)}run(){}}e.ROFunctions=M},fae3:function(t,e,s){"use strict";s.r(e);s("1eb2");var i=s("6af0");for(var a in i)["default"].indexOf(a)<0&&function(t){s.d(e,t,(function(){return i[t]}))}(a)},fc07:function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s("3b73")),r=i(s("2e8a")),l=i(s("78e9"));class _{constructor(){this.m_useTex=!1,this.m_attriNSList=null,this.m_attriSizeList=null,this.uniformNameListStr="",this.texUniformNameListStr="",this.attributes=[null,null,null,null,null,null,null,null,null,null,null,null],this.m_uniforms=null,this.texTotal=0,this.fragOutputTotal=0}reset(){this.m_useTex=!1,this.m_attriNSList=null,this.uniformNameListStr="",this.texUniformNameListStr="";let t=0;for(;t<12;++t)this.attributes[t]=null;this.m_uniforms=null,this.texTotal=0}parseVShaderCode(t){let e=new RegExp(";","g");t=t.replace(e,";\n"),t=t.replace("{","{\n"),t=t.replace("}","\n}");let s="\n",i=t.indexOf(s),a=0,_=[],n="",h="",u=new RegExp(" ","g");while(i>=0)n=t.slice(a,i),n.length>0&&(h=n.replace(u,""),0!=h.indexOf("//")&&_.push(n)),a=i+1,i=t.indexOf(s,a);n=t.slice(a,t.length),n.length>0&&(h=n.replace(u,""),0!=h.indexOf("//")&&_.push(n));let o="uniform ",m=_.length,d=null;for(i=0;i<12;++i)this.attributes[i]=null;this.m_attriNSList=[],this.m_attriSizeList=[];let c=null;null==this.m_uniforms&&(this.m_uniforms=[]),i=0;let f=!1,p=!1;while(i<m)n=_[i],f=n.indexOf("layout")>=0,p=n.indexOf("attribute ")>=0,f&&n.indexOf("location")>0||p?(d=new r.default,d.layoutEnabled=f,d.parseCode(n),this.attributes[d.attriType]=d,this.m_attriNSList.push(d.name),this.m_attriSizeList.push(d.typeSize)):n.indexOf(o)>=0&&(c=new l.default,c.parseCode(n)&&(this.m_uniforms.push(c),this.uniformNameListStr+=c.name+",",c.isTex&&(this.texUniformNameListStr+=c.name+",",this.texTotal++))),++i}parseFShaderCode(t){let e=new RegExp(";","g");t=t.replace(e,";\n"),t=t.replace("{","{\n"),t=t.replace("}","\n}");let s="\n",i=t.indexOf(s),r=0,_=[],n="",h="",u=new RegExp(" ","g");while(i>=0)n=t.slice(r,i),n.length>0&&(h=n.replace(u,""),0!=h.indexOf("//")&&_.push(n)),r=i+1,i=t.indexOf(s,r);n=t.slice(r,t.length),n.length>0&&(h=h.replace(u,""),0!=h.indexOf("//")&&_.push(n));let o="uniform ",m=_.length,d=null;null==this.m_uniforms&&(this.m_uniforms=[]),i=0;while(i<m)n=_[i],n.indexOf(o)>=0&&this.uniformNameListStr.indexOf(o)<0&&(d=new l.default,d.parseCode(n)&&(this.m_uniforms.push(d),this.uniformNameListStr+=d.name+",",d.isTex&&(this.texUniformNameListStr+=d.name+",",this.texTotal++))),++i;let c="layout";a.default.IsWebGL1()&&(c="gl_FragData"),i=t.indexOf(c),this.fragOutputTotal=0;while(i>0)this.fragOutputTotal++,i=t.indexOf(c,i+2);this.fragOutputTotal<1&&(this.fragOutputTotal=1)}}e.default=_},fecb:function(t,e,s){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s("6e01")),r=i(s("8e17"));class l{constructor(){this.min=new r.default(a.default.MATH_MAX_POSITIVE,a.default.MATH_MAX_POSITIVE,a.default.MATH_MAX_POSITIVE),this.max=new r.default(a.default.MATH_MIN_NEGATIVE,a.default.MATH_MIN_NEGATIVE,a.default.MATH_MIN_NEGATIVE),this.version=-1,this.radius=50,this.radius2=2500,this.center=new r.default(0,0,0),this.m_long=100,this.m_width=100,this.m_height=100,this.m_halfLong=50,this.m_halfWidth=50,this.m_halfHeight=50,this.m_tempV=new r.default}getLong(){return this.m_long}getWidth(){return this.m_width}getHeight(){return this.m_height}reset(){this.min.setXYZ(a.default.MATH_MAX_POSITIVE,a.default.MATH_MAX_POSITIVE,a.default.MATH_MAX_POSITIVE),this.max.setXYZ(a.default.MATH_MIN_NEGATIVE,a.default.MATH_MIN_NEGATIVE,a.default.MATH_MIN_NEGATIVE)}equals(t){return this.min.equalsXYZ(t.min)&&this.max.equalsXYZ(t.max)}setVolume(t,e,s){this.m_width=t,this.m_height=e,this.m_long=s,this.m_halfLong=.5*this.m_long,this.m_halfWidth=.5*this.m_width,this.m_halfHeight=.5*this.m_height,this.max.x=this.center.x+this.m_halfWidth,this.max.y=this.center.y+this.m_halfHeight,this.max.z=this.center.z+this.m_halfLong,this.min.x=this.center.x-this.m_halfWidth,this.min.y=this.center.y-this.m_halfHeight,this.min.z=this.center.z-this.m_halfLong,this.radius2=this.m_halfWidth*this.m_halfWidth+this.m_halfHeight*this.m_halfHeight+this.m_halfLong*this.m_halfLong,this.radius=Math.sqrt(this.radius2)}union(t){this.addPosition(t.min),this.addPosition(t.max)}addPosition(t){this.min.x>t.x&&(this.min.x=t.x),this.min.y>t.y&&(this.min.y=t.y),this.min.z>t.z&&(this.min.z=t.z),this.max.x<t.x&&(this.max.x=t.x),this.max.y<t.y&&(this.max.y=t.y),this.max.z<t.z&&(this.max.z=t.z)}addXYZ(t,e,s){this.min.x>t&&(this.min.x=t),this.min.y>e&&(this.min.y=e),this.min.z>s&&(this.min.z=s),this.max.x<t&&(this.max.x=t),this.max.y<e&&(this.max.y=e),this.max.z<s&&(this.max.z=s)}addXYZFloat32Arr(t){let e=t.length,s=0,i=0,a=0;for(let r=0;r<e;)s=t[r],++r,i=t[r],++r,a=t[r],++r,this.min.x>s&&(this.min.x=s),this.min.y>i&&(this.min.y=i),this.min.z>a&&(this.min.z=a),this.max.x<s&&(this.max.x=s),this.max.y<i&&(this.max.y=i),this.max.z<a&&(this.max.z=a)}containsV(t){return!(t.x<this.max.x||t.x>this.max.x)&&(!(t.y<this.max.y||t.y>this.max.y)&&!(t.z<this.max.z||t.z>this.max.z))}containsXY(t,e){return!(t<this.min.x||t>this.max.x)&&!(e<this.min.y||e>this.max.y)}containsXZ(t,e){return!(t<this.min.x||t>this.max.x)&&!(e<this.min.z||e>this.max.z)}containsYZ(t,e){return!(t<this.min.y||t>this.max.y)&&!(e<this.min.z||e>this.max.z)}update(){this.m_width=this.max.x,this.min.x>this.max.x&&(this.max.x=this.min.x,this.min.x=this.m_width),this.m_width=this.max.x-this.min.x,this.m_height=this.max.y,this.min.y>this.max.y&&(this.max.y=this.min.y,this.min.y=this.m_height),this.m_height=this.max.y-this.min.y,this.m_long=this.max.z,this.min.z>this.max.z&&(this.max.z=this.min.z,this.min.z=this.m_long),this.m_long=this.max.z-this.min.z,this.center.x=.5*this.m_width,this.center.y=.5*this.m_height,this.center.z=.5*this.m_long,this.m_halfLong=this.center.z,this.m_halfWidth=this.center.x,this.m_halfHeight=this.center.y,this.radius2=this.m_halfWidth*this.m_halfWidth+this.m_halfHeight*this.m_halfHeight+this.m_halfLong*this.m_halfLong,this.radius=Math.sqrt(this.radius2),this.center.x+=this.min.x,this.center.y+=this.min.y,this.center.z+=this.min.z,++this.version}updateVolume(){this.m_width=this.max.x-this.min.x,this.m_height=this.max.y-this.min.y,this.m_long=this.max.z-this.min.z,this.m_halfLong=.5*this.m_long,this.m_halfWidth=.5*this.m_width,this.m_halfHeight=.5*this.m_height}copyFrom(t){this.radius=t.radius,this.radius2=t.radius2,this.min.copyFrom(t.min),this.max.copyFrom(t.max),this.center.copyFrom(t.center),this.updateVolume()}updateFast(){this.m_width=this.max.x-this.min.x,this.m_height=this.max.y-this.min.y,this.m_long=this.max.z-this.min.z,this.center.x=.5*this.m_width,this.center.y=.5*this.m_height,this.center.z=.5*this.m_long,this.m_halfLong=this.center.z,this.m_halfWidth=this.center.x,this.m_halfHeight=this.center.y,this.radius2=this.m_halfWidth*this.m_halfWidth+this.m_halfHeight*this.m_halfHeight+this.m_halfLong*this.m_halfLong,this.radius=Math.sqrt(this.radius2),this.center.x+=this.min.x,this.center.y+=this.min.y,this.center.z+=this.min.z,++this.version}toString(){return"[AABB(min->"+this.min+",size("+this.m_width+","+this.m_height+","+this.m_long+"))]"}sphereIntersect(t,e){this.m_tempV.x=this.center.x-t.x,this.m_tempV.y=this.center.y-t.y,this.m_tempV.z=this.center.z-t.z;let s=this.m_tempV.getLengthSquared();return s<this.radius2||(e+=this.radius,e*=e,e>=s)}intersectRL(t,e){let s=0,i=(this.min.x-e.x)/t.x,a=(this.max.x-e.x)/t.x;i>a&&(s=a,a=i,i=s);let r=(this.min.y-e.y)/t.y,l=(this.max.y-e.y)/t.y;if(r>l&&(s=l,l=r,r=s),i>l||r>a)return!1;r>i&&(i=r),l<a&&(a=l);let _=(this.min.z-e.z)/t.z,n=(this.max.z-e.z)/t.z;return _>n&&(s=n,n=_,_=s),!(i>n||_>a)&&(_>i&&(i=_),n<a&&(a=n),!0)}static IntersectionRL3(t,e,s,i,a,r){return s.w=(t[e[0]].x-a.x)*s.x,i.w=(t[1-e[0]].x-a.x)*s.x,r.x=(t[e[1]].y-a.y)*s.y,r.y=(t[1-e[1]].y-a.y)*s.y,!(s.w>r.y||r.x>i.w)&&(r.x>s.w&&(s.w=r.x),r.y<i.w&&(i.w=r.y),r.x=(t[e[2]].z-a.z)*s.z,r.y=(t[1-e[2]].z-a.z)*s.z,!(s.w>r.y||r.x>i.w)&&(r.x>s.w&&(s.w=r.x),r.y<i.w&&(i.w=r.y),r.copyFrom(i),r.scaleBy(s.w),r.addBy(a),i.w=1,!0))}static IntersectionRL1(t,e,s,i){let a=0,r=(s.min.x-e.x)/t.x,l=(s.max.x-e.x)/t.x;r>l&&(a=l,l=r,r=a);let _=(s.min.y-e.y)/t.y,n=(s.max.y-e.y)/t.y;if(_>n&&(a=n,n=_,_=a),r>n||_>l)return!1;_>r&&(r=_),n<l&&(l=n);let h=(s.min.z-e.z)/t.z,u=(s.max.z-e.z)/t.z;return h>u&&(a=u,u=h,h=a),!(r>u||h>l)&&(h>r&&(r=h),u<l&&(l=u),i.copyFrom(t),i.scaleBy(r),i.addBy(e),!0)}static IntersectionRL2(t,e,s,i){i.x=s.center.x-e.x,i.y=s.center.y-e.y,i.z=s.center.z-e.z;let a=i.dot(t);if(i.x-=a*t.x,i.y-=a*t.y,i.z-=a*t.z,i.getLengthSquared()>s.radius2)return!1;if(s.containsV(e))return i.copyFrom(e),!0;if(e.x<s.min.x){if(t.x>0&&(a=(s.min.x-e.x)/t.x,i.copyFrom(t),i.scaleBy(a),i.addBy(e),s.containsYZ(i.y,i.z)))return!0}else if(e.x>s.max.x&&t.x<0&&(a=(s.max.x-e.x)/t.x,i.copyFrom(t),i.scaleBy(a),i.addBy(e),s.containsYZ(i.y,i.z)))return!0;if(e.y<s.min.y){if(t.y>0&&(a=(s.min.y-e.y)/t.y,i.copyFrom(t),i.scaleBy(a),i.addBy(e),s.containsXZ(i.x,i.z)))return!0}else if(e.y>s.max.y&&t.y<0&&(a=s.max.y,a=(s.max.y-e.y)/t.y,i.copyFrom(t),i.scaleBy(a),i.addBy(e),s.containsXZ(i.x,i.z)))return!0;if(e.z<s.min.z){if(t.z>0&&(a=(s.min.z-e.z)/t.z,i.copyFrom(t),i.scaleBy(a),i.addBy(e),s.containsXY(i.x,i.y)))return!0}else if(e.z>s.max.z&&t.z<0&&(a=(s.max.z-e.z)/t.z,i.copyFrom(t),i.scaleBy(a),i.addBy(e),s.containsXY(i.x,i.y)))return!0;return!1}}l.___pnV=new r.default,e.default=l}})}));