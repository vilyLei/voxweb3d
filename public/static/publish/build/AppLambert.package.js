(function(a,t){"object"===typeof exports&&"object"===typeof module?module.exports=t():"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports["AppLambert"]=t():a["AppLambert"]=t()})("undefined"!==typeof self?self:this,(function(){return function(a){var t={};function e(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return a[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}return e.m=a,e.c=t,e.d=function(a,t,r){e.o(a,t)||Object.defineProperty(a,t,{enumerable:!0,get:r})},e.r=function(a){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},e.t=function(a,t){if(1&t&&(a=e(a)),8&t)return a;if(4&t&&"object"===typeof a&&a&&a.__esModule)return a;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:a}),2&t&&"string"!=typeof a)for(var i in a)e.d(r,i,function(t){return a[t]}.bind(null,i));return r},e.n=function(a){var t=a&&a.__esModule?function(){return a["default"]}:function(){return a};return e.d(t,"a",t),t},e.o=function(a,t){return Object.prototype.hasOwnProperty.call(a,t)},e.p="",e(e.s="fae3")}({"1eb2":function(a,t,e){"use strict";if("undefined"!==typeof window){var r=window.document.currentScript,i=e("8875");r=i(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:i});var s=r&&r.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);s&&(e.p=s[1])}},3221:function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(){this.A=null,this.B=""}initialize(){}use(a){}getTextures(a,t=null){return null}reset(){}destroy(){}getUniqueNSKeyString(){return this.B}clone(){return null}getParams(){return this.A}getParamsTotal(){return null!=this.A?this.A.length>>2:0}buildShaderUniformData(a){}}t.UniformComp=r},"839a":function(a,t,e){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(a){a[a["Default"]=1]="Default",a[a["FragColor"]=2]="FragColor",a[a["SpecularMapColor"]=3]="SpecularMapColor"}(r||(r={})),t.SpecularMode=r},8875:function(a,t,e){var r,i,s;(function(e,l){i=[],r=l,s="function"===typeof r?r.apply(t,i):r,void 0===s||(a.exports=s)})("undefined"!==typeof self&&self,(function(){function a(){var t=Object.getOwnPropertyDescriptor(document,"currentScript");if(!t&&"currentScript"in document&&document.currentScript)return document.currentScript;if(t&&t.get!==a&&document.currentScript)return document.currentScript;try{throw new Error}catch(d){var e,r,i,s=/.*at [^(]*\((.*):(.+):(.+)\)$/gi,l=/@([^@]*):(\d+):(\d+)\s*$/gi,n=s.exec(d.stack)||l.exec(d.stack),m=n&&n[1]||!1,u=n&&n[2]||!1,o=document.location.href.replace(document.location.hash,""),h=document.getElementsByTagName("script");m===o&&(e=document.documentElement.outerHTML,r=new RegExp("(?:[^\\n]+?\\n){0,"+(u-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),i=e.replace(r,"$1").trim());for(var c=0;c<h.length;c++){if("interactive"===h[c].readyState)return h[c];if(h[c].src===m)return h[c];if(m===o&&h[c].innerHTML&&h[c].innerHTML.trim()===i)return h[c]}return null}}return a}))},"96e4":function(a,t,e){"use strict";var r=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(e("b3bd")),s=e("f3a2"),l=e("839a");t.SpecularMode=l.SpecularMode;class n{constructor(){this.C="lambert",this.D=null,this.E=1,this.F=null,this.G=null,this.H=1,this.I=1,this.vertColorEnabled=!1,this.premultiplyAlpha=!1,this.shadowReceiveEnabled=!1,this.lightEnabled=!0,this.fogEnabled=!1,this.envAmbientLightEnabled=!1,this.brightnessOverlayEnabeld=!1,this.glossinessEnabeld=!0,this.colorEnabled=!0,this.normalEnabled=!0,this.diffuseMap=null,this.diffuseMap2=null,this.normalMap=null,this.parallaxMap=null,this.aoMap=null,this.specularMap=null,this.specularMode=l.SpecularMode.Default,this.diffuseMap2Matrix=null,this.vertUniform=null}buildBufParams(){}buildTextureList(a){if(a.addDiffuseMap(this.diffuseMap),null!=this.diffuseMap2){let t=a.getCodeBuilder();this.diffuseMap2Matrix&&(t.addDefine("VOX_USE_DIFFUSEMAP2_MAT","1"),t.addVarying("vec4","v_map2Pos"),t.addVertUniform("mat4","u_map2ViewMat"),t.addUniqueNSKeyString("M2VM")),a.add2DMap(this.diffuseMap2,"VOX_DIFFUSE_MAP2",!this.diffuseMap2Matrix,!0,!1)}a.addNormalMap(this.normalMap),a.addParallaxMap(this.parallaxMap,this.E),a.addAOMap(this.aoMap),a.addSpecularMap(this.specularMap)}buildShader(a){a.addFragUniform("vec4","u_fragLocalParams",this.H),this.lightEnabled&&a.addDefine("VOX_LIGHT_LOCAL_PARAMS_INDEX",""+this.I),this.vertColorEnabled&&(a.addVertLayout("vec3","a_cvs"),a.addVarying("vec3","v_cv"))}getShaderCodeObjectUUID(){return s.ShaderCodeUUID.Lambert}getShaderCodeObject(){return null}createUniformData(){let a=new i.default;return a.uniformNameList=["u_fragLocalParams"],a.dataList=[this.G],null!=this.vertUniform&&this.vertUniform.buildShaderUniformData(a),null!=this.diffuseMap2Matrix&&(a.uniformNameList.push("u_map2ViewMat"),a.dataList.push(this.diffuseMap2Matrix.getLocalFS32())),a}getUniqueName(){return this.C}initialize(){if(null!=this.vertUniform&&this.vertUniform.initialize(),null==this.G){this.H=2,null!=this.parallaxMap&&(this.H+=1),this.lightEnabled&&(this.H+=3),this.G=new Float32Array(4*this.H),this.G.set([1,1,1,1,0,0,0,0]);let a=2;null!=this.parallaxMap&&(this.D=this.G.subarray(4*a,4*(a+1)),this.D.set([1,10,2,.1]),this.E=a,a+=1),this.lightEnabled&&(this.I=a,this.F=this.G.subarray(4*a),this.F.set([.5,.5,.5,32,.7,.3,.3,.7,.01,.01,.01,0]))}this.C="lambert",this.colorEnabled&&(this.C+="Col"),this.C+=this.H}setSpecularColor(a){null!=this.F&&(this.F[0]=a.r,this.F[1]=a.g,this.F[2]=a.b)}setSpecularIntensity(a){null!=this.F&&(this.F[3]=a)}setLightBlendFactor(a,t){null!=this.F&&(this.F[4]=a,this.F[5]=t)}setBlendFactor(a,t){null!=this.F&&(this.F[6]=a,this.F[7]=t)}setAmbientFactor(a,t,e){null!=this.F&&(this.F[8]=a,this.F[9]=t,this.F[10]=e)}setParallaxParams(a=1,t=10,e=2,r=.1){null!=this.D&&(this.D[0]=a,this.D[1]=t,this.D[2]=e,this.D[3]=r)}setRGB3f(a,t,e){this.G[0]=a,this.G[1]=t,this.G[2]=e}setColor(a,t=null){null!=a&&(this.G[0]=a.r,this.G[1]=a.g,this.G[2]=a.b,this.G[3]=a.a),null!=t&&(this.G[4]=t.r,this.G[5]=t.g,this.G[6]=t.b,this.G[7]=t.a)}setColorAlpha(a){this.G[3]=a}destroy(){this.G=null,this.vertUniform=null,this.diffuseMap2Matrix=null,this.diffuseMap=null,this.diffuseMap2=null,this.normalMap=null,this.parallaxMap=null,this.aoMap=null,this.specularMap=null}}t.default=n,t.LambertLightDecorator=n},b3bd:function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(){this.uns="",this.types=null,this.uniformSize=0,this.uniformNameList=null,this.locations=null,this.dataList=null,this.calcModels=null,this.always=!0,this.next=null}getDataRefFromUniformName(a){if(null!=this.uniformNameList){let t=this.uniformNameList,e=t.length;for(let r=0;r<e;++r)if(a==t[r])return this.dataList[r]}return null}setDataRefFromUniformName(a,t){if(null!=this.uniformNameList){let e=this.uniformNameList,r=e.length;for(let i=0;i<r;++i)if(a==e[i]){this.dataList[i]=t;break}}}copyDataFromProbe(a){this.types=[];for(let t=0;t<a.uniformsTotal;++t)this.types.push(a.uniformTypes[t]);this.uniformSize=a.uniformsTotal}destroy(){let a=0,t=this.dataList.length;for(;a<t;++a)this.dataList[a]=null;if(null!=this.calcModels)for(t=this.calcModels.length,a=0;a<t;++a)this.calcModels[a].destroy(),this.calcModels[a]=null;this.dataList=null,this.types=null,this.locations=null,this.calcModels=null}}t.default=r},debe:function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=e("3221");class i extends r.UniformComp{constructor(){super(),this.J=null,this.K=null,this.L=null,this.M=-1,this.N=-1,this.O=-1,this.uvTransformEnabled=!1,this.curveMoveMap=null,this.displacementMap=null}initialize(){if(null==this.A){this.B="";let a=0;if(this.uvTransformEnabled&&(this.M=a,a++,this.B+="UV"),null!=this.curveMoveMap&&(this.N=a,a++,this.B+="CM"),null!=this.displacementMap&&(this.O=a,a++,this.B+="DC"),a>0){this.A=new Float32Array(4*a);let t=this.M;t>=0&&(this.J=this.A.subarray(4*t,4*(t+1)),this.J.set([1,1,0,0])),t=this.N,t>=0&&(this.K=this.A.subarray(4*t,4*(t+1))),t=this.O,t>=0&&(this.L=this.A.subarray(4*t,4*(t+1)),this.L.set([10,0,0,0]))}}}use(a){this.getParamsTotal()>0&&(a.addVertUniform("vec4","u_vertLocalParams",this.getParamsTotal()),this.N>=0&&a.addVertLayout("vec4","a_vs"),this.M>=0&&a.addDefine("VOX_VTX_TRANSFORM_PARAM_INDEX",""+this.M))}reset(){}destroy(){}getTextures(a,t=null){return this.getParamsTotal()>0?(null==t&&(t=[]),this.N>=0&&(t.push(this.curveMoveMap),a.uniform.add2DMap("VTX_CURVE_MOVE_MAP",!1,!1,!0),a.addDefine("VOX_VTX_CURVE_MOVE_PARAM_INDEX",""+this.N)),this.O>=0&&(t.push(this.displacementMap),a.uniform.addDisplacementMap(this.O)),t):null}setCurveMoveParam(a,t){null!=this.K&&(this.K[0]=1/a,this.K[2]=t)}setCurveMoveDistance(a){null!=this.K&&(this.K[1]=a)}setUVScale(a,t){null!=this.J&&(this.J[0]=a,this.J[1]=t)}getUVScale(a){null!=this.J&&(a.x=this.J[0],a.y=this.J[1])}setUVTranslation(a,t){null!=this.J&&(this.J[2]=a,this.J[3]=t)}setDisplacementParams(a,t){null!=this.L&&(this.L[0]=a,this.L[1]=t)}clone(){let a=new i;return a.uvTransformEnabled=this.uvTransformEnabled,a.displacementMap=this.displacementMap,a.curveMoveMap=this.curveMoveMap,a}buildShaderUniformData(a){this.getParamsTotal()>0&&(a.uniformNameList.push("u_vertLocalParams"),a.dataList.push(this.getParams()))}}t.VertUniformComp=i},e4a4:function(a,t,e){"use strict";var r=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(e("96e4")),s=e("debe");class l{constructor(){this.P=null}initialize(a){this.P=a}createMaterial(a=!0){let t=a?new s.VertUniformComp:null,e=new i.default;return e.vertUniform=t,this.P.materialBlock.createMaterial(e)}}t.Instance=l},f3a2:function(a,t,e){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(a){a["None"]="",a["Default"]="pbr",a["Lambert"]="lambert",a["PBR"]="pbr"}(r||(r={})),t.ShaderCodeUUID=r},fae3:function(a,t,e){"use strict";e.r(t);e("1eb2");var r=e("e4a4");for(var i in r)["default"].indexOf(i)<0&&function(a){e.d(t,a,(function(){return r[a]}))}(i)}})}));