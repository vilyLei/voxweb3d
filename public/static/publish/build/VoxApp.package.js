(function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e():"function"===typeof define&&define.amd?define([],e):"object"===typeof exports?exports["VoxApp"]=e():t["VoxApp"]=e()})("undefined"!==typeof self?self:this,(function(){return function(t){var e={};function i(s){if(e[s])return e[s].exports;var a=e[s]={i:s,l:!1,exports:{}};return t[s].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(s,a,function(e){return t[e]}.bind(null,a));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s="fae3")}({"0dae":function(t,e,i){"use strict";var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=s(i("c497")),r=s(i("8e17")),n=i("4301"),l=s(i("2e85")),o=s(i("97e3"));function h(t){function e(i){t.run(),window.requestAnimationFrame(e)}t.initialize(),window.requestAnimationFrame(e)}class d{constructor(){this.A=null,this.B=null,this.C=null,this.D=null,this.E=new l.default,this.F=new o.default,this.pbrMaterialEnabled=!1,this.lambertMaterialEnabled=!0,this.G=null,this.H=null,this.I=new r.default(-150,100,-170),this.J=new r.default(150,0,150)}setLoadedModuleFlag(t){this.E.addFlag(t),this.E.hasAllSysModules()?this.initLightScene():this.E.hasEngineModule()&&this.initEngine(),this.E.hasObjDataModule()&&this.initObjData(),this.F.addMaterial(t)}buildMeshData(){if(null==this.H&&null!=this.K&&null!=this.G){let t=this.G,e=this.K.entityBlock.createMesh();e.setVS(t.getVS()),e.setUVS(t.getUVS()),e.setNVS(t.getNVS()),e.setIVS(t.getIVS()),this.H=e,this.F.addDataMesh(e),this.F.initCommonScene(1)}}initObjData(){if(null==this.C){let t="static/assets/obj/apple_01.obj",e=new AppObjData.Instance;e.load(t,t=>{this.G=t,this.buildMeshData(),this.F.preloadData()}),this.C=e}}initEngine(){if(null==this.A){let t=new AppEngine.Instance,e=new AppBase.Instance,i=AppEngine.RendererDevice;this.A=t,this.B=e;let s=new a.default;s.setPolygonOffsetEanbled(!1),s.setAttriAlpha(!1),s.setAttriAntialias(!0),s.setCamProject(45,30,9e3),s.setCamPosition(1e3,1e3,1e3),t.initialize(!1,s),i.SetWebBodyColor("black"),this.K=t.getRendererScene(),e.initialize(this.K),t.setSyncLookEnabled(!0),h(t),this.F.initialize(e,this.K),this.buildMeshData()}}initLightScene(){if(null==this.A&&this.initEngine(),null==this.L){let t=new n.MaterialContextParam;t.shaderLibVersion="v101",t.pointLightsTotal=1,t.directionLightsTotal=2,t.spotLightsTotal=0,t.loadAllShaderCode=!0,t.shaderCodeBinary=!0,t.pbrMaterialEnabled=this.pbrMaterialEnabled,t.lambertMaterialEnabled=this.lambertMaterialEnabled,t.shaderFileNickname=!0,t.vsmFboIndex=0,t.vsmEnabled=!0,this.L=this.B.createMaterialContext(),this.L.addShaderLibListener(this),this.initEnvLight(),this.buildLightModule(t),this.buildShadowModule(t),this.L.initialize(this.K,t),this.F.setMaterialContext(this.L),this.A.setMaterialContext(this.L)}}shaderLibLoadComplete(t,e){if(this.lambertMaterialEnabled){let t=this.L.envLightModule;t.setAmbientColorRGB3f(3,3,3),t.setEnvAmbientLightAreaOffset(-500,-500),t.setEnvAmbientLightAreaSize(1e3,1e3),t.setEnvAmbientMap(this.L.getTextureByUrl("static/assets/brn_03.jpg"))}this.F.initCommonScene(2)}buildShadowModule(t){if(this.E.hasShadowModule()){this.D=new AppShadow.Instance;let e=this.D.createVSMShadow(t.vsmFboIndex);e.setCameraPosition(new r.default(1,800,1)),e.setCameraNear(10),e.setCameraFar(3e3),e.setMapSize(512,512),e.setCameraViewSize(4e3,4e3),e.setShadowRadius(2),e.setShadowBias(-5e-4),e.initialize(this.K,[0],3e3),e.setShadowIntensity(.8),e.setColorIntensity(.3),this.L.vsmModule=e}}initEnvLight(){if(this.E.hasEnvLightModule()){let t=new AppEnvLightModule.Instance,e=t.createEnvLightModule(this.K);e.initialize(),e.setFogColorRGB3f(0,.8,.1),this.L.envLightModule=e}}buildLightModule(t){if(this.E.hasLightModule()){let e=new AppLightModule.Instance,i=e.createLightModule(this.K);for(let s=0;s<t.pointLightsTotal;++s)i.appendPointLight();for(let s=0;s<t.directionLightsTotal;++s)i.appendDirectionLight();for(let s=0;s<t.spotLightsTotal;++s)i.appendSpotLight();return this.initLightModuleData(i),this.L.lightModule=i,i}return null}initLightModuleData(t){let e=t.getPointLightAt(0);null!=e&&(e.position.setXYZ(0,190,0),e.color.setRGB3f(0,2.2,0),e.attenuationFactor1=1e-5,e.attenuationFactor2=5e-5);let i=t.getSpotLightAt(0);null!=i&&(i.position.setXYZ(0,30,0),i.direction.setXYZ(0,-1,0),i.color.setRGB3f(0,40.2,0),i.attenuationFactor1=1e-6,i.attenuationFactor2=1e-6,i.angleDegree=30);let s=t.getDirectionLightAt(0);null!=s&&(s.color.setRGB3f(2,0,0),s.direction.setXYZ(-1,-1,0),s=t.getDirectionLightAt(1),null!=s&&(s.color.setRGB3f(0,0,2),s.direction.setXYZ(1,1,0))),t.update()}}e.default=d},"1eb2":function(t,e,i){"use strict";if("undefined"!==typeof window){var s=window.document.currentScript,a=i("8875");s=a(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:a});var r=s&&s.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);r&&(i.p=r[1])}},"2be0":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class s{constructor(){this.uuid="BinaryLoader"}async load(t,e,i=""){const s=new FileReader;s.onload=t=>{e.loaded(s.result,this.uuid)};const a=new XMLHttpRequest;a.open("GET",t,!0),""!=i&&a.setRequestHeader("Range",i),a.responseType="blob",a.onload=t=>{a.status<=206?s.readAsArrayBuffer(a.response):e.loadError(a.status,this.uuid)},a.onerror=t=>{e.loadError(a.status,this.uuid)},a.send(null)}}e.default=s},"2e85":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class s{constructor(){this.M=0}static Initialize(){let t=s,e=s;e.SYS_MODULE_LOADED=t.AppEnvLight|t.AppLight|t.AppShadow}reset(){this.M=0}addFlag(t){this.M|=t}getFlag(){return this.M}hasEngineModule(){return(s.ENGINE_LOADED&this.M)==s.ENGINE_LOADED}hasAllSysModules(){return(s.SYS_MODULE_LOADED&this.M)==s.SYS_MODULE_LOADED}hasEnvLightModule(){return(s.AppEnvLight&this.M)==s.AppEnvLight}hasLightModule(){return(s.AppLight&this.M)==s.AppLight}hasShadowModule(){return(s.AppShadow&this.M)==s.AppShadow}hasObjDataModule(){return(s.AppObjData&this.M)==s.AppObjData}isObjDataModule(t){return t==s.AppObjData}isLambert(t){return t==s.AppLambert}isPBR(t){return t==s.AppPBR}}s.AppEngine=1,s.AppBase=2,s.AppEnvLight=4,s.AppLight=8,s.AppShadow=16,s.AppObjData=32,s.AppLambert=64,s.AppPBR=128,s.ENGINE_LOADED=3,s.SYS_MODULE_LOADED=31,e.default=s},3930:function(t,e,i){"use strict";var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=s(i("6e01"));class r{constructor(t=1,e=1,i=1,s=1){this.r=1,this.g=1,this.b=1,this.a=1,this.r=t,this.g=e,this.b=i,this.a=s}setRGB3Bytes(t,e,i){this.r=t/255,this.g=e/255,this.b=i/255}setRGB3f(t,e,i){this.r=t,this.g=e,this.b=i}setRGBUint24(t){this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255}setRGBA4f(t,e,i,s){this.r=t,this.g=e,this.b=i,this.a=s}copyFrom(t){this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a}copyFromRGB(t){this.r=t.r,this.g=t.g,this.b=t.b}scaleBy(t){this.r*=t,this.g*=t,this.b*=t}inverseRGB(){this.r=1-this.r,this.g=1-this.g,this.b=1-this.b}randomRGB(t=1,e=0){this.r=Math.random()*t,this.g=Math.random()*t,this.b=Math.random()*t,this.r+=e,this.g+=e,this.b+=e}normalizeRandom(t=1,e=0){this.r=Math.random(),this.g=Math.random(),this.b=Math.random();let i=Math.sqrt(this.r*this.r+this.g*this.g+this.b*this.b);i>a.default.MATH_MIN_POSITIVE&&(this.r=t*this.r/i,this.g=t*this.g/i,this.b=t*this.b/i),this.r+=e,this.g+=e,this.b+=e}normalize(t){void 0==t&&(t=1);let e=Math.sqrt(this.r*this.r+this.g*this.g+this.b*this.b);e>a.default.MATH_MIN_POSITIVE&&(this.r=t*this.r/e,this.g=t*this.g/e,this.b=t*this.b/e)}getCSSDecRGBAColor(){let t=Math.floor(255*this.r),e=Math.floor(255*this.g),i=Math.floor(255*this.b),s=this.a;return"rgba("+t+","+e+","+i+","+s+")"}getCSSHeXRGBColor(){let t="#",e=Math.floor(255*this.r);return t+=e<15?"0"+e.toString(16):""+e.toString(16),e=Math.floor(255*this.g),t+=e<15?"0"+e.toString(16):""+e.toString(16),e=Math.floor(255*this.b),t+=e<15?"0"+e.toString(16):""+e.toString(16),t}toString(){return"[Color4(r="+this.r+", g="+this.g+",b="+this.b+",a="+this.a+")]"}}e.default=r},"3bda":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class s{static SetDebugEnabled(t){s.n=t}static ShowLog(t){s.n&&(s.o.length>0?s.o+="<br/>"+t:s.o=t,s.UpdateDivText())}static GetLog(){return s.o}static ShowLogOnce(t){s.n&&(s.o=t,s.UpdateDivText())}static ClearLog(t=""){s.n&&(s.o=t,s.UpdateDivText())}static UpdateDivText(){if(s.n)if(null!=s.p)s.p.innerHTML=s.o;else{let t=document.createElement("div");t.style.color="";let e=t;e.width=128,e.height=64,e.style.backgroundColor="#aa0033",e.style.left="0px",e.style.top="128px",e.style.zIndex="9999",e.style.position="absolute",document.body.appendChild(e),s.p=e,e.innerHTML=s.o}}static ShowAtTop(){null!=s.p&&(s.p.parentElement.removeChild(s.p),document.body.appendChild(s.p))}}s.o="",s.p=null,s.n=!1,e.default=s},4301:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class s{constructor(){this.pointLightsTotal=1,this.directionLightsTotal=1,this.spotLightsTotal=0,this.vsmFboIndex=0,this.vsmEnabled=!0,this.loadAllShaderCode=!1,this.shaderCodeBinary=!1,this.shaderLibVersion="",this.shaderFileNickname=!1,this.lambertMaterialEnabled=!0,this.pbrMaterialEnabled=!0,this.buildBinaryFile=!1}}e.MaterialContextParam=s},5216:function(t,e,i){"use strict";var s;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t["ENV_LIGHT_PARAM"]=0]="ENV_LIGHT_PARAM",t[t["ENV_AMBIENT_LIGHT"]=1]="ENV_AMBIENT_LIGHT",t[t["FOG"]=2]="FOG",t[t["FOG_EXP2"]=3]="FOG_EXP2",t[t["VSM_SHADOW"]=4]="VSM_SHADOW",t[t["GLOBAL_LIGHT"]=5]="GLOBAL_LIGHT"}(s||(s={})),e.MaterialPipeType=s},"5ff4":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=i("a7f1");document.title="Rendering & Art";let a=new s.AppLoader;a.initialize()},"6e01":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class s{static Clamp(t,e,i){return Math.max(Math.min(t,i),e)}static IsPowerOf2(t){return 0==(t&t-1)}static CalcCeilPowerOfTwo(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}static CalcNearestCeilPow2(t){return Math.pow(2,Math.round(Math.log(t)/Math.LN2))}static CalcFloorCeilPow2(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}static DegreeToRadian(t){return s.MATH_PI_OVER_180*t}static Log2(t){return Math.log(t)/Math.LN2}static GetMaxMipMapLevel(t,e){return Math.round(s.Log2(Math.max(t,e))+1)}static SafeACos(t){return t<=-1?s.MATH_PI:t>=1?0:Math.acos(t)}static GetNearestCeilPow2(t){let e=1;while(e<t)e<<=1;return e}static GetMinRadian(t,e){return e%=s.MATH_2PI,t%=s.MATH_2PI,e<t?(e=s.MATH_2PI-t+e,e>s.MATH_PI?e-s.MATH_2PI:e):e>t?(t=s.MATH_2PI-e+t,t>s.MATH_PI?s.MATH_2PI-t:-t):0}static GetMinDegree(t,e){let i=0;return e>=270&&t<90?i=(e-(t+360))%180:e<=90&&t>=270?i=(e+360-t)%180:(i=e-t,i>180?(i-=360,i%=360):i<-180&&(i+=360,i%=360)),i}static GetDegreeByXY(t,e){if(Math.abs(t)<1e-5)return e>=0?270:90;let i=180*Math.atan(e/t)/Math.PI;return t>=0?i:180+i}static GetRadianByXY(t,e){if(Math.abs(t)<s.MATH_MIN_POSITIVE)return e>=0?s.MATH_1PER2PI:s.MATH_3PER2PI;let i=Math.atan(e/t);return t>=0?i:s.MATH_PI+i}static GetRadianByCos(t,e,i){var a=Math.acos(t);return e>=0?a:s.MATH_PI+a}}s.MATH_MIN_POSITIVE=1e-5,s.MATH_MAX_NEGATIVE=-1e-5,s.MATH_MAX_POSITIVE=268435454,s.MATH_MIN_NEGATIVE=-268435454,s.MATH_1_OVER_255=1/255,s.MATH_PI=Math.PI,s.MATH_2PI=2*s.MATH_PI,s.MATH_3PER2PI=1.5*s.MATH_PI,s.MATH_1PER2PI=.5*s.MATH_PI,s.MATH_1_OVER_PI=1/s.MATH_PI,s.MATH_1_OVER_360=1/360,s.MATH_1_OVER_180=1/180,s.MATH_180_OVER_PI=180/s.MATH_PI,s.MATH_PI_OVER_180=s.MATH_PI/180,s.MATH_LN2=.6931471805599453,e.default=s},8875:function(t,e,i){var s,a,r;(function(i,n){a=[],s=n,r="function"===typeof s?s.apply(e,a):s,void 0===r||(t.exports=r)})("undefined"!==typeof self&&self,(function(){function t(){var e=Object.getOwnPropertyDescriptor(document,"currentScript");if(!e&&"currentScript"in document&&document.currentScript)return document.currentScript;if(e&&e.get!==t&&document.currentScript)return document.currentScript;try{throw new Error}catch(c){var i,s,a,r=/.*at [^(]*\((.*):(.+):(.+)\)$/gi,n=/@([^@]*):(\d+):(\d+)\s*$/gi,l=r.exec(c.stack)||n.exec(c.stack),o=l&&l[1]||!1,h=l&&l[2]||!1,d=document.location.href.replace(document.location.hash,""),u=document.getElementsByTagName("script");o===d&&(i=document.documentElement.outerHTML,s=new RegExp("(?:[^\\n]+?\\n){0,"+(h-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),a=i.replace(s,"$1").trim());for(var p=0;p<u.length;p++){if("interactive"===u[p].readyState)return u[p];if(u[p].src===o)return u[p];if(o===d&&u[p].innerHTML&&u[p].innerHTML.trim()===a)return u[p]}return null}}return t}))},"8e17":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s=180/Math.PI,a=1e-5;class r{constructor(t=0,e=0,i=0,s=1){this.x=0,this.y=0,this.z=0,this.w=0,this.x=t,this.y=e,this.z=i,this.w=s}clone(){return new r(this.x,this.y,this.z,this.w)}setTo(t,e,i,s=1){this.x=t,this.y=e,this.z=i,this.w=s}setXYZ(t,e,i){this.x=t,this.y=e,this.z=i}copyFrom(t){this.x=t.x,this.y=t.y,this.z=t.z}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}multBy(t){this.x*=t.x,this.y*=t.y,this.z*=t.z}normalize(){let t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);t>a&&(this.x/=t,this.y/=t,this.z/=t)}normalizeTo(t){let e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);e>a?(t.x=this.x/e,t.y=this.y/e,t.z=this.z/e):(t.x=this.x,t.y=this.y,t.z=this.z)}scaleVector(t){this.x*=t.x,this.y*=t.y,this.z*=t.z}scaleBy(t){this.x*=t,this.y*=t,this.z*=t}negate(){this.x=-this.x,this.y=-this.y,this.z=-this.z}equalsXYZ(t){return Math.abs(this.x-t.x)<a&&Math.abs(this.y-t.y)<a&&Math.abs(this.z-t.z)<a}equalsAll(t){return Math.abs(this.x-t.x)<a&&Math.abs(this.y-t.y)<a&&Math.abs(this.z-t.z)<a&&Math.abs(this.w-t.w)<a}project(){let t=1/this.w;this.x*=t,this.y*=t,this.z*=t}getLength(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}getLengthSquared(){return this.x*this.x+this.y*this.y+this.z*this.z}addBy(t){this.x+=t.x,this.y+=t.y,this.z+=t.z}subtractBy(t){this.x-=t.x,this.y-=t.y,this.z-=t.z}subtract(t){return new r(this.x-t.x,this.y-t.y,this.z-t.z)}add(t){return new r(this.x+t.x,this.y+t.y,this.z+t.z)}crossProduct(t){return new r(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)}crossBy(t){let e=this.y*t.z-this.z*t.y,i=this.z*t.x-this.x*t.z,s=this.x*t.y-this.y*t.x;this.x=e,this.y=i,this.z=s}reflectBy(t){let e=2*(this.x*t.x+this.y*t.y+this.z*t.z);this.x=this.x-e*t.x,this.y=this.y-e*t.y,this.z=this.z-e*t.z}scaleVecTo(t,e){this.x=t.x*e,this.y=t.y*e,this.z=t.z*e}subVecsTo(t,e){this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z}addVecsTo(t,e){this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z}crossVecsTo(t,e){this.x=t.y*e.z-t.z*e.y,this.y=t.z*e.x-t.x*e.z,this.z=t.x*e.y-t.y*e.x}toString(){return"Vector3D("+this.x+this.y+this.z+")"}static Cross(t,e,i){i.x=t.y*e.z-t.z*e.y,i.y=t.z*e.x-t.x*e.z,i.z=t.x*e.y-t.y*e.x}static CrossSubtract(t,e,i,s,a){r.__vtor3Stv0.x=e.x-t.x,r.__vtor3Stv0.y=e.y-t.y,r.__vtor3Stv0.z=e.z-t.z,r.__vtor3Stv1.x=s.x-i.x,r.__vtor3Stv1.y=s.y-i.y,r.__vtor3Stv1.z=s.z-i.z,t=r.__vtor3Stv0,i=r.__vtor3Stv1,a.x=t.y*i.z-t.z*i.y,a.y=t.z*i.x-t.x*i.z,a.z=t.x*i.y-t.y*i.x}static Subtract(t,e,i){i.x=t.x-e.x,i.y=t.y-e.y,i.z=t.z-e.z}static DistanceSquared(t,e){return r.__vtor3Stv0.x=t.x-e.x,r.__vtor3Stv0.y=t.y-e.y,r.__vtor3Stv0.z=t.z-e.z,r.__vtor3Stv0.getLengthSquared()}static DistanceXYZ(t,e,i,s,a,n){return r.__vtor3Stv0.x=t-s,r.__vtor3Stv0.y=e-a,r.__vtor3Stv0.z=i-n,r.__vtor3Stv0.getLength()}static Distance(t,e){return r.__vtor3Stv0.x=t.x-e.x,r.__vtor3Stv0.y=t.y-e.y,r.__vtor3Stv0.z=t.z-e.z,r.__vtor3Stv0.getLength()}static AngleBetween(t,e){return t.normalizeTo(r.__vtor3Stv0),e.normalizeTo(r.__vtor3Stv1),Math.acos(r.__vtor3Stv0.dot(r.__vtor3Stv1))*s}static RadianBetween(t,e){return t.normalizeTo(r.__vtor3Stv0),e.normalizeTo(r.__vtor3Stv1),Math.acos(r.__vtor3Stv0.dot(r.__vtor3Stv1))}static RadianBetween2(t,e){let i=t.getLengthSquared(),s=e.getLengthSquared();return r.__vtor3Stv0.x=t.x-e.x,r.__vtor3Stv0.y=t.y-e.y,r.__vtor3Stv0.z=t.z-e.z,Math.acos((i+s-r.__vtor3Stv0.getLengthSquared())/(2*Math.sqrt(i)*Math.sqrt(s)))}static Reflect(t,e,i){let s=2*(t.x*e.x+t.y*e.y+t.z*e.z);i.x=t.x-s*e.x,i.y=t.y-s*e.y,i.z=t.z-s*e.z}}r.X_AXIS=new r(1,0,0),r.Y_AXIS=new r(0,1,0),r.Z_AXIS=new r(0,0,1),r.__vtor3Stv0=new r,r.__vtor3Stv1=new r,r.ZERO=new r,e.default=r},"973c":function(t,e,i){"use strict";var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=s(i("3930")),r=s(i("2be0")),n=i("f3a2");class l{constructor(){this.N=null,this.O=!0}preload(){}active(t,e){this.L=e,null==this.N&&(this.K=t,this.N=new AppLambert.Instance,this.N.initialize(this.K)),this.preloadMap(this.L,"box",!0,!1,!0)}loaded(t,e){}loadError(t,e){}loadSpecularData(t){let e="static/bytes/spe.mdf";t&&(e="static/bytes/speBrn.bin");let i=new r.default;i.load(e,this)}preloadMap(t,e,i=!0,s=!0,a=!1,r=!1){this.O&&(this.O=!1,t.getTextureByUrl("static/assets/disp/"+e+"_COLOR.png"),t.getTextureByUrl("static/assets/disp/"+e+"_SPEC.png"),i&&t.getTextureByUrl("static/assets/disp/"+e+"_NRM.png"),r&&t.getTextureByUrl("static/assets/disp/"+e+"_OCC.png"),this.O=!1)}useMaps(t,e,i=!0,s=!0,a=!1,r=!1){t.diffuseMap=this.L.getTextureByUrl("static/assets/disp/"+e+"_COLOR.png"),t.specularMap=this.L.getTextureByUrl("static/assets/disp/"+e+"_SPEC.png"),i&&(t.normalMap=this.L.getTextureByUrl("static/assets/disp/"+e+"_NRM.png")),r&&(t.aoMap=this.L.getTextureByUrl("static/assets/disp/"+e+"_OCC.png")),s&&null!=t.vertUniform&&(t.vertUniform.displacementMap=this.L.getTextureByUrl("static/assets/disp/"+e+"_DISP.png")),t.shadowReceiveEnabled=a}getUUID(){return n.ShaderCodeUUID.Lambert}createMaterial(){let t=this.N.createMaterial(),e=t.getDecorator(),i=e.vertUniform;t.setMaterialPipeline(this.L.pipeline),e.envAmbientLightEnabled=!0,i.uvTransformEnabled=!0,this.useMaps(e,"box",!0,!1,!0),e.fogEnabled=!0,e.lightEnabled=!0,e.initialize(),i.setDisplacementParams(3,0),e.setSpecularIntensity(64);let s=new a.default;return s.normalizeRandom(1.1),e.setSpecularColor(s),t}isEnabled(){return null!=this.L&&this.L.hasShaderCodeObjectWithUUID(this.getUUID())}}e.default=l},"97e3":function(t,e,i){"use strict";var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i("5216"),r=s(i("a176"));class n{constructor(){this.P=null,this.N=null,this.Q=new r.default,this.R=[],this.S=[],this.T=[],this.U=0,this.V=-1}preloadData(){this.Q.preloadData()}addDataMesh(t){let e=this.K;this.T.push(t);let i=this.Q.createDefaultMaterial();i.initializeByCodeBuf(!0),t.setVtxBufRenderData(i),t.initialize();let s=400,a=this.K.entityBlock.createEntity();a.setMesh(t),a.setMaterial(i),a.setScaleXYZ(s,s,s),e.addEntity(a),this.R.push(a)}initialize(t,e){this.P=t,this.K=e,this.K.setClearRGBColor3f(.1,.4,.2),this.Q.initialize(this.P,this.K)}setMaterialContext(t){this.L=t,this.Q.setMaterialContext(this.L),this.initEnvBox()}addMaterial(t){t=this.Q.addMaterial(t),t>0&&(this.U=t)}update(){this.V>-1&&clearTimeout(this.V);let t=this.K;for(let e=0;e<this.S.length;++e)if(this.S[e].isInRendererProcess()){const i=this.R[e];t.removeEntity(i),this.R.splice(e,1),this.S.splice(e,1)}this.R.length>0&&(this.V=setTimeout(this.update.bind(this),20))}initCommonScene(t=0){let e=this.Q.isEnabledWithFlag(this.U)&&this.T.length>0;if(!e)return;let i=this.K;if(this.R.length>0){this.update();let t=this.Q.createMaterialWithFlag(this.U),e=400,s=i.entityBlock.createEntity();s.setMaterial(t),s.copyMeshFrom(this.R[0]),s.setScaleXYZ(e,e,e),i.addEntity(s),this.S.push(s),e=700;let a=i.entityBlock.createEntity();a.setMaterial(t),a.copyMeshFrom(i.entityBlock.unitBox),a.setScaleXYZ(e,.05*e,e),a.setXYZ(0,-200,0),i.addEntity(a),this.S.push(a)}}initEnvBox(){let t=this.K.getRenderProxy().renderingState,e=this.K,i=this.P.createDefaultMaterial();i.pipeTypes=[a.MaterialPipeType.FOG_EXP2],i.setMaterialPipeline(this.L.pipeline),i.setTextureList([this.L.getTextureByUrl("static/assets/box.jpg")]),i.initializeByCodeBuf(!1);let s=3e3,r=e.entityBlock.createEntity();r.setRenderState(t.FRONT_CULLFACE_NORMAL_STATE),r.setMaterial(i),r.copyMeshFrom(e.entityBlock.unitBox),r.setScaleXYZ(s,s,s),e.addEntity(r,1)}}e.default=n},a176:function(t,e,i){"use strict";var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=s(i("3930")),r=s(i("2e85")),n=s(i("973c")),l=s(i("bf1e")),o=s(i("3bda"));class h{constructor(){this.P=null,this.W=new Map}initialize(t,e){this.P=t,this.K=e}setMaterialContext(t){this.L=t;for(const[e,i]of this.W)i.active(this.K,this.L)}preloadData(){}createDefaultMaterial(){let t=this.P.createDefaultMaterial();return t.normalEnabled=!0,t.setTextureList([this.K.textureBlock.createRGBATex2D(32,32,new a.default(.2,.8,.4))]),t}addMaterial(t){let e=this.W.get(t);if(null==e){switch(t){case r.default.AppLambert:e=new n.default,e.preload();break;case r.default.AppPBR:e=new l.default,e.preload();break;default:break}if(null!=e)return null!=this.L&&e.active(this.K,this.L),this.W.set(t,e),t}return 0}isEnabledWithFlag(t){let e=this.W.get(t);return o.default.ShowLog(t+",isEnabled()): "+(null!=e)+", "+(null!=e&&e.isEnabled())),null!=e&&e.isEnabled()}hasMaterialWithFlag(t){return this.W.has(t)}createMaterialWithFlag(t){let e=this.W.get(t);return null!=e?e.createMaterial():null}}e.default=h},a7f1:function(t,e,i){"use strict";var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=s(i("2e85")),r=s(i("0dae"));let n="static/publish/build/";class l{constructor(){this.viewer=new r.default}loadedWithIndex(t){this.viewer.setLoadedModuleFlag(t)}}class o{constructor(){this.X=new l,this.E=new a.default,this.Y=!0,this.Z=null,this.a=null}initialize(){let t=location.href+"";t=this.parseUrl(t),this.initUI(),a.default.Initialize(),this.loadEngine()}loadEngine(){let t,e=n+"AppEngine.package.js",i=n+"AppBase.package.js";t=new h(a.default.AppEngine,e,this),t=new h(a.default.AppBase,i,this);let s=n+"AppObjData.package.js";t=new h(a.default.AppObjData,s,this)}loadAppFunctions(){let t,e=n+"AppEnvLightModule.package.js",i=n+"AppLightModule.package.js";t=new h(a.default.AppEnvLight,e,this),t=new h(a.default.AppLight,i,this);let s=n+"AppShadow.package.js";t=new h(a.default.AppShadow,s,this);let r=this.X.viewer,l=!0;if(l){let e=n+"AppPBR.package.js";t=new h(a.default.AppPBR,e,this),r.lambertMaterialEnabled=!1,r.pbrMaterialEnabled=!0}else{let e=n+"AppLambert.package.js";t=new h(a.default.AppLambert,e,this),r.lambertMaterialEnabled=!0,r.pbrMaterialEnabled=!1}}showLoadInfo(t,e=0){e==a.default.AppEngine&&this.showLoadProgressInfo(t)}parseUrl(t){let e=t.split("?");if(e.length<2||e[0].indexOf("renderCase")<1)return"";let i=e[1];return e=i.split("&"),e.length<2||e[0].indexOf("sample")<0?"":(i=e[1],e=i.split("="),e.length<2||"demo"!=e[0]?"":"static/voxweb3d/demos/"+e[1]+".js")}initUI(){document.body.style.background="#000000",this.Z=document.createElement("div"),this.Z.style.width="100vw",this.Z.style.height="100vh",this.elementCenter(this.Z),document.body.appendChild(this.Z),document.body.style.margin="0",this.showInfo("init...")}showInfo(t){null==this.a&&(this.a=document.createElement("div"),this.a.style.backgroundColor="rgba(255,255,255,0.1)",this.a.style.color="#00ee00",this.elementCenter(this.a),this.Z.appendChild(this.a)),this.a.innerHTML=t}showLoadProgressInfo(t){let e="loading "+Math.round(100*t.loaded/t.total)+"% ";this.showInfo(e)}showLoadStart(){this.showInfo("loading 0%")}showLoaded(){this.showInfo("100%")}loadFinish(t=0){t==a.default.AppEngine&&null!=this.Z&&(this.Z.parentElement.removeChild(this.Z),this.Z=null),this.X.loadedWithIndex(t),this.E.addFlag(t),this.Y&&this.E.hasEngineModule()&&(this.Y=!1,this.loadAppFunctions())}elementCenter(t,e="50%",i="50%",s="absolute"){t.style.textAlign="center",t.style.display="flex",t.style.flexDirection="column",t.style.justifyContent="center",t.style.alignItems="center"}}e.AppLoader=o;class h{constructor(t,e,i){this.index=0,this.index=t,this.load(e,i)}load(t,e){let i=new XMLHttpRequest;i.open("GET",t,!0),i.onerror=function(t){},i.onprogress=t=>{null!=e&&e.showLoadInfo(t,this.index)},i.onload=()=>{let t=document.createElement("script");t.onerror=t=>{},t.innerHTML=i.response,document.head.appendChild(t),null!=e&&e.loadFinish(this.index)},i.send(null)}}e.default=o},bf1e:function(t,e,i){"use strict";var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=s(i("2be0")),r=i("f3a2");class n{constructor(){this.b=null,this.O=!0,this.c=!0,this.d=null,this.e=null}preload(){this.loadSpecularData(!0)}active(t,e){this.L=e,null==this.b&&(this.K=t,this.b=new AppPBR.Instance,this.b.initialize(this.K)),this.preloadMap(this.L,"box",!0,!1,!0)}loaded(t,e){this.d=t,null!=this.b&&(this.e=this.b.createSpecularTex(this.d,!0,this.e))}loadError(t,e){}loadSpecularData(t){if(this.c){let e="static/bytes/spe.mdf";t&&(e="static/bytes/spb.bin");let i=new a.default;i.load(e,this),this.c=!1}}preloadMap(t,e,i=!0,s=!0,a=!1,r=!1){if(this.O){let t="rust_coarse_01";t="medieval_blocks_02",t="rough_plaster_broken",this.L.getTextureByUrl("static/assets/pbrtex/"+t+"_diff_1k.jpg"),this.L.getTextureByUrl("static/assets/pbrtex/"+t+"_nor_1k.jpg"),this.L.getTextureByUrl("static/assets/pbrtex/"+t+"_arm_1k.jpg"),this.L.getTextureByUrl("static/assets/pbrtex/"+t+"_disp_1k.jpg"),this.O=!1}}useMaps(t,e,i=!0,s=!0,a=!1,r=!1){t.diffuseMap=this.L.getTextureByUrl("static/assets/disp/"+e+"_COLOR.png"),t.specularMap=this.L.getTextureByUrl("static/assets/disp/"+e+"_SPEC.png"),i&&(t.normalMap=this.L.getTextureByUrl("static/assets/disp/"+e+"_NRM.png")),r&&(t.aoMap=this.L.getTextureByUrl("static/assets/disp/"+e+"_OCC.png")),s&&null!=t.vertUniform&&(t.vertUniform.displacementMap=this.L.getTextureByUrl("static/assets/disp/"+e+"_DISP.png")),t.shadowReceiveEnabled=a}getUUID(){return r.ShaderCodeUUID.PBR}isEnabled(){let t=null!=this.L&&this.L.hasShaderCodeObjectWithUUID(this.getUUID());return t}createMaterial(){null==this.e&&(this.e=this.b.createSpecularTex(this.d,!0,this.e));let t=null,e=null,i=null,s=!0,a="rust_coarse_01";a="medieval_blocks_02",a="rough_plaster_broken",t=this.L.getTextureByUrl("static/assets/pbrtex/"+a+"_diff_1k.jpg"),e=this.L.getTextureByUrl("static/assets/pbrtex/"+a+"_nor_1k.jpg"),i=this.L.getTextureByUrl("static/assets/pbrtex/"+a+"_arm_1k.jpg");let r=null;r=this.L.getTextureByUrl("static/assets/pbrtex/"+a+"_disp_1k.jpg");let n=null;n=r;let l={diffuseMap:t,normalMap:e,armMap:i,displacementMap:r,parallaxMap:n,metallic:1,roughness:.4,ao:1};l.specularEnvMap=this.e,l.shadowReceiveEnabled=!0,l.fogEnabled=s;let o=this.b.createMaterial(),h=o.getDecorator(),d=h.vertUniform;return o.setMaterialPipeline(this.L.pipeline),h.scatterEnabled=!1,h.woolEnabled=!0,h.absorbEnabled=!1,h.normalNoiseEnabled=!1,h.setMetallic(l.metallic),h.setRoughness(l.roughness),h.setAO(l.ao),h.shadowReceiveEnabled=l.shadowReceiveEnabled,h.fogEnabled=l.fogEnabled,h.armMap=l.armMap,h.specularEnvMap=l.specularEnvMap,h.diffuseMap=l.diffuseMap,h.normalMap=l.normalMap,h.aoMap=l.aoMap,d.displacementMap=l.displacementMap,h.parallaxMap=l.parallaxMap,h.initialize(),d.initialize(),d.setDisplacementParams(.02,-.01),h.setAlbedoColor(1,1,1),h.setScatterIntensity(8),h.setParallaxParams(1,10,5,.02),h.setSideIntensity(8),o}}e.default=n},c497:function(t,e,i){"use strict";var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=s(i("8e17"));class r{constructor(t=null){this.h=8192,this.i=null,this.j={depth:!0,premultipliedAlpha:!1,alpha:!0,antialias:!1,stencil:!1,preserveDrawingBuffer:!0,powerPreference:"high-performance"},this.k=20,this.l=!1,this.m=!1,this.autoSyncRenderBufferAndWindowSize=!0,this.maxWebGLVersion=2,this.cameraPerspectiveEnabled=!0,this.evtFlowEnabled=!1,this.camProjParam=new a.default(45,10,5e3),this.camPosition=new a.default(2e3,2e3,2e3),this.camLookAtPos=new a.default(0,0,0),this.camUpDirect=new a.default(0,1,0),this.batchEnabled=!0,this.processFixedState=!1,this.i=t,this.autoSyncRenderBufferAndWindowSize=null==t}setTickUpdateTime(t){t=Math.round(t),this.k=t>5?t:5}getTickUpdateTime(){return this.k}setPolygonOffsetEanbled(t){this.l=t}getPolygonOffsetEanbled(){return this.l}setDitherEanbled(t){this.m=t}getDitherEanbled(){return this.m}getDiv(){return this.i}getRenderContextAttri(){return this.j}setAttriDepth(t){this.j.depth=t}setAttriStencil(t){this.j.stencil=t}setAttriAlpha(t){this.j.alpha=t}setAttriPremultipliedAlpha(t){this.j.premultipliedAlpha=t}setAttriAntialias(t){this.j.antialias=t}setAttripreserveDrawingBuffer(t){this.j.preserveDrawingBuffer=t}setAttriHightPowerPreference(t){this.j.powerPreference=t?"high-performance":"default"}setMatrix4AllocateSize(t){t<1024&&(t=1024),this.h=t}getMatrix4AllocateSize(){return this.h}setCamProject(t,e,i){if(e>=i)throw Error("Error Camera cear > far !!!");this.camProjParam.setTo(t,e,i)}setCamPosition(t,e,i){this.camPosition.setTo(t,e,i)}setCamLookAtPos(t,e,i){this.camLookAtPos.setTo(t,e,i)}setCamUpDirect(t,e,i){this.camUpDirect.setTo(t,e,i)}}e.default=r},f3a2:function(t,e,i){"use strict";var s;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t["None"]="",t["Default"]="pbr",t["Lambert"]="lambert",t["PBR"]="pbr"}(s||(s={})),e.ShaderCodeUUID=s},fae3:function(t,e,i){"use strict";i.r(e);i("1eb2");var s=i("5ff4");for(var a in s)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(a)}})}));